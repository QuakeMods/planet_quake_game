diff -rupN code-svn//botlib/.svn/entries code//botlib/.svn/entries
--- code-svn//botlib/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//botlib/.svn/entries	2009-11-14 15:55:48.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/botlib
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 f44cb51890a1c1ad7af628c3ea4086c6
 2009-05-15T14:44:23.081931Z
 2
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 68cae09b89c320ca3aebed8cfc30a469
 2009-05-15T14:44:23.081931Z
 2
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 22ea2d5d00f3f55ac19c15da9f2240a7
 2009-05-15T14:44:23.081931Z
 2
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 f31d5f30348085ab091014da0b438986
 2009-05-15T14:44:23.081931Z
 2
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 143e41bab7e673ae77c5fc95674abcf3
 2009-05-15T14:44:23.081931Z
 2
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 fa78a3c81f05dda3a1b94e72b69bb514
 2009-05-15T14:44:23.081931Z
 2
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 3fcafdd4ec5bef654567a8fa1a6f0bff
 2009-05-15T14:44:23.081931Z
 2
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 4ad43e039fb217326d67ff54e4af6fd1
 2009-05-15T14:44:23.081931Z
 2
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 52c81a94dbd39232c0900012e3bccd0b
 2009-05-15T14:44:23.081931Z
 2
@@ -338,7 +338,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 710b75f0b5455211726a2787449af66e
 2009-05-15T14:44:23.081931Z
 2
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 2b85e765e16e283788f6495208a7562e
 2009-05-15T14:44:23.081931Z
 2
@@ -406,7 +406,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 1b1e8e7f7a2f3a29acbf750f9243ce6a
 2009-05-15T14:44:23.081931Z
 2
@@ -440,7 +440,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 fee8b6886ef7ec41bb35eb247ef91122
 2009-05-15T14:44:23.081931Z
 2
@@ -474,7 +474,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 3f74ee100a6dc9c2244dc5cbf7242ad6
 2009-05-15T14:44:23.081931Z
 2
@@ -508,7 +508,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 b363e2c140928dafdc03cdb5e3260af0
 2009-05-15T14:44:23.081931Z
 2
@@ -542,7 +542,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 d955df7f8fc9f888338cfa1d53436fd6
 2009-05-15T14:44:23.081931Z
 2
@@ -576,7 +576,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 f7d5d40a5e3d65653fbf5f7e3f32b99a
 2009-05-15T14:44:23.081931Z
 2
@@ -610,7 +610,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 417bd98296e40defd061423796145309
 2009-05-15T14:44:23.081931Z
 2
@@ -644,7 +644,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 251a4f3e3d062ec53ef69383189d463f
 2009-05-15T14:44:23.081931Z
 2
@@ -678,7 +678,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 6ce1642c349a713fd37cf97ab38d4f39
 2009-05-15T14:44:23.081931Z
 2
@@ -712,7 +712,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 b008ec08e88b66d8f8cd74abb115089e
 2009-05-15T14:44:23.081931Z
 2
@@ -746,7 +746,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 bca24aa0536d47e3f99a733ab67d26ad
 2009-05-15T14:44:23.081931Z
 2
@@ -780,7 +780,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 3470110fa342b4511524fecf0e68856b
 2009-05-15T14:44:23.081931Z
 2
@@ -814,7 +814,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 da51bdd47ccbdc4d48bebccf34c915cd
 2009-05-15T14:44:23.081931Z
 2
@@ -848,7 +848,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 4a0b7a67bc1b4cf0a5ae6c58894079d5
 2009-05-15T14:44:23.081931Z
 2
@@ -882,7 +882,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 9f433ee22189780ec0ed34668ebb697e
 2009-05-15T14:44:23.081931Z
 2
@@ -916,7 +916,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 8906acb5794ba35be61695a1406cab74
 2009-05-15T14:44:23.081931Z
 2
@@ -950,7 +950,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 6b43d395f0eb828e656ee05a61939478
 2009-05-15T14:44:23.081931Z
 2
@@ -984,7 +984,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 1015a2fe69565b284dd678e4a6831d8c
 2009-05-15T14:44:23.081931Z
 2
@@ -1018,7 +1018,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 ca93cba58bda4ae98afa00566b438c27
 2009-05-15T14:44:23.081931Z
 2
@@ -1052,7 +1052,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 632fdb4c2e59a11ac4903c1dd86e6cb3
 2009-05-15T14:44:23.081931Z
 2
@@ -1086,7 +1086,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 aef0a62ea29348748d11330cbc6e049e
 2009-05-15T14:44:23.081931Z
 2
@@ -1120,7 +1120,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 1ce240e6c634dd0cca2468eaf5d76445
 2009-05-15T14:44:23.081931Z
 2
@@ -1154,7 +1154,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 a99bf41848e84f28d49a99087a68e65f
 2009-05-15T14:44:23.081931Z
 2
@@ -1188,7 +1188,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 e0a5901603949b39a6fae396fc0caa45
 2009-05-15T14:44:23.081931Z
 2
@@ -1222,7 +1222,7 @@ file
 
 
 
-2009-12-03T12:43:06.000000Z
+2009-11-14T14:55:48.000000Z
 6789bfe9645083259401ce7f79cac3e5
 2009-05-15T14:44:23.081931Z
 2
diff -rupN code-svn//cgame/cg_consolecmds.c code//cgame/cg_consolecmds.c
--- code-svn//cgame/cg_consolecmds.c	2010-02-01 18:12:08.000000000 +0100
+++ code//cgame/cg_consolecmds.c	2009-11-14 15:55:49.000000000 +0100
@@ -29,22 +29,7 @@ Foundation, Inc., 51 Franklin St, Fifth
 extern menuDef_t *menuScoreboard;
 #endif
 
-void CG_PrintClientNumbers( void ) {
-    int i;
 
-    CG_Printf( "slot score ping name\n" );
-    CG_Printf( "---- ----- ---- ----\n" );
-
-    for(i=0;i<cg.numScores;i++) {
-        CG_Printf("%-4d",cg.scores[i].client);
-
-        CG_Printf(" %-5d",cg.scores[i].score);
-
-        CG_Printf(" %-4d",cg.scores[i].ping);
-
-        CG_Printf(" %s\n",cgs.clientinfo[cg.scores[i].client].name);
-    }
-}
 
 void CG_TargetCommand_f( void ) {
 	int		targetNum;
@@ -515,8 +500,7 @@ static consoleCommand_t	commands[] = {
 #endif
 	{ "startOrbit", CG_StartOrbit_f },
 	//{ "camera", CG_Camera_f },
-	{ "loaddeferred", CG_LoadDeferredPlayers },
-        { "clients", CG_PrintClientNumbers }
+	{ "loaddeferred", CG_LoadDeferredPlayers }	
 };
 
 
diff -rupN code-svn//cgame/cg_draw.c code//cgame/cg_draw.c
--- code-svn//cgame/cg_draw.c	2010-05-06 12:48:17.000000000 +0200
+++ code//cgame/cg_draw.c	2009-11-15 01:58:45.000000000 +0100
@@ -209,7 +209,7 @@ Draws large numbers for status bar and p
 ==============
 */
 #ifndef MISSIONPACK
-static void CG_DrawField (int x, int y, int width, int value) {
+static void CG_DrawField (int x, int y, int width, int value, float size) {
 	char	num[16], *ptr;
 	int		l;
 	int		frame;
@@ -246,7 +246,7 @@ static void CG_DrawField (int x, int y,
 	l = strlen(num);
 	if (l > width)
 		l = width;
-	x += 2 + CHAR_WIDTH*(width - l);
+	x += 2 + CHAR_WIDTH*size*(width - l);
 
 	ptr = num;
 	while (*ptr && l)
@@ -256,8 +256,8 @@ static void CG_DrawField (int x, int y,
 		else
 			frame = *ptr -'0';
 
-		CG_DrawPic( x,y, CHAR_WIDTH, CHAR_HEIGHT, cgs.media.numberShaders[frame] );
-		x += CHAR_WIDTH;
+		CG_DrawPic( x,y, CHAR_WIDTH*size, CHAR_HEIGHT*size, cgs.media.numberShaders[frame] );
+		x += CHAR_WIDTH*size;
 		ptr++;
 		l--;
 	}
@@ -560,59 +560,16 @@ static void CG_DrawStatusBar( void ) {
 	}
 
 	// draw the team background
-	if ( !(cg.snap->ps.pm_flags & PMF_FOLLOW) ) //If not following anybody:
+	/**if ( !(cg.snap->ps.pm_flags & PMF_FOLLOW) ) //If not following anybody:
 		CG_DrawTeamBackground( 0, 420, 640, 60, 0.33f, cg.snap->ps.persistant[PERS_TEAM] );
 	else //Sago: If we follow find the teamcolor of the guy we follow. It might not be our own team!
 		CG_DrawTeamBackground( 0, 420, 640, 60, 0.33f, cgs.clientinfo[ cg.snap->ps.clientNum ].team );
-
+	**/
 	cent = &cg_entities[cg.snap->ps.clientNum];
 	ps = &cg.snap->ps;
 
 	VectorClear( angles );
 
-	// draw any 3D icons first, so the changes back to 2D are minimized
-	if ( cent->currentState.weapon && cg_weapons[ cent->currentState.weapon ].ammoModel ) {
-		origin[0] = 70;
-		origin[1] = 0;
-		origin[2] = 0;
-		angles[YAW] = 90 + 20 * sin( cg.time / 1000.0 );
-		CG_Draw3DModel( CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE,
-					   cg_weapons[ cent->currentState.weapon ].ammoModel, 0, origin, angles );
-	}
-
-	CG_DrawStatusBarHead( 185 + CHAR_WIDTH*3 + TEXT_ICON_SPACE );
-
-	if( cg.predictedPlayerState.powerups[PW_REDFLAG] ) {
-		CG_DrawStatusBarFlag( 185 + CHAR_WIDTH*3 + TEXT_ICON_SPACE + ICON_SIZE, TEAM_RED );
-	} else if( cg.predictedPlayerState.powerups[PW_BLUEFLAG] ) {
-		CG_DrawStatusBarFlag( 185 + CHAR_WIDTH*3 + TEXT_ICON_SPACE + ICON_SIZE, TEAM_BLUE );
-	} else if( cg.predictedPlayerState.powerups[PW_NEUTRALFLAG] ) {
-		CG_DrawStatusBarFlag( 185 + CHAR_WIDTH*3 + TEXT_ICON_SPACE + ICON_SIZE, TEAM_FREE );
-	}
-
-	if ( ps->stats[ STAT_ARMOR ] ) {
-		origin[0] = 90;
-		origin[1] = 0;
-		origin[2] = -10;
-		angles[YAW] = ( cg.time & 2047 ) * 360 / 2048.0;
-		CG_Draw3DModel( 370 + CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE,
-					   cgs.media.armorModel, 0, origin, angles );
-	}
-        
-        if( cgs.gametype == GT_HARVESTER ) {
-		origin[0] = 90;
-		origin[1] = 0;
-		origin[2] = -10;
-		angles[YAW] = ( cg.time & 2047 ) * 360 / 2048.0;
-		if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_BLUE ) {
-			handle = cgs.media.redCubeModel;
-		} else {
-			handle = cgs.media.blueCubeModel;
-		}
-		CG_Draw3DModel( 470 + CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, handle, 0, origin, angles );
-	}
-        
-        
 	//
 	// ammo
 	//
@@ -631,25 +588,57 @@ static void CG_DrawStatusBar( void ) {
 				}
 			}
 			trap_R_SetColor( colors[color] );
-			
-			CG_DrawField (0, 432, 3, value);
+			if( value >= 100 )
+				CG_DrawField (320 - 3*CHAR_WIDTH/4, 452, 3, value, 0.5f);
+			else if( value >= 10 )
+				CG_DrawField (320 - 2*CHAR_WIDTH/4, 452, 2, value, 0.5f);
+			else
+				CG_DrawField (320 - CHAR_WIDTH/4, 452, 1, value, 0.5f);
+
 			trap_R_SetColor( NULL );
 
-			// if we didn't draw a 3D icon, draw a 2D icon for ammo
-			if ( !cg_draw3dIcons.integer && cg_drawIcons.integer ) {
-				qhandle_t	icon;
-
-				icon = cg_weapons[ cg.predictedPlayerState.weapon ].ammoIcon;
-				if ( icon ) {
-					CG_DrawPic( CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, icon );
-				}
-			}
 		}
+		if ( cent->currentState.weapon && cg_weapons[ cg.predictedPlayerState.weapon ].ammoIcon ) {
+			CG_DrawPic( 320-ICON_SIZE/4, 420, ICON_SIZE/2, ICON_SIZE/2, cg_weapons[ cg.predictedPlayerState.weapon ].ammoIcon );
+		}
+	}
+
+	
+
+	if( cg.predictedPlayerState.powerups[PW_REDFLAG] ) {
+		CG_DrawStatusBarFlag( 20, TEAM_RED );
+	} else if( cg.predictedPlayerState.powerups[PW_BLUEFLAG] ) {
+		CG_DrawStatusBarFlag( 20, TEAM_BLUE );
+	} else if( cg.predictedPlayerState.powerups[PW_NEUTRALFLAG] ) {
+		CG_DrawStatusBarFlag( 20, TEAM_FREE );
+	}
+        
+        if( cgs.gametype == GT_HARVESTER ) {
+		origin[0] = 90;
+		origin[1] = 0;
+		origin[2] = -10;
+		angles[YAW] = ( cg.time & 2047 ) * 360 / 2048.0;
+		if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_BLUE ) {
+			handle = cgs.media.redCubeModel;
+		} else {
+			handle = cgs.media.blueCubeModel;
+		}
+		CG_Draw3DModel( 470 + CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, handle, 0, origin, angles );
 	}
 
 	//
 	// health
 	//
+
+	//CG_DrawStatusBarHead( 320 - 3*CHAR_WIDTH/4 - 5*TEXT_ICON_SPACE - ICON_SIZE );
+	
+	if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_BLUE ) 
+		CG_DrawPic( 320 - 3*CHAR_WIDTH/4 - 5*TEXT_ICON_SPACE - ICON_SIZE, 432, ICON_SIZE, ICON_SIZE, cgs.media.healthBlue );
+	else if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_RED )
+		CG_DrawPic( 320 - 3*CHAR_WIDTH/4 - 5*TEXT_ICON_SPACE - ICON_SIZE, 432, ICON_SIZE, ICON_SIZE, cgs.media.healthRed );
+	else
+		CG_DrawPic( 320 - 3*CHAR_WIDTH/4 - 5*TEXT_ICON_SPACE - ICON_SIZE, 432, ICON_SIZE, ICON_SIZE, cgs.media.healthYellow );
+	
 	value = ps->stats[STAT_HEALTH];
 	if ( value > 100 ) {
 		trap_R_SetColor( colors[3] );		// white
@@ -663,7 +652,7 @@ static void CG_DrawStatusBar( void ) {
 	}
 
 	// stretch the health up when taking damage
-	CG_DrawField ( 185, 432, 3, value);
+	CG_DrawField ( 320 - 3*CHAR_WIDTH/2 - 4*TEXT_ICON_SPACE - 3*CHAR_WIDTH - ICON_SIZE, 432, 3, value,1.0f);
 	CG_ColorForHealth( hcolor );
 	trap_R_SetColor( hcolor );
 
@@ -672,16 +661,22 @@ static void CG_DrawStatusBar( void ) {
 	// armor
 	//
 	value = ps->stats[STAT_ARMOR];
-	if (value > 0 ) {
-		trap_R_SetColor( colors[0] );
-		CG_DrawField (370, 432, 3, value);
-		trap_R_SetColor( NULL );
-		// if we didn't draw a 3D icon, draw a 2D icon for armor
-		if ( !cg_draw3dIcons.integer && cg_drawIcons.integer ) {
-			CG_DrawPic( 370 + CHAR_WIDTH*3 + TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, cgs.media.armorIcon );
-		}
+	trap_R_SetColor( colors[0] );
+        if ( value >= 100 )
+		CG_DrawField (320 + CHAR_WIDTH + 6*TEXT_ICON_SPACE + ICON_SIZE, 432, 3, value, 1.0f);
+        else
+		CG_DrawField (320 + CHAR_WIDTH + 6*TEXT_ICON_SPACE + ICON_SIZE, 432, 2, value, 1.0f);
+	trap_R_SetColor( NULL );
+	// if we didn't draw a 3D icon, draw a 2D icon for armor
+	if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_BLUE ) 
+		CG_DrawPic( 320 + CHAR_WIDTH + 4*TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, cgs.media.armorBlue );
+	else if( cg.snap->ps.persistant[PERS_TEAM] == TEAM_RED )
+		CG_DrawPic( 320 + CHAR_WIDTH + 4*TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, cgs.media.armorRed );
+	else
+		CG_DrawPic( 320 + CHAR_WIDTH + 4*TEXT_ICON_SPACE, 432, ICON_SIZE, ICON_SIZE, cgs.media.armorYellow );
+		
 
-	}
+	
         
         //Skulls!
         if(cgs.gametype == GT_HARVESTER)
@@ -689,7 +684,7 @@ static void CG_DrawStatusBar( void ) {
             value = ps->generic1;
             if (value > 0 ) {
                     trap_R_SetColor( colors[0] );
-                    CG_DrawField (470, 432, 3, value);
+                    CG_DrawField (470, 432, 3, value, 1.0f);
                     trap_R_SetColor( NULL );
                     // if we didn't draw a 3D icon, draw a 2D icon for skull
                     if ( !cg_draw3dIcons.integer && cg_drawIcons.integer ) {
@@ -852,12 +847,12 @@ static float CG_DrawFPS( float y ) {
 		fps = 1000 * FPS_FRAMES / total;
 
 		s = va( "%ifps", fps );
-		w = CG_DrawStrlen( s ) * BIGCHAR_WIDTH;
+		w = CG_DrawStrlen( s ) * SMALLCHAR_WIDTH;
 
-		CG_DrawBigString( 635 - w, y + 2, s, 1.0F);
+		CG_DrawSmallString( 635 - w, y + 2, s, 1.0F);
 	}
 
-	return y + BIGCHAR_HEIGHT + 4;
+	return y + SMALLCHAR_HEIGHT + 4;
 }
 
 /*
@@ -865,7 +860,7 @@ static float CG_DrawFPS( float y ) {
 CG_DrawTimer
 =================
 */
-static float CG_DrawTimer( float y ) {
+void CG_DrawTimer() {
 	char		*s;
 	int			w;
 	int			mins, seconds, tens;
@@ -882,9 +877,9 @@ static float CG_DrawTimer( float y ) {
 	s = va( "%i:%i%i", mins, tens, seconds );
 	w = CG_DrawStrlen( s ) * BIGCHAR_WIDTH;
 
-	CG_DrawBigString( 635 - w, y + 2, s, 1.0F);
+	CG_DrawBigString( 320 - w/2, 10, s, 1.0F);
 
-	return y + BIGCHAR_HEIGHT + 4;
+	return;
 }
 
 /*
@@ -1076,15 +1071,9 @@ static float CG_DrawEliminationTimer( fl
 	float scale;
 	int cw;
 	int rst;
-
-        
-
+	
 	rst = cgs.roundStartTime;
 
-        if(cg.time>rst && !cgs.roundtime) {
-            return y;
-        }
-
 	//default color is white
 	memcpy(color,g_color_table[ColorIndex(COLOR_WHITE)],sizeof(color));
 
@@ -1151,9 +1140,8 @@ Lots of stuff
 			//w = CG_Text_Width(s, scale, 0);
 			//CG_Text_Paint(320 - w / 2, 125, scale, colorWhite, st, 0, 0, ITEM_TEXTSTYLE_SHADOWEDMORE);
 	#else
-                
-                    w = CG_DrawStrlen( st );
-                    CG_DrawStringExt( 320 - w * cw/2, 70, st, colorWhite,
+		w = CG_DrawStrlen( st );
+		CG_DrawStringExt( 320 - w * cw/2, 70, st, colorWhite, 
 				qfalse, qtrue, cw, (int)(cw * 1.5), 0 );
 	#endif
 	}
@@ -1414,9 +1402,6 @@ static void CG_DrawUpperRight(stereoFram
 
 	y = CG_DrawFollowMessage( y );
 
-	if ( cg_drawTimer.integer) {
-		y = CG_DrawTimer( y );
-	}
 	if ( cg_drawAttacker.integer ) {
 		y = CG_DrawAttacker( y );
 	}
@@ -1697,7 +1682,7 @@ static float CG_DrawPowerups( float y )
 		  y -= ICON_SIZE;
 
 		  trap_R_SetColor( colors[color] );
-		  CG_DrawField( x, y, 2, sortedTime[ i ] / 1000 );
+		  CG_DrawField( x, y, 2, sortedTime[ i ] / 1000 , 1.0f);
 
 		  t = ps->powerups[ sorted[i] ];
 		  if ( t - cg.time >= POWERUP_BLINKS * POWERUP_BLINK_TIME ) {
@@ -1818,8 +1803,8 @@ static void CG_DrawTeamInfo( void ) {
 	vec4_t		hcolor;
 	int		chatHeight;
 
-#define CHATLOC_Y 420 // bottom end
-#define CHATLOC_X 0
+#define TEAMCHATLOC_Y 420 // bottom end
+#define TEAMCHATLOC_X 0
 
 	if (cg_teamChatHeight.integer < TEAMCHAT_HEIGHT)
 		chatHeight = cg_teamChatHeight.integer;
@@ -1863,15 +1848,15 @@ static void CG_DrawTeamInfo( void ) {
 		}
 
 		trap_R_SetColor( hcolor );
-		CG_DrawPic( CHATLOC_X, CHATLOC_Y - h, 640, h, cgs.media.teamStatusBar );
+		CG_DrawPic( TEAMCHATLOC_X, TEAMCHATLOC_Y - h, 640, h, cgs.media.teamStatusBar );
 		trap_R_SetColor( NULL );
 
 		hcolor[0] = hcolor[1] = hcolor[2] = 1.0f;
 		hcolor[3] = 1.0f;
 
 		for (i = cgs.teamChatPos - 1; i >= cgs.teamLastChatPos; i--) {
-			CG_DrawStringExt( CHATLOC_X + TINYCHAR_WIDTH, 
-				CHATLOC_Y - (cgs.teamChatPos - i)*TINYCHAR_HEIGHT, 
+			CG_DrawStringExt( TEAMCHATLOC_X + TINYCHAR_WIDTH, 
+				TEAMCHATLOC_Y - (cgs.teamChatPos - i)*TINYCHAR_HEIGHT, 
 				cgs.teamChatMsgs[i % chatHeight], hcolor, qfalse, qfalse,
 				TINYCHAR_WIDTH, TINYCHAR_HEIGHT, 0 );
 		}
@@ -1880,6 +1865,125 @@ static void CG_DrawTeamInfo( void ) {
 #endif // MISSIONPACK
 
 /*
+=================
+CG_DrawChat
+=================
+*/
+static void CG_DrawChat(void)
+{
+  int w, h;
+  int i, len;
+  vec4_t hcolor;
+  int chatHeight;
+
+#define CHATLOC_Y 60
+#define CHATLOC_X 0
+
+  if (cg_chatHeight.integer < TEAMCHAT_HEIGHT)
+    chatHeight = cg_chatHeight.integer;
+  else
+    chatHeight = TEAMCHAT_HEIGHT;
+  if (chatHeight <= 0)
+    return;                     // disabled
+
+  if (cgs.lastChatPos != cgs.chatPos)
+  {
+    if (cg.time - cgs.chatMsgTimes[cgs.lastChatPos % chatHeight] >
+        cg_chatTime.integer)
+    {
+      cgs.lastChatPos++;
+    }
+
+    h = (cgs.chatPos - cgs.lastChatPos) * TINYCHAR_HEIGHT;
+
+    w = 0;
+
+    for (i = cgs.lastChatPos; i < cgs.chatPos; i++)
+    {
+      len = CG_DrawStrlen(cgs.chatMsgs[i % chatHeight]);
+      if (len > w)
+        w = len;
+    }
+    w *= TINYCHAR_WIDTH;
+    w += TINYCHAR_WIDTH * 2;
+
+    hcolor[0] = hcolor[1] = hcolor[2] = 1.0f;
+    hcolor[3] = 1.0f;
+
+    for (i = cgs.lastChatPos; i < cgs.chatPos; i++)
+    {
+      CG_DrawStringExt(CHATLOC_X,
+                       CHATLOC_Y + (i - cgs.lastChatPos ) * TINYCHAR_HEIGHT,
+                       cgs.chatMsgs[i % chatHeight], hcolor, qfalse,
+                       qfalse, TINYCHAR_WIDTH, TINYCHAR_HEIGHT, 0);
+    }
+  }
+}
+
+/*
+=================
+CG_DrawDeathNotice
+=================
+*/
+
+static void CG_DrawDeathNotice(void){
+  int i;
+  int x;
+  int y;
+  vec4_t color1,color2;
+  qboolean setcolor1, setcolor2;
+  y=0;
+  for( i = DEATHNOTICE_HEIGHT - 1; i >= 0 ; i-- ) {
+    if( ( cgs.deathNoticeTime[ i ] != 0 ) && ( cg.time - cgs.deathNoticeTime[ i ] < cg_deathNoticeTime.integer ) ) {
+
+      if( cgs.deathNoticeTeam1[ i ] == TEAM_RED ){
+        color1[0]=color1[3]=1.0F;
+        color1[1]=color1[2]=0.2f;
+        setcolor1 = qtrue;
+      } else if ( cgs.deathNoticeTeam1[ i ] == TEAM_BLUE ) {
+        color1[2]=color1[3]=1.0F;
+        color1[1]=color1[0]=0.2f;
+        setcolor1 = qtrue;
+      } else {
+        color1[0]=color1[1]=color1[2]=color1[3]=1.0F;
+        setcolor1 = qfalse;
+      }
+
+      if( cgs.deathNoticeTeam2[ i ] == TEAM_RED ){
+        color2[0]=color2[3]=1.0F;
+        color2[1]=color2[2]=0.2f;
+        setcolor2 = qtrue;
+      } else if ( cgs.deathNoticeTeam2[ i ] == TEAM_BLUE ) {
+        color2[2]=color2[3]=1.0F;
+        color2[1]=color2[0]=0.2f;
+        setcolor2 = qtrue;
+      } else {
+        color2[0]=color2[1]=color2[2]=color2[3]=1.0F;
+        setcolor2 = qfalse;
+      }
+      
+      x = 0;
+      CG_DrawStringExt(x,y, cgs.deathNoticeName1[ i ], color1, setcolor1, qfalse, TINYCHAR_WIDTH, TINYCHAR_HEIGHT, 0);
+
+      x += TINYCHAR_WIDTH*( CG_DrawStrlen(cgs.deathNoticeName1[ i ]));
+
+      if( cgs.deathNoticeTwoIcons[ i ] ) {
+        CG_DrawPic(x + 1, y, 8, 8, cgs.deathNoticeIcon2[ i ]);
+        x += 10;
+      }
+
+      CG_DrawPic(x + 1, y, 8, 8, cgs.deathNoticeIcon1[ i ]);
+
+      x += 10;
+
+      CG_DrawStringExt(x, y, cgs.deathNoticeName2[ i ], color2, setcolor2, qfalse, TINYCHAR_WIDTH, TINYCHAR_HEIGHT, 0);
+
+      y += TINYCHAR_HEIGHT + 2;
+    }
+  }
+}
+
+/*
 ===================
 CG_DrawHoldableItem
 ===================
@@ -2416,9 +2520,6 @@ static void CG_DrawCenterDDString( void
             case 3:
                 trap_S_StartLocalSound( cgs.media.count3Sound, CHAN_ANNOUNCER );
                 break;
-            case 10:
-                trap_S_StartLocalSound( cgs.media.doublerSound , CHAN_ANNOUNCER );
-                break;
             default:
                 break;
         }
@@ -3262,6 +3363,8 @@ static void CG_Draw2D(stereoFrame_t ster
 #endif
 		}
 	}
+	CG_DrawDeathNotice();
+	CG_DrawChat();
 
 	CG_DrawVote();
 	CG_DrawTeamVote();
@@ -3271,9 +3374,15 @@ static void CG_Draw2D(stereoFrame_t ster
 #ifdef MISSIONPACK
 	if (!cg_paused.integer) {
 		CG_DrawUpperRight(stereoFrame);
+		if ( cg_drawTimer.integer) {
+			CG_DrawTimer();
+		}
 	}
 #else
 	CG_DrawUpperRight(stereoFrame);
+	if ( cg_drawTimer.integer) {
+		CG_DrawTimer();
+	}
 #endif
 
 #ifndef MISSIONPACK
diff -rupN code-svn//cgame/cg_effects.c code//cgame/cg_effects.c
--- code-svn//cgame/cg_effects.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_effects.c	2009-11-14 15:55:49.000000000 +0100
@@ -514,85 +514,39 @@ void CG_Bleed( vec3_t origin, int entity
 		ex->refEntity.renderfx |= RF_THIRD_PERSON;
 	}
 }
-
+
 
 
 /*
 ==================
-CG_SpurtBlood (LEILEI)
+CG_LaunchGib
 ==================
 */
-void CG_SpurtBlood( vec3_t origin, vec3_t velocity, int hard ) {
-	localEntity_t	*le;
-	refEntity_t		*re;
-	localEntity_t	*blood;
-//		if ( !cg_blood.integer ) {	return;	}
-
-	
-	velocity[0] = velocity[0] * hard * crandom()*460;
-	velocity[1] = velocity[1] * hard * crandom()*460;
-	velocity[2] = velocity[2] * hard * crandom()*566 + 65;
-		blood = CG_SmokePuff( origin, velocity, 
-					21,		// radius
-					  1, 1, 1, 1,	// color
-					 2450,		// trailTime
-					 cg.time,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbldShader1 );
-		// use the optimized version
-		blood->leType = LE_FALL_SCALE_FADE;
-		blood->leType = LE_GORE;
-		blood->pos.trType = TR_GRAVITY;
-		VectorCopy( velocity, blood->pos.trDelta );
-		blood->pos.trDelta[2] = 55;
-		if (crandom() < 0.5){
-		blood->leMarkType = LEMT_BURN;
-		blood->leBounceSoundType = LEBS_BLOOD;
-		}
-	//	VectorCopy( velocity, blood->pos.trDelta );
-
-}
-/*
-==================
-CG_LaunchGib
-==================
-*/
-void CG_LaunchGib( vec3_t origin, vec3_t velocity, qhandle_t hModel ) {
-	localEntity_t	*le;
-	refEntity_t		*re;
-
-	le = CG_AllocLocalEntity();
-	re = &le->refEntity;
-
-	le->leType = LE_FRAGMENT;
-	le->startTime = cg.time;
-	le->endTime = le->startTime + 5000 + random() * 3000;
-
-	VectorCopy( origin, re->origin );
-	AxisCopy( axisDefault, re->axis );
-	re->hModel = hModel;
-
-	le->pos.trType = TR_GRAVITY;
-	VectorCopy( origin, le->pos.trBase );
-	VectorCopy( velocity, le->pos.trDelta );
-	le->pos.trTime = cg.time;
-
-	le->bounceFactor = 0.6f;
-
-	le->leBounceSoundType = LEBS_BLOOD;
-	le->leMarkType = LEMT_BLOOD;
-		if ( cg_leiSuperGoreyAwesome.integer ) {
-			CG_SpurtBlood( origin, velocity, 7); // LEILEI toss some extra juice
-			CG_SpurtBlood( origin, velocity, 22); 
-			CG_SpurtBlood( origin, velocity, 11); 
-			}
-	
-}
-
-
-
-
+void CG_LaunchGib( vec3_t origin, vec3_t velocity, qhandle_t hModel ) {
+	localEntity_t	*le;
+	refEntity_t		*re;
+
+	le = CG_AllocLocalEntity();
+	re = &le->refEntity;
+
+	le->leType = LE_FRAGMENT;
+	le->startTime = cg.time;
+	le->endTime = le->startTime + 5000 + random() * 3000;
+
+	VectorCopy( origin, re->origin );
+	AxisCopy( axisDefault, re->axis );
+	re->hModel = hModel;
+
+	le->pos.trType = TR_GRAVITY;
+	VectorCopy( origin, le->pos.trBase );
+	VectorCopy( velocity, le->pos.trDelta );
+	le->pos.trTime = cg.time;
+
+	le->bounceFactor = 0.6f;
+
+	le->leBounceSoundType = LEBS_BLOOD;
+	le->leMarkType = LEMT_BLOOD;
+}
 
 /*
 ===================
@@ -720,7 +674,7 @@ CG_GibPlayer
 Generated a bunch of gibs launching out from the bodies location
 ===================
 */
-void CG_BigExplosion( vec3_t playerOrigin ) {
+void CG_BigExplode( vec3_t playerOrigin ) {
 	vec3_t	origin, velocity;
 
 	if ( !cg_blood.integer ) {
@@ -758,7 +712,3 @@ void CG_BigExplosion( vec3_t playerOrigi
 	CG_LaunchExplode( origin, velocity, cgs.media.smoke2 );
 }
 
-
-
-
-
diff -rupN code-svn//cgame/cg_event.c code//cgame/cg_event.c
--- code-svn//cgame/cg_event.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_event.c	2009-11-15 02:12:19.000000000 +0100
@@ -90,6 +90,11 @@ static void CG_Obituary( entityState_t *
 	char		attackerName[32];
 	gender_t	gender;
 	clientInfo_t	*ci;
+	qhandle_t icon1;
+	qhandle_t icon2;
+	qboolean twoIcons;
+
+	twoIcons = qfalse;
 
 	target = ent->otherEntityNum;
 	attacker = ent->otherEntityNum2;
@@ -123,30 +128,39 @@ static void CG_Obituary( entityState_t *
         else
             switch( mod ) {
             case MOD_SUICIDE:
+		    icon1 = cgs.media.skull;
                     message = "suicides";
                     break;
             case MOD_FALLING:
+		    icon1 = cgs.media.skull;
                     message = "cratered";
                     break;
             case MOD_CRUSH:
+		    icon1 = cgs.media.skull;
                     message = "was squished";
                     break;
             case MOD_WATER:
+		    icon1 = cgs.media.skull;
                     message = "sank like a rock";
                     break;
             case MOD_SLIME:
+		    icon1 = cgs.media.skull;
                     message = "melted";
                     break;
             case MOD_LAVA:
+		    icon1 = cgs.media.skull;
                     message = "does a back flip into the lava";
                     break;
             case MOD_TARGET_LASER:
+		    icon1 = cgs.media.skull;
                     message = "saw the light";
                     break;
             case MOD_TRIGGER_HURT:
+		    icon1 = cgs.media.skull;
                     message = "was in the wrong place";
                     break;
             default:
+		    icon1 = cgs.media.skull;
                     message = NULL;
                     break;
             }
@@ -155,9 +169,11 @@ static void CG_Obituary( entityState_t *
 		gender = ci->gender;
 		switch (mod) {
 		case MOD_KAMIKAZE:
+			icon1 = cgs.media.skull;
 			message = "goes out with a bang";
 			break;
 		case MOD_GRENADE_SPLASH:
+			icon1 = cg_weapons[WP_GRENADE_LAUNCHER].weaponIcon;
 			if ( gender == GENDER_FEMALE )
 				message = "tripped on her own grenade";
 			else if ( gender == GENDER_NEUTER )
@@ -166,6 +182,7 @@ static void CG_Obituary( entityState_t *
 				message = "tripped on his own grenade";
 			break;
 		case MOD_ROCKET_SPLASH:
+			icon1 = cg_weapons[WP_ROCKET_LAUNCHER].weaponIcon;
 			if ( gender == GENDER_FEMALE )
 				message = "blew herself up";
 			else if ( gender == GENDER_NEUTER )
@@ -174,6 +191,7 @@ static void CG_Obituary( entityState_t *
 				message = "blew himself up";
 			break;
 		case MOD_PLASMA_SPLASH:
+			icon1 = cg_weapons[WP_PLASMAGUN].weaponIcon;
 			if ( gender == GENDER_FEMALE )
 				message = "melted herself";
 			else if ( gender == GENDER_NEUTER )
@@ -182,9 +200,11 @@ static void CG_Obituary( entityState_t *
 				message = "melted himself";
 			break;
 		case MOD_BFG_SPLASH:
+			icon1 = cg_weapons[WP_BFG].weaponIcon;
 			message = "should have used a smaller gun";
 			break;
 		case MOD_PROXIMITY_MINE:
+			icon1 = cg_weapons[WP_PROX_LAUNCHER].weaponIcon;
 			if( gender == GENDER_FEMALE ) {
 				message = "found her prox mine";
 			} else if ( gender == GENDER_NEUTER ) {
@@ -194,6 +214,7 @@ static void CG_Obituary( entityState_t *
 			}
 			break;
 		default:
+			icon1 = cgs.media.skull;
 			if ( gender == GENDER_FEMALE )
 				message = "killed herself";
 			else if ( gender == GENDER_NEUTER )
@@ -206,6 +227,7 @@ static void CG_Obituary( entityState_t *
 
         //If a suicide happens while disconnecting then we might not have a targetName
 	if (message && strlen(targetName)) {
+		CG_AddDeathNotice( "", cgs.clientinfo[attacker].team, va("%s",targetName), cgs.clientinfo[target].team, twoIcons, icon1, icon2 );
 		CG_Printf( "%s %s.\n", targetName, message);
 		return;
 	}
@@ -257,96 +279,128 @@ static void CG_Obituary( entityState_t *
                 else
 		switch (mod) {
 		case MOD_GRAPPLE:
+			icon1 = cg_weapons[WP_GRAPPLING_HOOK].weaponIcon;
 			message = "was caught by";
 			break;
 		case MOD_GAUNTLET:
+			icon1 = cg_weapons[WP_GAUNTLET].weaponIcon;
 			message = "was pummeled by";
 			break;
 		case MOD_MACHINEGUN:
+			icon1 = cg_weapons[WP_MACHINEGUN].weaponIcon;
 			message = "was machinegunned by";
 			break;
 		case MOD_SHOTGUN:
+			icon1 = cg_weapons[WP_SHOTGUN].weaponIcon;
 			message = "was gunned down by";
 			break;
 		case MOD_GRENADE:
+			icon1 = cg_weapons[WP_GRENADE_LAUNCHER].weaponIcon;
+			icon2 = cgs.media.direct_hit;
+			twoIcons = qtrue;
 			message = "ate";
 			message2 = "'s grenade";
 			break;
 		case MOD_GRENADE_SPLASH:
+			icon1 = cg_weapons[WP_GRENADE_LAUNCHER].weaponIcon;
 			message = "was shredded by";
 			message2 = "'s shrapnel";
 			break;
 		case MOD_ROCKET:
+			icon1 = cg_weapons[WP_ROCKET_LAUNCHER].weaponIcon;
+			icon2 = cgs.media.direct_hit;
+			twoIcons = qtrue;
 			message = "ate";
 			message2 = "'s rocket";
 			break;
 		case MOD_ROCKET_SPLASH:
+			icon1 = cg_weapons[WP_ROCKET_LAUNCHER].weaponIcon;
 			message = "almost dodged";
 			message2 = "'s rocket";
 			break;
 		case MOD_PLASMA:
+			icon1 = cg_weapons[WP_PLASMAGUN].weaponIcon;
 			message = "was melted by";
 			message2 = "'s plasmagun";
 			break;
 		case MOD_PLASMA_SPLASH:
+			icon1 = cg_weapons[WP_PLASMAGUN].weaponIcon;
 			message = "was melted by";
 			message2 = "'s plasmagun";
 			break;
 		case MOD_RAILGUN:
+			icon1 = cg_weapons[WP_RAILGUN].weaponIcon;
 			message = "was railed by";
 			break;
 		case MOD_LIGHTNING:
+			icon1 = cg_weapons[WP_LIGHTNING].weaponIcon;
 			message = "was electrocuted by";
 			break;
 		case MOD_BFG:
+			icon2 = cgs.media.direct_hit;
+			twoIcons = qtrue;
 		case MOD_BFG_SPLASH:
+			icon1 = cg_weapons[WP_BFG].weaponIcon;
 			message = "was blasted by";
 			message2 = "'s BFG";
 			break;
 		case MOD_NAIL:
+			icon1 = cg_weapons[WP_NAILGUN].weaponIcon;
 			message = "was nailed by";
 			break;
 		case MOD_CHAINGUN:
+			icon1 = cg_weapons[WP_CHAINGUN].weaponIcon;
 			message = "got lead poisoning from";
 			message2 = "'s Chaingun";
 			break;
 		case MOD_PROXIMITY_MINE:
+			icon1 = cg_weapons[WP_PROX_LAUNCHER].weaponIcon;
 			message = "was too close to";
 			message2 = "'s Prox Mine";
 			break;
 		case MOD_KAMIKAZE:
+			icon1 = cgs.media.skull;
 			message = "falls to";
 			message2 = "'s Kamikaze blast";
 			break;
 		case MOD_JUICED:
+			icon1 = cgs.media.skull;	
 			message = "was juiced by";
 			break;
 		case MOD_TELEFRAG:
+			icon1 = cgs.media.skull;
 			message = "tried to invade";
 			message2 = "'s personal space";
 			break;
                 case MOD_LAVA:
+			icon1 = cgs.media.skull;
                         message = "was given a hot bath by";
                         break;
                 case MOD_SLIME:
+			icon1 = cgs.media.skull;
                         message = "was given a acid bath by";
                         break;
                 case MOD_FALLING:
+			icon1 = cgs.media.skull;
                         message = "was given a small push by";
                         break;
                 case MOD_TRIGGER_HURT:
+			icon1 = cgs.media.skull;
                         message = "was helped on the way by";
                         break;
                 case MOD_CRUSH:
+			icon1 = cgs.media.skull;
                         message = "was crushed in";
                         message2 = "'s trap";
                         break;
 		default:
+			icon1 = cgs.media.skull;
 			message = "was killed by";
 			break;
 		}
 
 		if (message) {
+			CG_AddDeathNotice( va("%s", attackerName), cgs.clientinfo[attacker].team, va("%s",targetName), cgs.clientinfo[target].team, twoIcons, icon1, icon2 );
 			CG_Printf( "%s %s %s%s\n", 
 				targetName, message, attackerName, message2);
 			return;
@@ -357,6 +411,36 @@ static void CG_Obituary( entityState_t *
 	CG_Printf( "%s died.\n", targetName );
 }
 
+/*
+===============
+CG_AddDeathNotice
+===============
+*/
+
+void CG_AddDeathNotice( char name1[ MAX_NAME_LENGTH ], int team1, char name2[ MAX_NAME_LENGTH ], int team2, qboolean twoIcons, qhandle_t icon1, qhandle_t icon2 ) {
+  int i,j;
+  for( i=DEATHNOTICE_HEIGHT-1 ; i > 0 ; i-- ) {
+    if ( cgs.deathNoticeTime[ i-1 ] != 0 ) {
+      cgs.deathNoticeTime[ i ] = cgs.deathNoticeTime[ i-1 ];
+      Q_strncpyz(cgs.deathNoticeName1[ i ], cgs.deathNoticeName1[ i-1 ], sizeof(cgs.deathNoticeName1[ i ]));
+      Q_strncpyz(cgs.deathNoticeName2[ i ], cgs.deathNoticeName2[ i-1 ], sizeof(cgs.deathNoticeName2[ i ]));
+      cgs.deathNoticeTeam1[ i ] = cgs.deathNoticeTeam1[ i-1 ];
+      cgs.deathNoticeTeam2[ i ] = cgs.deathNoticeTeam2[ i-1 ];
+      cgs.deathNoticeIcon1[ i ] = cgs.deathNoticeIcon1[ i-1 ];
+      cgs.deathNoticeIcon2[ i ] = cgs.deathNoticeIcon2[ i-1 ];
+      cgs.deathNoticeTwoIcons[ i ] = cgs.deathNoticeTwoIcons[ i-1 ];
+    }
+  }
+  cgs.deathNoticeTime[ 0 ] = cg.time;
+  Q_strncpyz(cgs.deathNoticeName1[ 0 ], name1, sizeof(cgs.deathNoticeName1[ 0 ]));
+  Q_strncpyz(cgs.deathNoticeName2[ 0 ], name2, sizeof(cgs.deathNoticeName2[ 0 ]));
+  cgs.deathNoticeTeam1[ 0 ] = team1;
+  cgs.deathNoticeTeam2[ 0 ] = team2;
+  cgs.deathNoticeIcon1[ 0 ] = icon1;
+  cgs.deathNoticeIcon2[ 0 ] = icon2;
+  cgs.deathNoticeTwoIcons[ 0 ] = twoIcons;
+}
+
 //==========================================================================
 
 /*
diff -rupN code-svn//cgame/cg_localents.c code//cgame/cg_localents.c
--- code-svn//cgame/cg_localents.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_localents.c	2009-11-14 15:55:49.000000000 +0100
@@ -26,7 +26,7 @@ Foundation, Inc., 51 Franklin St, Fifth
 
 #include "cg_local.h"
 
-#define	MAX_LOCAL_ENTITIES	512 
+#define	MAX_LOCAL_ENTITIES	512
 localEntity_t	cg_localEntities[MAX_LOCAL_ENTITIES];
 localEntity_t	cg_activeLocalEntities;		// double linked list
 localEntity_t	*cg_freeLocalEntities;		// single linked list
@@ -143,46 +143,11 @@ void CG_BloodTrail( localEntity_t *le )
 		// use the optimized version
 		blood->leType = LE_FALL_SCALE_FADE;
 		// drop a total of 40 units over its lifetime
-		blood->pos.trDelta[2] = 40;
-		if ( cg_leiSuperGoreyAwesome.integer ) {
-//			blood = CG_SpurtBlood( newOrigin, vec3_origin, 3); // LEILEI more gore plz
-			}
-	}
-}
-
-
-// LEILEI
-void CG_SmallBloodTrail( localEntity_t *le ) {
-	int		t;
-	int		t2;
-	int		step;
-	vec3_t	newOrigin;
-	localEntity_t	*blood;
-
-	step = 61;
-	t = step * ( (cg.time - cg.frametime + step ) / step );
-	t2 = step * ( cg.time / step );
-
-	for ( ; t <= t2; t += step ) {
-		BG_EvaluateTrajectory( &le->pos, t, newOrigin );
-
-		blood = CG_SmokePuff( newOrigin, vec3_origin, 
-					  3,		// radius
-					  1, 1, 1, 1,	// color
-					  770,		// trailTime
-					  t,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbldShader1 );
-		// use the optimized version
-		blood->leType = LE_FALL_SCALE_FADE;
-		// drop a total of 40 units over its lifetime
-		blood->pos.trDelta[2] = 120;
+		blood->pos.trDelta[2] = 40;
 	}
 }
 
 
-
 /*
 ================
 CG_FragmentBounceMark
@@ -231,43 +196,7 @@ void CG_FragmentBounceSound( localEntity
 			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
 		}
 	} else if ( le->leBounceSoundType == LEBS_BRASS ) {
-		if ( cg_leiBrassNoise.integer ) {
-		// half the casings will make  casing sounds
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lbul1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lbul2Sound;
-			} else {
-				s = cgs.media.lbul3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-			}
-		}
-
-	} else if ( le->leBounceSoundType == LEBS_SHELL ) {
-		
-		if ( cg_leiBrassNoise.integer ) {
-			
-		// half the casings will make  casing sounds
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lshl1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lshl2Sound;
-			} else {
-				s = cgs.media.lshl3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-		}
-		}
-
+
 	}
 
 	// don't allow a fragment to make multiple bounce sounds,
@@ -276,56 +205,6 @@ void CG_FragmentBounceSound( localEntity
 }
 
 
-// LEILEI 
-void CG_GoreMark( localEntity_t *le, trace_t *trace ) {
-	int			radius;
-
-	if ( le->leMarkType == LEMT_BURN ) {
-
-		radius = 6 + (rand()&16);
-		CG_ImpactMark( cgs.media.lbldShader2, trace->endpos, trace->plane.normal, random()*360,
-			1,1,1,1, qtrue, radius, qfalse );
-	
-	}
-
-	le->leMarkType = LEMT_NONE;
-}
-
-
-/*
-================
-CG_SplatSound LEILEI
-================
-*/
-void CG_SplatSound( localEntity_t *le, trace_t *trace ) {
-	if ( le->leBounceSoundType == LEBS_BLOOD ) {
-		// half the splats will make splat sounds
-	if ( cg_leiGoreNoise.integer ) {
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lspl1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lspl2Sound;
-			} else {
-				s = cgs.media.lspl3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-		}
-		}
-	} else if ( le->leBounceSoundType == LEBS_BRASS ) {
-		// no GERMAN EURO CENSOR ROBOTS mode yet.
-	}
-
-	// don't allow a fragment to make multiple bounce sounds,
-	// or it gets too noisy as they settle
-	le->leBounceSoundType = LEBS_NONE;
-}
-
-
-
 /*
 ================
 CG_ReflectVelocity
@@ -436,91 +315,6 @@ void CG_AddFragment( localEntity_t *le )
 	trap_R_AddRefEntityToScene( &le->refEntity );
 }
 
-// LEILEI
-
-void CG_JustSplat( localEntity_t *le, trace_t *trace ) {
-	vec3_t	velocity;
-	float	dot;
-	int		hitTime;
-
-	// reflect the velocity on the trace plane
-	hitTime = cg.time - cg.frametime + cg.frametime * trace->fraction;
-	BG_EvaluateTrajectoryDelta( &le->pos, hitTime, velocity );
-	dot = DotProduct( velocity, trace->plane.normal );
-	VectorMA( velocity, -2*dot, trace->plane.normal, le->pos.trDelta );
-
-	VectorScale( le->pos.trDelta, le->bounceFactor, le->pos.trDelta );
-
-	VectorCopy( trace->endpos, le->pos.trBase );
-	le->pos.trTime = cg.time;
-
-
-	// check for stop, making sure that even on low FPS systems it doesn't bobble
-	if ( trace->allsolid || 
-		( trace->plane.normal[2] > 0 && 
-		( le->pos.trDelta[2] < 40 || le->pos.trDelta[2] < -cg.frametime * le->pos.trDelta[2] ) ) ) {
-		le->pos.trType = TR_STATIONARY;
-	} else {
-
-	}
-}
-
-void CG_AddGore( localEntity_t *le ) {
-	vec3_t	newOrigin;
-	trace_t	trace;
-
-	if ( le->pos.trType == TR_STATIONARY ) {
-		// sink into the ground if near the removal time
-		int		t;
-		float	oldZ;
-		
-		CG_FreeLocalEntity( le ); // kill it
-
-		return;
-	}
-
-	// calculate new position
-	BG_EvaluateTrajectory( &le->pos, cg.time, newOrigin );
-
-	// trace a line from previous position to new position
-	CG_Trace( &trace, le->refEntity.origin, NULL, NULL, newOrigin, -1, CONTENTS_SOLID );
-	if ( trace.fraction == 1.0 ) {
-		// still in free fall
-		VectorCopy( newOrigin, le->refEntity.origin );
-
-		if ( le->leFlags & LEF_TUMBLE ) {
-			vec3_t angles;
-
-			BG_EvaluateTrajectory( &le->angles, cg.time, angles );
-			AnglesToAxis( angles, le->refEntity.axis );
-		}
-
-		trap_R_AddRefEntityToScene( &le->refEntity );
-
-		CG_SmallBloodTrail( le );
-	
-		return;
-	}
-
-	// if it is in a nodrop zone, remove it
-	// this keeps gibs from waiting at the bottom of pits of death
-	// and floating levels
-	if ( trap_CM_PointContents( trace.endpos, 0 ) & CONTENTS_NODROP ) {
-		CG_FreeLocalEntity( le );
-		return;
-	}
-
-	// leave a mark
-	CG_GoreMark( le, &trace );
-
-	// do a juicy sound
-	CG_SplatSound( le, &trace );
-
-	CG_JustSplat( le, &trace );
-
-	trap_R_AddRefEntityToScene( &le->refEntity );
-}
-
 /*
 =====================================================================
 
@@ -622,13 +416,11 @@ static void CG_AddScaleFade( localEntity
 	// so it doesn't add too much overdraw
 	VectorSubtract( re->origin, cg.refdef.vieworg, delta );
 	len = VectorLength( delta );
-	// LEILEI
-	if (!cg_leiEnhancement.integer) {
 	if ( len < le->radius ) {
 		CG_FreeLocalEntity( le );
 		return;
 	}
-		}
+
 	trap_R_AddRefEntityToScene( re );
 }
 
@@ -664,14 +456,11 @@ static void CG_AddFallScaleFade( localEn
 	// so it doesn't add too much overdraw
 	VectorSubtract( re->origin, cg.refdef.vieworg, delta );
 	len = VectorLength( delta );
-	
-	// LEILEI
-if (!cg_leiEnhancement.integer) {
 	if ( len < le->radius ) {
 		CG_FreeLocalEntity( le );
 		return;
 	}
-	}
+
 	trap_R_AddRefEntityToScene( re );
 }
 
@@ -1088,10 +877,6 @@ void CG_AddLocalEntities( void ) {
 			CG_AddRefEntity( le );
 			break;
 //#endif
-
-		case LE_GORE:			// blood
-			CG_AddGore( le );
-			break;
 		}
 	}
 }
diff -rupN code-svn//cgame/cg_local.h code//cgame/cg_local.h
--- code-svn//cgame/cg_local.h	2010-02-01 18:12:08.000000000 +0100
+++ code//cgame/cg_local.h	2009-11-15 02:17:24.000000000 +0100
@@ -76,6 +76,8 @@ Foundation, Inc., 51 Franklin St, Fifth
 #define	TEAMCHAT_WIDTH		80
 #define TEAMCHAT_HEIGHT		8
 
+#define DEATHNOTICE_HEIGHT	5
+
 // very large characters.pk
 #define	GIANT_WIDTH			32
 #define	GIANT_HEIGHT		48
@@ -231,8 +233,7 @@ typedef enum {
 	LE_KAMIKAZE,
 	LE_INVULIMPACT,
 	LE_INVULJUICED,
-	LE_SHOWREFENTITY,
-	LE_GORE
+	LE_SHOWREFENTITY
 } leType_t;
 
 typedef enum {
@@ -251,8 +252,7 @@ typedef enum {
 typedef enum {
 	LEBS_NONE,
 	LEBS_BLOOD,
-	LEBS_BRASS,
-	LEBS_SHELL
+	LEBS_BRASS
 } leBounceSoundType_t;	// fragment local entities can make sounds on impacts
 
 typedef struct localEntity_s {
@@ -715,6 +715,16 @@ typedef struct {
 
 	qhandle_t	armorModel;
 	qhandle_t	armorIcon;
+	
+	qhandle_t 	direct_hit;
+	qhandle_t 	skull;
+
+	qhandle_t	armorYellow;
+	qhandle_t	armorBlue;
+	qhandle_t	armorRed;
+	qhandle_t	healthYellow;
+	qhandle_t	healthBlue;
+	qhandle_t	healthRed;
 
 	qhandle_t	teamStatusBar;
 
@@ -754,6 +764,9 @@ typedef struct {
 	qhandle_t	lagometerShader;
 	qhandle_t	backTileShader;
 	qhandle_t	noammoShader;
+        qhandle_t	selectionShaderLeft;
+	qhandle_t	selectionShaderMid;
+	qhandle_t	selectionShaderRight;
 
 	qhandle_t	smokePuffShader;
 	qhandle_t	smokePuffRageProShader;
@@ -761,24 +774,6 @@ typedef struct {
 	qhandle_t	plasmaBallShader;
 	qhandle_t	waterBubbleShader;
 	qhandle_t	bloodTrailShader;
-
-
-
-	// LEILEI shaders
-
-	qhandle_t	lsmkShader1;
-	qhandle_t	lsmkShader2;
-	qhandle_t	lsmkShader3;
-	qhandle_t	lsmkShader4;
-	qhandle_t	lbumShader1;
-	qhandle_t	lfblShader1;
-	qhandle_t	lsplShader;
-	qhandle_t	lspkShader1;
-	qhandle_t	lspkShader2;
-	qhandle_t	lbldShader1;
-	qhandle_t	lbldShader2;
-
-
 //#ifdef MISSIONPACK
 	qhandle_t	nailPuffShader;
 	qhandle_t	blueProxMine;
@@ -912,21 +907,6 @@ typedef struct {
 	sfxHandle_t fallSound;
 	sfxHandle_t jumpPadSound;
 
-// LEILEI
-	sfxHandle_t	lspl1Sound;
-	sfxHandle_t	lspl2Sound; // Blood Splat Noises
-	sfxHandle_t	lspl3Sound;
-
-	sfxHandle_t	lbul1Sound;
-	sfxHandle_t	lbul2Sound;	// Bullet Drop Noises
-	sfxHandle_t	lbul3Sound;
-
-	sfxHandle_t	lshl1Sound;
-	sfxHandle_t	lshl2Sound; // Shell Drop Noises
-	sfxHandle_t	lshl3Sound;
-
-// LEILEI END
-
 	sfxHandle_t oneMinuteSound;
 	sfxHandle_t fiveMinuteSound;
 	sfxHandle_t suddenDeathSound;
@@ -1055,7 +1035,7 @@ typedef struct {
 	// parsed from serverinfo
 	gametype_t		gametype;
 	int				dmflags;
-        int                             videoflags;
+        int                             fairflags;
         int				elimflags;
 	int				teamflags;
 	int				fraglimit;
@@ -1129,6 +1109,20 @@ typedef struct {
 	int				teamChatPos;
 	int				teamLastChatPos;
 
+	char chatMsgs[TEAMCHAT_HEIGHT][TEAMCHAT_WIDTH * 3 + 1];
+	int chatMsgTimes[TEAMCHAT_HEIGHT];
+	int chatPos;
+	int lastChatPos;
+
+	int deathNoticeTime[ DEATHNOTICE_HEIGHT ];
+	char deathNoticeName1[ DEATHNOTICE_HEIGHT ][ MAX_NAME_LENGTH ];
+	char deathNoticeName2[ DEATHNOTICE_HEIGHT ][ MAX_NAME_LENGTH ];
+	int deathNoticeTeam1[ DEATHNOTICE_HEIGHT ];
+	int deathNoticeTeam2[ DEATHNOTICE_HEIGHT ];
+	qhandle_t deathNoticeIcon1[ DEATHNOTICE_HEIGHT ];
+	qhandle_t deathNoticeIcon2[ DEATHNOTICE_HEIGHT ];
+	qboolean deathNoticeTwoIcons[ DEATHNOTICE_HEIGHT ];
+
 	int cursorX;
 	int cursorY;
 	qboolean eventHandling;
@@ -1228,6 +1222,8 @@ extern	vmCvar_t		cg_drawSpeed;
 extern	vmCvar_t		cg_synchronousClients;
 extern	vmCvar_t		cg_teamChatTime;
 extern	vmCvar_t		cg_teamChatHeight;
+extern  vmCvar_t 		cg_chatTime;
+extern  vmCvar_t 		cg_chatHeight;
 extern	vmCvar_t		cg_stats;
 extern	vmCvar_t 		cg_forceModel;
 extern	vmCvar_t 		cg_buildScript;
@@ -1260,11 +1256,6 @@ extern	vmCvar_t		cg_noTaunt;
 extern	vmCvar_t		cg_noProjectileTrail;
 extern	vmCvar_t		cg_oldRail;
 extern	vmCvar_t		cg_oldRocket;
-
-extern	vmCvar_t		cg_leiEnhancement;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiGoreNoise;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiBrassNoise;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiSuperGoreyAwesome;	// LEILEI'S LINE!
 extern	vmCvar_t		cg_oldPlasma;
 extern	vmCvar_t		cg_trueLightning;
 extern	vmCvar_t		cg_music;
@@ -1345,6 +1336,8 @@ extern	vmCvar_t                cg_crossh
 
 extern vmCvar_t			cg_weaponBarStyle;
 
+extern vmCvar_t 		cg_deathNoticeTime;
+
 //unlagged - cg_unlagged.c
 void CG_PredictWeaponEffects( centity_t *cent );
 //void CG_AddBoundingBox( centity_t *cent );
@@ -1535,14 +1528,10 @@ void CG_AddViewWeapon (playerState_t *ps
 void CG_AddPlayerWeapon( refEntity_t *parent, playerState_t *ps, centity_t *cent, int team );
 void CG_DrawWeaponSelect( void );
 
-void CG_DrawWeaponBar0(int count, int bits);
-void CG_DrawWeaponBar1(int count, int bits);
+void CG_DrawWeaponBar0(int count, int bits, float *color);
+void CG_DrawWeaponBar1(int count, int bits, float *color);
 void CG_DrawWeaponBar2(int count, int bits, float *color);
-void CG_DrawWeaponBar3(int count, int bits, float *color);
-void CG_DrawWeaponBar4(int count, int bits, float *color);
-void CG_DrawWeaponBar5(int count, int bits, float *color);
-void CG_DrawWeaponBar6(int count, int bits, float *color);
-void CG_DrawWeaponBar7(int count, int bits, float *color);
+
 
 void CG_OutOfAmmoChange( void );	// should this be in pmove?
 
@@ -1858,5 +1847,3 @@ extern qboolean		initparticles;
 int CG_NewParticleArea ( int num );
 
 
-// LEILEI ENHANCEMENT
-
diff -rupN code-svn//cgame/cg_main.c code//cgame/cg_main.c
--- code-svn//cgame/cg_main.c	2010-05-06 16:11:51.000000000 +0200
+++ code//cgame/cg_main.c	2009-11-15 02:19:49.000000000 +0100
@@ -149,6 +149,8 @@ vmCvar_t	cg_drawSpeed;
 vmCvar_t	cg_synchronousClients;
 vmCvar_t 	cg_teamChatTime;
 vmCvar_t 	cg_teamChatHeight;
+vmCvar_t 	cg_chatTime;
+vmCvar_t 	cg_chatHeight;
 vmCvar_t 	cg_stats;
 vmCvar_t 	cg_buildScript;
 vmCvar_t 	cg_forceModel;
@@ -185,10 +187,6 @@ vmCvar_t	cg_noTaunt;
 vmCvar_t	cg_noProjectileTrail;
 vmCvar_t	cg_oldRail;
 vmCvar_t	cg_oldRocket;
-vmCvar_t	cg_leiEnhancement;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiBrassNoise;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiGoreNoise;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiSuperGoreyAwesome;		// ANOTHER LEILEI LINE!!!
 vmCvar_t	cg_oldPlasma;
 vmCvar_t	cg_trueLightning;
 vmCvar_t        cg_music;
@@ -269,6 +267,8 @@ vmCvar_t	cg_crosshairColorBlue;
 
 vmCvar_t	cg_weaponBarStyle;
 
+vmCvar_t cg_deathNoticeTime;
+
 typedef struct {
 	vmCvar_t	*vmCvar;
 	char		*cvarName;
@@ -333,7 +333,10 @@ static cvarTable_t cvarTable[] = { // bk
 	{ &cg_thirdPersonAngle, "cg_thirdPersonAngle", "0", CVAR_CHEAT },
 	{ &cg_thirdPerson, "cg_thirdPerson", "0", 0 },
 	{ &cg_teamChatTime, "cg_teamChatTime", "3000", CVAR_ARCHIVE  },
-	{ &cg_teamChatHeight, "cg_teamChatHeight", "0", CVAR_ARCHIVE  },
+	{ &cg_teamChatHeight, "cg_teamChatHeight", "5", CVAR_ARCHIVE  },
+	{ &cg_teamChatHeight, "cg_teamChatHeight", "5", CVAR_ARCHIVE},
+	{ &cg_chatTime, "cg_chatTime", "3000", CVAR_ARCHIVE},
+	{ &cg_chatHeight, "cg_chatHeight", "5", CVAR_ARCHIVE},
 	{ &cg_forceModel, "cg_forceModel", "0", CVAR_ARCHIVE  },
 	{ &cg_predictItems, "cg_predictItems", "1", CVAR_ARCHIVE },
 #ifdef MISSIONPACK
@@ -390,18 +393,14 @@ static cvarTable_t cvarTable[] = { // bk
 	{ &cg_cameraMode, "com_cameraMode", "0", CVAR_CHEAT},
 
 	{ &pmove_fixed, "pmove_fixed", "0", CVAR_SYSTEMINFO},
-	{ &pmove_msec, "pmove_msec", "11", CVAR_SYSTEMINFO},
-        { &pmove_float, "pmove_float", "1", CVAR_SYSTEMINFO},
+	{ &pmove_msec, "pmove_msec", "8", CVAR_SYSTEMINFO},
+        { &pmove_float, "pmove_float", "0", CVAR_SYSTEMINFO},
 	{ &cg_noTaunt, "cg_noTaunt", "0", CVAR_ARCHIVE},
 	{ &cg_noProjectileTrail, "cg_noProjectileTrail", "0", CVAR_ARCHIVE},
 	{ &cg_smallFont, "ui_smallFont", "0.25", CVAR_ARCHIVE},
 	{ &cg_bigFont, "ui_bigFont", "0.4", CVAR_ARCHIVE},
 	{ &cg_oldRail, "cg_oldRail", "0", CVAR_ARCHIVE},
 	{ &cg_oldRocket, "cg_oldRocket", "1", CVAR_ARCHIVE},
-	{ &cg_leiEnhancement, "cg_leiEnhancement", "0", CVAR_ARCHIVE},				// LEILEI default off (in case of whiner)
-	{ &cg_leiGoreNoise, "cg_leiGoreNoise", "0", CVAR_ARCHIVE},					// LEILEI 
-	{ &cg_leiBrassNoise, "cg_leiBrassNoise", "0", CVAR_ARCHIVE},				// LEILEI 
-	{ &cg_leiSuperGoreyAwesome, "cg_leiSuperGoreyAwesome", "0", CVAR_ARCHIVE},	// LEILEI 
 	{ &cg_oldPlasma, "cg_oldPlasma", "1", CVAR_ARCHIVE},
 //unlagged - client options
 	{ &cg_delag, "cg_delag", "0", CVAR_ARCHIVE | CVAR_USERINFO },
@@ -457,6 +456,8 @@ static cvarTable_t cvarTable[] = { // bk
         { &cg_crosshairColorBlue, "cg_crosshairColorBlue", "1.0", CVAR_ARCHIVE},
 
 	{ &cg_weaponBarStyle, "cg_weaponBarStyle", "0", CVAR_ARCHIVE},
+
+	{&cg_deathNoticeTime, "cg_deathNoticeTime", "3000", CVAR_ARCHIVE},
 };
 
 static int  cvarTableSize = sizeof( cvarTable ) / sizeof( cvarTable[0] );
@@ -784,21 +785,6 @@ static void CG_RegisterSounds( void ) {
 	cgs.media.gibBounce2Sound = trap_S_RegisterSound( "sound/player/gibimp2.wav", qfalse );
 	cgs.media.gibBounce3Sound = trap_S_RegisterSound( "sound/player/gibimp3.wav", qfalse );
 
-
-	// LEILEI
-
-	cgs.media.lspl1Sound = trap_S_RegisterSound( "sound/le/splat1.wav", qfalse );
-	cgs.media.lspl2Sound = trap_S_RegisterSound( "sound/le/splat2.wav", qfalse );
-	cgs.media.lspl3Sound = trap_S_RegisterSound( "sound/le/splat3.wav", qfalse );
-
-	cgs.media.lbul1Sound = trap_S_RegisterSound( "sound/le/bullet1.wav", qfalse );
-	cgs.media.lbul2Sound = trap_S_RegisterSound( "sound/le/bullet2.wav", qfalse );
-	cgs.media.lbul3Sound = trap_S_RegisterSound( "sound/le/bullet3.wav", qfalse );
-
-	cgs.media.lshl1Sound = trap_S_RegisterSound( "sound/le/shell1.wav", qfalse );
-	cgs.media.lshl2Sound = trap_S_RegisterSound( "sound/le/shell2.wav", qfalse );
-	cgs.media.lshl3Sound = trap_S_RegisterSound( "sound/le/shell3.wav", qfalse );
-
 	cgs.media.useInvulnerabilitySound = trap_S_RegisterSound( "sound/items/invul_activate.wav", qfalse );
 	cgs.media.invulnerabilityImpactSound1 = trap_S_RegisterSound( "sound/items/invul_impact_01.wav", qfalse );
 	cgs.media.invulnerabilityImpactSound2 = trap_S_RegisterSound( "sound/items/invul_impact_02.wav", qfalse );
@@ -1054,6 +1040,9 @@ static void CG_RegisterGraphics( void )
 
 	cgs.media.backTileShader = trap_R_RegisterShader( "gfx/2d/backtile" );
 	cgs.media.noammoShader = trap_R_RegisterShader( "icons/noammo" );
+        cgs.media.selectionShaderLeft = trap_R_RegisterShader( "icons/selectionMarkerLeft.tga" );
+	cgs.media.selectionShaderMid = trap_R_RegisterShader( "icons/selectionMarkerMid.tga" );
+	cgs.media.selectionShaderRight = trap_R_RegisterShader( "icons/selectionMarkerRight.tga" );
 
 	// powerup shaders
 	cgs.media.quadShader = trap_R_RegisterShader("powerups/quad" );
@@ -1143,6 +1132,15 @@ static void CG_RegisterGraphics( void )
 	cgs.media.armorModel = trap_R_RegisterModel( "models/powerups/armor/armor_yel.md3" );
 	cgs.media.armorIcon  = trap_R_RegisterShaderNoMip( "icons/iconr_yellow" );
 
+	cgs.media.direct_hit = trap_R_RegisterShaderNoMip("icons/direct_hit.tga");
+	cgs.media.skull = trap_R_RegisterShaderNoMip("icons/skull.tga");
+
+	cgs.media.armorYellow  = trap_R_RegisterShaderNoMip( "icons/armorYellow.tga" );
+	cgs.media.armorBlue  = trap_R_RegisterShaderNoMip( "icons/armorBlue.tga" );
+	cgs.media.armorRed  = trap_R_RegisterShaderNoMip( "icons/armorRed.tga" );
+	cgs.media.healthYellow = trap_R_RegisterShaderNoMip( "icons/iconh_yellow.tga" );
+	cgs.media.healthBlue = trap_R_RegisterShaderNoMip( "icons/iconh_blue.tga" );
+	cgs.media.healthRed = trap_R_RegisterShaderNoMip( "icons/iconh_red.tga" );
 	cgs.media.machinegunBrassModel = trap_R_RegisterModel( "models/weapons2/shells/m_shell.md3" );
 	cgs.media.shotgunBrassModel = trap_R_RegisterModel( "models/weapons2/shells/s_shell.md3" );
 
@@ -1194,21 +1192,6 @@ static void CG_RegisterGraphics( void )
 	cgs.media.medalAssist = trap_R_RegisterShaderNoMip( "medal_assist" );
 	cgs.media.medalCapture = trap_R_RegisterShaderNoMip( "medal_capture" );
 
-	// LEILEI SHADERS
-	cgs.media.lsmkShader1 = trap_R_RegisterShader("leismoke1" );
-	cgs.media.lsmkShader2 = trap_R_RegisterShader("leismoke2" );
-	cgs.media.lsmkShader3 = trap_R_RegisterShader("leismoke3" );
-	cgs.media.lsmkShader4 = trap_R_RegisterShader("leismoke4" );
-
-	cgs.media.lsplShader = trap_R_RegisterShader("leisplash" );
-	cgs.media.lspkShader1 = trap_R_RegisterShader("leispark" );
-	cgs.media.lspkShader2 = trap_R_RegisterShader("leispark2" );
-	cgs.media.lbumShader1 = trap_R_RegisterShader("leiboom1" );
-	cgs.media.lfblShader1 = trap_R_RegisterShader("leifball" );
-
-	cgs.media.lbldShader1 = trap_R_RegisterShader("leiblood1" );	
-	cgs.media.lbldShader2 = trap_R_RegisterShader("leiblood2" );	// this is a mark, by the way
-
 
 	memset( cg_items, 0, sizeof( cg_items ) );
 	memset( cg_weapons, 0, sizeof( cg_weapons ) );
@@ -2049,40 +2032,6 @@ void CG_AssetCache( void ) {
 	cgDC.Assets.sliderThumb = trap_R_RegisterShaderNoMip( ASSET_SLIDER_THUMB );
 }
 #endif
-
-void superhud_read(void) {
-    	/*fileHandle_t file;
-    	int fileLen;
-    	int i;
-
-	//If already initialized then do nothing
-    	if(challengesInitialized)
-        	return;
-
-	//Else open file
-    	fileLen = trap_FS_FOpenFile(FILENAME, &file, FS_READ);
-
-	//If the file not is big enough to contain all challenges then initialize from zero
-    	if(fileLen<sizeof(challengeTable))
-    	{
-		trap_FS_FCloseFile(file); //Lets remeber to close the file before all returns
-		for(i=0;i<CHALLENGES_MAX;i++)
-			challengeTable[i]=0; //Init all challenges to zero
-		challengesInitialized = qtrue; //Still consider the system loaded!
-        	return; //Not enough data to actually read
-    	}
-
-	//If the file is big enough:
-	trap_FS_Read(challengeTable,sizeof(challengeTable),file);
-
-	trap_FS_FCloseFile(file); //Lets remember to close the file
-    	challengesInitialized = qtrue; //We are initialized!
-    	return; */
-	CG_Printf( "Superhud test" );
-	cg.weaponSelect = WP_GAUNTLET;
-	
-}
-
 /*
 =================
 CG_Init
@@ -2198,8 +2147,6 @@ void CG_Init( int serverMessageNum, int
 	addChallenge(GENERAL_TEST);
 
 	trap_S_ClearLoopingSounds( qtrue );
-
-	superhud_read();
 }
 
 /*
@@ -2278,7 +2225,7 @@ void CG_FairCvars() {
         return; //Don't do anything in single player
     }
 
-    if(cgs.videoflags & VF_LOCK_CVARS_BASIC) {
+    if(cgs.fairflags & FF_LOCK_CVARS_BASIC) {
         //Lock basic cvars.
         trap_Cvar_VariableStringBuffer("r_subdivisions",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) > 80 ) {
@@ -2292,7 +2239,7 @@ void CG_FairCvars() {
         }
     }
 
-    if(cgs.videoflags & VF_LOCK_CVARS_EXTENDED) {
+    if(cgs.fairflags & FF_LOCK_CVARS_EXTENDED) {
         //Lock extended cvars.
         trap_Cvar_VariableStringBuffer("r_subdivisions",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) > 20 ) {
@@ -2337,7 +2284,7 @@ void CG_FairCvars() {
         }
     } 
 
-    if(cgs.videoflags & VF_LOCK_VERTEX) {
+    if(cgs.fairflags & FF_LOCK_VERTEX) {
         trap_Cvar_VariableStringBuffer("r_vertexlight",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) != 0 ) {
             trap_Cvar_Set("r_vertexlight","0");
diff -rupN code-svn//cgame/cg_marks.c code//cgame/cg_marks.c
--- code-svn//cgame/cg_marks.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_marks.c	2009-11-14 15:55:49.000000000 +0100
@@ -2272,168 +2272,3 @@ void CG_ParticleMisc (qhandle_t pshader,
 	p->rotate = qfalse;
 }
 
-
-
-
-
-// LEILEI ENHANCEMENT PARTICLE EFFECTS
-
-
-// sparks!
-// for small arms
-
-void CG_LeiSparks (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.8f;
-	p->alphavel = 0.8f;
-
-	p->height = 4;
-	p->width = 4;
-	p->endheight = 4;
-	p->endwidth = 4;
-
-	p->pshader = cgs.media.lspkShader1;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 35;
-	p->vel[1] = vel[1] * 35;
-	p->vel[2] = vel[2] * 85;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 44);
-	p->vel[1] += (crandom() * 44);
-	p->vel[2] += (75 + (crandom() * 190)) * speed;	
-
-	//	p->vel[0] += (crandom() * 24);
-	//p->vel[1] += (crandom() * 24);
-	//p->vel[2] += (20 + (crandom() * 180)) * speed;	
-
-		p->accel[0] = crandom()*6;
-		p->accel[1] = crandom()*6;
-		p->accel[2] = -PARTICLE_GRAVITY*7.2;
-	
-}
-
-// for explosions
-
-void CG_LeiSparks2 (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.8f;
-	p->alphavel = 0;
-
-	p->height = 9;
-	p->width = 9;
-	p->endheight = 16;
-	p->endwidth = 16;
-
-	p->pshader = cgs.media.lspkShader1;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 35;
-	p->vel[1] = vel[1] * 35;
-	p->vel[2] = vel[2] * 85;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 524);
-	p->vel[1] += (crandom() * 524);
-	p->vel[2] += (120 + (crandom() * 780)) * speed;	
-
-		p->accel[0] = crandom()*76;
-		p->accel[1] = crandom()*76;
-		p->accel[2] = crandom()*76;
-	
-	
-}
-
-// not so friendly water splash
-void CG_LeiSplash2 (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.9f;
-	p->alphavel = 0;
-
-	p->height = 4;
-	p->width = 4;
-	p->endheight = 2;
-	p->endwidth = 2;
-
-	p->pshader = cgs.media.lsplShader;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 44;
-	p->vel[1] = vel[1] * 44;
-	p->vel[2] = vel[2] * 872;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 4);
-	p->vel[1] += (crandom() * 4);
-	p->vel[2] += (20 + (crandom() * 10)) * speed;	
-
-		p->accel[0] = crandom()*3;
-		p->accel[1] = crandom()*3;
-		p->accel[2] = -PARTICLE_GRAVITY*4.2;
-	
-}
-
diff -rupN code-svn//cgame/cg_particles.c code//cgame/cg_particles.c
--- code-svn//cgame/cg_particles.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_particles.c	2009-11-14 15:55:49.000000000 +0100
@@ -2016,4 +2016,3 @@ void CG_ParticleMisc (qhandle_t pshader,
 
 	p->rotate = qfalse;
 }
-
diff -rupN code-svn//cgame/cg_predict.c code//cgame/cg_predict.c
--- code-svn//cgame/cg_predict.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_predict.c	2009-11-14 15:55:49.000000000 +0100
@@ -327,14 +327,12 @@ static void CG_TouchItem( centity_t *cen
 		if(cgs.redflag == TEAM_NONE)
 			return; //Can never pick if just one flag is NONE (because then the other is too)
 		if(item->giTag == PW_REDFLAG){ //at point A
-			if(cgs.redflag != cg.predictedPlayerState.persistant[PERS_TEAM]) //not already taken
-                            trap_S_StartLocalSound( cgs.media.hitSound , CHAN_ANNOUNCER );
-			return;
+			//if(cgs.redflag == cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
+				return;
 		}	
 		if(item->giTag == PW_BLUEFLAG){ //at point B
-			if(cgs.blueflag != cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
-                            trap_S_StartLocalSound( cgs.media.hitSound , CHAN_ANNOUNCER );
-			return;
+			//if(cgs.blueflag == cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
+				return;
 		}	
 	}
 
diff -rupN code-svn//cgame/cg_servercmds.c code//cgame/cg_servercmds.c
--- code-svn//cgame/cg_servercmds.c	2010-02-01 18:12:08.000000000 +0100
+++ code//cgame/cg_servercmds.c	2009-11-15 02:22:03.000000000 +0100
@@ -327,7 +327,7 @@ void CG_ParseServerinfo( void ) {
 		cgs.ffa_gt = 1;
 	trap_Cvar_Set("g_gametype", va("%i", cgs.gametype));
 	cgs.dmflags = atoi( Info_ValueForKey( info, "dmflags" ) );
-        cgs.videoflags = atoi( Info_ValueForKey( info, "videoflags" ) );
+        cgs.fairflags = atoi( Info_ValueForKey( info, "fairflags" ) );
         cgs.elimflags = atoi( Info_ValueForKey( info, "elimflags" ) );
 	cgs.teamflags = atoi( Info_ValueForKey( info, "teamflags" ) );
 	cgs.fraglimit = atoi( Info_ValueForKey( info, "fraglimit" ) );
@@ -616,6 +616,89 @@ static void CG_AddToTeamChat( const char
 }
 
 /*
+=======================
+CG_AddToChat
+
+=======================
+*/
+static void CG_AddToChat(const char *str)
+{
+  int len;
+  char *p, *ls;
+  int lastcolor;
+  int chatHeight;
+
+  if (cg_chatHeight.integer < TEAMCHAT_HEIGHT)
+  {
+    chatHeight = cg_chatHeight.integer;
+  }
+  else
+  {
+    chatHeight = TEAMCHAT_HEIGHT;
+  }
+
+  if (chatHeight <= 0 || cg_chatTime.integer <= 0)
+  {
+    // team chat disabled, dump into normal chat
+    cgs.chatPos = cgs.lastChatPos = 0;
+    return;
+  }
+
+  len = 0;
+
+  p = cgs.chatMsgs[cgs.chatPos % chatHeight];
+  *p = 0;
+
+  lastcolor = '7';
+
+  ls = NULL;
+  while (*str)
+  {
+    if (len > TEAMCHAT_WIDTH - 1)
+    {
+      if (ls)
+      {
+        str -= (p - ls);
+        str++;
+        p -= (p - ls);
+      }
+      *p = 0;
+
+      cgs.chatMsgTimes[cgs.chatPos % chatHeight] = cg.time;
+
+      cgs.chatPos++;
+      p = cgs.chatMsgs[cgs.chatPos % chatHeight];
+      *p = 0;
+      *p++ = Q_COLOR_ESCAPE;
+      *p++ = lastcolor;
+      len = 0;
+      ls = NULL;
+    }
+
+    if (Q_IsColorString(str))
+    {
+      *p++ = *str++;
+      lastcolor = *str;
+      *p++ = *str++;
+      continue;
+    }
+    if (*str == ' ')
+    {
+      ls = p;
+    }
+    *p++ = *str++;
+    len++;
+  }
+  *p = 0;
+
+  cgs.chatMsgTimes[cgs.chatPos % chatHeight] = cg.time;
+  cgs.chatPos++;
+
+  if (cgs.chatPos - cgs.lastChatPos > chatHeight)
+    cgs.lastChatPos = cgs.chatPos - chatHeight;
+}
+
+/*
 ===============
 CG_MapRestart
 
@@ -1208,6 +1291,7 @@ static void CG_ServerCommand( void ) {
 			trap_S_StartLocalSound( cgs.media.talkSound, CHAN_LOCAL_SOUND );
 			Q_strncpyz( text, CG_Argv(1), MAX_SAY_TEXT );
 			CG_RemoveChatEscapeChar( text );
+			CG_AddToChat(text);
 			CG_Printf( "%s\n", text );
 		}
 		return;
diff -rupN code-svn//cgame/cg_view.c code//cgame/cg_view.c
--- code-svn//cgame/cg_view.c	2010-02-01 18:12:08.000000000 +0100
+++ code//cgame/cg_view.c	2009-11-14 15:55:49.000000000 +0100
@@ -495,7 +495,7 @@ static int CG_CalcFov( void ) {
 			} else if ( fov_x > 160 ) {
 				fov_x = 160;
 			}
-                        if( (cgs.videoflags & VF_LOCK_CVARS_BASIC) && fov_x>140 )
+                        if( (cgs.fairflags & FF_LOCK_CVARS_BASIC) && fov_x>140 )
                             fov_x = 140;
 
 		}
@@ -512,7 +512,7 @@ static int CG_CalcFov( void ) {
                                 zoomFov = 160;
                         }
 
-                        if( (cgs.videoflags & VF_LOCK_CVARS_BASIC) && zoomFov>140 )
+                        if( (cgs.fairflags & FF_LOCK_CVARS_BASIC) && zoomFov>140 )
                                 zoomFov = 140;
                 }
 
diff -rupN code-svn//cgame/cg_weapons.c code//cgame/cg_weapons.c
--- code-svn//cgame/cg_weapons.c	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/cg_weapons.c	2009-11-14 22:21:42.000000000 +0100
@@ -95,8 +95,6 @@ static void CG_MachineGunEjectBrass( cen
 	le->leMarkType = LEMT_NONE;
 }
 
-
-
 /*
 ==========================
 CG_ShotgunEjectBrass
@@ -169,7 +167,7 @@ static void CG_ShotgunEjectBrass( centit
 		le->angles.trDelta[2] = 0;
 
 		le->leFlags = LEF_TUMBLE;
-		le->leBounceSoundType = LEBS_SHELL; // LEILEI shell noises
+		le->leBounceSoundType = LEBS_BRASS;
 		le->leMarkType = LEMT_NONE;
 	}
 }
@@ -327,10 +325,10 @@ void CG_RailTrail (clientInfo_t *ci, vec
 
 /*
 ==========================
-CG_OldRocketTrail	(for the crappy old rocket trail.)
+CG_RocketTrail
 ==========================
 */
-static void CG_OldRocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
+static void CG_RocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
 	int		step;
 	vec3_t	origin, lastPos;
 	int		t;
@@ -392,132 +390,6 @@ static void CG_OldRocketTrail( centity_t
 
 }
 
-/*
-==========================
-CG_LeiSmokeTrail 
-==========================
-*/
-
-static void CG_LeiSmokeTrail( centity_t *ent, const weaponInfo_t *wi ) {
-	int		step;
-	vec3_t	origin, lastPos;
-	int		t;
-	int		startTime, contents;
-	int		lastContents;
-	entityState_t	*es;
-	vec3_t	up;
-	localEntity_t	*smoke;
-	int		therando;
-	int		theradio;
-
-	if ( cg_noProjectileTrail.integer ) {
-		return;
-	}
-
-	up[0] = 5 - 10 * crandom();
-	up[1] = 5 - 10 * crandom();
-	up[2] = 8 - 5 * crandom();
-
-	step = 18;
-
-	es = &ent->currentState;
-	startTime = ent->trailTime;
-	t = step * ( (startTime + step) / step );
-
-	BG_EvaluateTrajectory( &es->pos, cg.time, origin );
-	contents = CG_PointContents( origin, -1 );
-
-	// if object (e.g. grenade) is stationary, don't toss up smoke
-	if ( es->pos.trType == TR_STATIONARY ) {
-		ent->trailTime = cg.time;
-		return;
-	}
-
-	BG_EvaluateTrajectory( &es->pos, ent->trailTime, lastPos );
-	lastContents = CG_PointContents( lastPos, -1 );
-
-	ent->trailTime = cg.time;
-
-	if ( contents & ( CONTENTS_WATER | CONTENTS_SLIME | CONTENTS_LAVA ) ) {
-		if ( contents & lastContents & CONTENTS_WATER ) {
-			CG_BubbleTrail( lastPos, origin, 8 );
-		}
-		return;
-	}
-
-	for ( ; t <= ent->trailTime ; t += step ) {
-		BG_EvaluateTrajectory( &es->pos, t, lastPos );
-		therando = crandom() * 4;
-		
-		theradio =  wi->trailRadius * (rand() * 0.7); // what is this doing here
-	if (therando == 3)		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader1 );
-	else if (therando == 1)		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader2 );
-	else	if (therando == 2)	smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader3 );
-	else				smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader4 );
-		// use the optimized local entity add
-		smoke->leType = LE_MOVE_SCALE_FADE;
-		//smoke->trType = TR_GRAVITY;
-	}
-
-}
-
-
-static void CG_LeiPlasmaTrail( centity_t *ent, const weaponInfo_t *wi ) {
-	int		step;
-	vec3_t	origin, lastPos;
-	int		t;
-	int		startTime, contents;
-	int		lastContents;
-	entityState_t	*es;
-	vec3_t	up;
-	localEntity_t	*smoke;
-	int		therando;
-	int		theradio;
-
-	if ( cg_noProjectileTrail.integer ) {
-		return;
-	}
-
-	up[0] = 0;
-	up[1] = 0;
-	up[2] = 0;
-
-	step = 16;
-
-	es = &ent->currentState;
-	startTime = ent->trailTime;
-	t = step * ( (startTime + step) / step );
-
-	BG_EvaluateTrajectory( &es->pos, cg.time, origin );
-	contents = CG_PointContents( origin, -1 );
-
-	// if object (e.g. grenade) is stationary, don't toss up smoke
-	if ( es->pos.trType == TR_STATIONARY ) {
-		ent->trailTime = cg.time;
-		return;
-	}
-
-	BG_EvaluateTrajectory( &es->pos, ent->trailTime, lastPos );
-	lastContents = CG_PointContents( lastPos, -1 );
-
-	ent->trailTime = cg.time;
-
-	if ( contents & ( CONTENTS_WATER | CONTENTS_SLIME | CONTENTS_LAVA ) ) {
-		return;
-	}
-
-	for ( ; t <= ent->trailTime ; t += step ) {
-		BG_EvaluateTrajectory( &es->pos, t, lastPos );
-
-		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader1 );
-		// use the optimized local entity add
-		smoke->leType = LE_SCALE_FADE;
-		//smoke->trType = TR_GRAVITY;
-	}
-
-}
-
-
 //#ifdef MISSIONPACK
 /*
 ==========================
@@ -592,7 +464,7 @@ static void CG_NailTrail( centity_t *ent
 CG_NailTrail
 ==========================
 */
-static void CG_OldPlasmaTrail( centity_t *cent, const weaponInfo_t *wi ) {
+static void CG_PlasmaTrail( centity_t *cent, const weaponInfo_t *wi ) {
 	localEntity_t	*le;
 	refEntity_t		*re;
 	entityState_t	*es;
@@ -662,7 +534,6 @@ static void CG_OldPlasmaTrail( centity_t
 	re->customShader = cgs.media.railRingsShader;
 	le->bounceFactor = 0.3f;
 
-
     re->shaderRGBA[0] = wi->flashDlightColor[0] * 63;
     re->shaderRGBA[1] = wi->flashDlightColor[1] * 63;
     re->shaderRGBA[2] = wi->flashDlightColor[2] * 63;
@@ -726,38 +597,10 @@ void CG_GrappleTrail( centity_t *ent, co
 CG_GrenadeTrail
 ==========================
 */
-// LEILEI enhancment
-static void CG_RocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
-
-		if (cg_leiEnhancement.integer) {
-			CG_LeiSmokeTrail( ent, wi );
-		}
-		else
-		{	
-			CG_OldRocketTrail( ent, wi );
-		}
-}
-
-static void CG_PlasmaTrail( centity_t *ent, const weaponInfo_t *wi ) {
-
-		if (cg_leiEnhancement.integer) {
-			CG_LeiPlasmaTrail( ent, wi );
-		}
-		else
-		{	
-			CG_OldPlasmaTrail( ent, wi );
-		}
-}
-
-
 static void CG_GrenadeTrail( centity_t *ent, const weaponInfo_t *wi ) {
 	CG_RocketTrail( ent, wi );
 }
 
-	
-
-
-
 
 /*
 =================
@@ -1707,28 +1550,16 @@ void CG_DrawWeaponSelect( void ) {
 	
 	switch(cg_weaponBarStyle.integer){
 		case 0:
-			CG_DrawWeaponBar0(count,bits);
+			CG_DrawWeaponBar0(count,bits, color);
 			break;
 		case 1:
-			CG_DrawWeaponBar1(count,bits);
+			CG_DrawWeaponBar1(count,bits, color);
 			break;
 		case 2:
 			CG_DrawWeaponBar2(count,bits, color);
 			break;
-		case 3:
-			CG_DrawWeaponBar3(count,bits, color);
-			break;
-		case 4:
-			CG_DrawWeaponBar4(count,bits, color);
-			break;
-		case 5:
-			CG_DrawWeaponBar5(count,bits, color);
-			break;
-		case 6:
-			CG_DrawWeaponBar6(count,bits, color);
-			break;
-		case 7:
-			CG_DrawWeaponBar7(count,bits, color);
+		default:
+			CG_DrawWeaponBar0(count,bits, color);
 			break;
 	}
 	trap_R_SetColor(NULL);
@@ -1741,174 +1572,13 @@ CG_DrawWeaponBar0
 ===============
 */
 
-void CG_DrawWeaponBar0(int count, int bits){
-
-	int y = 380;
-	int x = 320 - count * 20;
-	int i;
-	
-	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
-                //Sago: Do mad change of grapple placement:
-                if(i==10)
-                    continue;
-                if(i==0)
-                    i=10;
-		if ( !( bits & ( 1 << i ) ) ) {
-                    if(i==10)
-                        i=0;
-			continue;
-		}
-
-		CG_RegisterWeapon( i );
-		// draw weapon icon
-		CG_DrawPic( x, y, 32, 32, cg_weapons[i].weaponIcon );
-
-		// draw selection marker
-		if ( i == cg.weaponSelect ) {
-			CG_DrawPic( x-4, y-4, 40, 40, cgs.media.selectShader );
-		}
-
-		// no ammo cross on top
-		if ( !cg.snap->ps.ammo[ i ] ) {
-			  CG_DrawPic( x, y, 32, 32, cgs.media.noammoShader );
-		}
-
-		x += 40;
-                //Sago: Undo mad change of weapons
-                if(i==10)
-                        i=0;
-	}
-}
-
-/*
-===============
-CG_DrawWeaponBar1
-===============
-*/
-
-void CG_DrawWeaponBar1(int count, int bits){
-
-	int y = 380;
-	int x = 320 - count * 20;
-	int i;
-	int ammo;
-	int br;
-	int max;
-	float red[4];
-	float yellow[4];
-	float green[4];
-	
-	red[0] = 1.0f;
-	red[1] = 0;
-	red[2] = 0;
-	red[3] = 1.0f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 0.6f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	green[0] = 0;
-	green[1] = 1.0f;
-	green[2] = 0;
-	green[3] = 1.0f;
-	
-	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
-                //Sago: Do mad change of grapple placement:
-                if(i==10)
-                    continue;
-                if(i==0)
-                    i=10;
-		if ( !( bits & ( 1 << i ) ) ) {
-                    if(i==10)
-                        i=0;
-			continue;
-		}
-		
-		ammo=cg.snap->ps.ammo[i];
-			
-		switch(i) {
-			case WP_MACHINEGUN: max = 100; break;
-			case WP_SHOTGUN: max = 10; break;
-			case WP_GRENADE_LAUNCHER: max = 10; break;
-			case WP_ROCKET_LAUNCHER: max = 10; break;
-			case WP_LIGHTNING: max = 100; break;
-			case WP_RAILGUN: max = 10; break;
-			case WP_PLASMAGUN: max = 50; break;
-			case WP_BFG: max = 10; break;
-			case WP_NAILGUN: max = 10; break;
-			case WP_PROX_LAUNCHER: max = 5; break;
-			case WP_CHAINGUN: max = 100; break;
-			default: max = 1; break;
-		}
-			
-		ammo = (ammo*100)/max;
-		if(ammo >=100)
-			ammo=100;
-			
-		br=ammo*32/100;
-			
-		if(i!=1){
-			if(ammo <= 20)
-				CG_FillRect( x, y+38, br,4, red);
-			if(ammo > 20 && ammo <= 50)
-				CG_FillRect( x, y+38, br, 4, yellow);
-			if(ammo > 50)
-				CG_FillRect( x, y+38, br, 4, green);
-		}
-
-		CG_RegisterWeapon( i );
-		// draw weapon icon
-		CG_DrawPic( x, y, 32, 32, cg_weapons[i].weaponIcon );
-
-		// draw selection marker
-		if ( i == cg.weaponSelect ) {
-			CG_DrawPic( x-4, y-4, 40, 40, cgs.media.selectShader );
-		}
-
-		// no ammo cross on top
-		if ( !cg.snap->ps.ammo[ i ] ) {
-			  CG_DrawPic( x, y, 32, 32, cgs.media.noammoShader );
-		}
-
-		x += 40;
-                //Sago: Undo mad change of weapons
-                if(i==10)
-                        i=0;
-	}
-}
-
-/*
-===============
-CG_DrawWeaponBar2
-===============
-*/
-
-void CG_DrawWeaponBar2(int count, int bits, float *color){
+void CG_DrawWeaponBar0(int count, int bits, float *color){
 
 	int y = 200 + count * 12;
 	int x = 0;
 	int i;
 	int w;
 	char *s;
-	float red[4];
-	float yellow[4];
-	float blue[4];
-	
-	red[0] = 1.0f;
-	red[1] = 0;
-	red[2] = 0;
-	red[3] = 0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	blue[0] = 0;
-	blue[1] = 0;
-	blue[2] = 1.0f;
-	blue[3] = 0.4f;
 	
 	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
                 //Sago: Do mad change of grapple placement:
@@ -1921,28 +1591,17 @@ void CG_DrawWeaponBar2(int count, int bi
                         i=0;
 		    continue;
 		}
-			
-		if(cg.snap->ps.ammo[i]){
+		if( i != WP_GAUNTLET ) {
+			// draw weapon icon
 			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y, 50, 24, blue );
-				CG_DrawRect( x, y, 50, 24, 2, yellow); 
-			}
-			else{   
-				CG_FillRect( x, y,50, 24, blue );
-			}
-		}
-		else{ 
-			if ( i == cg.weaponSelect) { 
-				CG_FillRect( x, y, 50, 24, red );
-				CG_DrawRect( x, y, 50, 24, 2, yellow);
+				CG_DrawPic( x, y, 50, 24, cgs.media.selectionShaderLeft );
 			}
-			else{
-				CG_FillRect( x, y,50, 24, red );
-			}
-		}
-		     
-			// draw weapon icon
+
 			CG_DrawPic( x+2, y+4, 16, 16, cg_weapons[i].weaponIcon );
+
+			if(cg.snap->ps.ammo[i] == 0){
+				CG_DrawPic( x+2, y+4, 16, 16, cgs.media.noammoShader );
+			}	
 		
 			/** Draw Weapon Ammo **/
 			if(cg.snap->ps.ammo[ i ]!=-1){
@@ -1952,6 +1611,7 @@ void CG_DrawWeaponBar2(int count, int bi
 			}
 
 			y -= 24;
+		}
                 //Sago: Undo mad change of weapons
                 if(i==10)
                         i=0;
@@ -1960,44 +1620,18 @@ void CG_DrawWeaponBar2(int count, int bi
 
 /*
 ===============
-CG_DrawWeaponBar3
+CG_DrawWeaponBar1
 ===============
 */
 
-void CG_DrawWeaponBar3(int count, int bits, float *color){
+void CG_DrawWeaponBar1(int count, int bits, float *color){
 
-	int y = 200 + count * 12;
-	int x = 0;
+	int y = 370;
+	int x = 320 - (count-1) * 15;
 	int i;
-	int ammo;
-	int max;
-	int br;
 	int w;
 	char *s;
-	float red[4];
-	float yellow[4];
-	float green[4];
-	float blue[4];
-	
-	red[0] = 1.0f;
-	red[1] = 0;
-	red[2] = 0;
-	red[3] = 0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	green[0] = 0;
-	green[1] = 1.0f;
-	green[2] = 0;
-	green[3] = 1.0f;
 	
-	blue[0] = 0;
-	blue[1] = 0;
-	blue[2] = 1.0f;
-	blue[3] = 0.4f;
 	
 	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
                 //Sago: Do mad change of grapple placement:
@@ -2010,70 +1644,27 @@ void CG_DrawWeaponBar3(int count, int bi
                         i=0;
 			continue;
 		}
-		
-		ammo=cg.snap->ps.ammo[i];
-
-		switch(i) {
-			case WP_MACHINEGUN: max = 100; break;
-			case WP_SHOTGUN: max = 10; break;
-			case WP_GRENADE_LAUNCHER: max = 10; break;
-			case WP_ROCKET_LAUNCHER: max = 10; break;
-			case WP_LIGHTNING: max = 100; break;
-			case WP_RAILGUN: max = 10; break;
-			case WP_PLASMAGUN: max = 50; break;
-			case WP_BFG: max = 10; break;
-			case WP_NAILGUN: max = 10; break;
-			case WP_PROX_LAUNCHER: max = 5; break;
-			case WP_CHAINGUN: max = 100; break;
-			default: max = 1; break;
-		}
-			
-		ammo = (ammo*100)/max;
-		if(ammo >=100)
-			ammo=100;
-			
-		br=ammo*20/100;
-				
-		if(i!=1){
-			if(ammo <= 20)
-				CG_FillRect( 51, y+2+20-br, 4,br, red);
-			if(ammo > 20 && ammo <= 50)
-				CG_FillRect( 51, y+2+20-br, 4,br, yellow);
-			if(ammo > 50)
-				CG_FillRect( 51, y+2+20-br, 4,br, green);
-		}
-			
-		if(cg.snap->ps.ammo[i]){
+		if( i != WP_GAUNTLET ) {
+			// draw weapon icon
 			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y, 50, 24, blue );
-				CG_DrawRect( x, y, 50, 24, 2, yellow); 
-			}
-			else{   
-				CG_FillRect( x, y,50, 24, blue );
-			}
-		}
-		else{ 
-			if ( i == cg.weaponSelect) { 
-				CG_FillRect( x, y, 50, 24, red );
-				CG_DrawRect( x, y, 50, 24, 2, yellow);
+				CG_DrawPic( x, y, 30, 38, cgs.media.selectionShaderMid );
 			}
-			else{
-					CG_FillRect( x, y,50, 24, red );
+
+			CG_DrawPic( x+7, y+2, 16, 16, cg_weapons[i].weaponIcon );
+
+			if(cg.snap->ps.ammo[i] == 0){
+				CG_DrawPic( x+7, y+2, 16, 16, cgs.media.noammoShader );
 			}
-		}
-		     
-			// draw weapon icon
-			CG_DrawPic( x+2, y+4, 16, 16, cg_weapons[i].weaponIcon );
-		
-			/** Draw Weapon Ammo **/
+	
 			if(cg.snap->ps.ammo[ i ]!=-1){
 				s = va("%i", cg.snap->ps.ammo[ i ] );
 				w = CG_DrawStrlen( s ) * SMALLCHAR_WIDTH;
-				CG_DrawSmallStringColor(x - w/2 + 32, y+4, s, color);
+				CG_DrawSmallStringColor(x - w/2 + 15, y+20, s, color);
 			}
-
-			y -= 24;
-                        //Sago: Undo mad change of weapons
+			
+			x += 30;
+		}
+                //Sago: Undo mad change of weapons
                 if(i==10)
                         i=0;
 	}
@@ -2081,29 +1672,17 @@ void CG_DrawWeaponBar3(int count, int bi
 
 /*
 ===============
-CG_DrawWeaponBar4
+CG_DrawWeaponBar2
 ===============
 */
 
-void CG_DrawWeaponBar4(int count, int bits, float *color){
+void CG_DrawWeaponBar2(int count, int bits, float *color){
 
 	int y = 200 + count * 12;
-	int x = 0;
+	int x = 640-50;
 	int i;
-	float ammo;
-	int max;
 	int w;
 	char *s;
-	float boxColor[4];
-	float yellow[4];
-	
-	boxColor[1]=0;
-	boxColor[3]=0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
 	
 	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
                 //Sago: Do mad change of grapple placement:
@@ -2114,44 +1693,19 @@ void CG_DrawWeaponBar4(int count, int bi
 		if ( !( bits & ( 1 << i ) ) ) {
                     if(i==10)
                         i=0;
-			continue;
-		}
-		
-		ammo=cg.snap->ps.ammo[i];
-
-		switch(i) {
-			case WP_MACHINEGUN: max = 100; break;
-			case WP_SHOTGUN: max = 10; break;
-			case WP_GRENADE_LAUNCHER: max = 10; break;
-			case WP_ROCKET_LAUNCHER: max = 10; break;
-			case WP_LIGHTNING: max = 100; break;
-			case WP_RAILGUN: max = 10; break;
-			case WP_PLASMAGUN: max = 50; break;
-			case WP_BFG: max = 10; break;
-			case WP_NAILGUN: max = 10; break;
-			case WP_PROX_LAUNCHER: max = 5; break;
-			case WP_CHAINGUN: max = 100; break;
-			default: max = 1; break;
-		}
-			
-		ammo = (ammo*100)/max;
-			
-		if((ammo >=100) || (ammo < 0))
-			ammo=100;
-			
-		boxColor[2]=(ammo/100.0f)*1.0f;
-		boxColor[0]=1.0f-(ammo/100.0f)*1.0f;	
-		
-		if ( i == cg.weaponSelect) {
-			CG_FillRect( x, y, 50, 24, boxColor );
-			CG_DrawRect( x, y, 50, 24, 2, yellow); 
-		}
-		else{   
-			CG_FillRect( x, y,50, 24, boxColor );
+		    continue;
 		}
-			
+		if( i != WP_GAUNTLET ) {
 			// draw weapon icon
+			if ( i == cg.weaponSelect) {
+				CG_DrawPic( x, y, 50, 24, cgs.media.selectionShaderRight );
+			}
+
 			CG_DrawPic( x+2, y+4, 16, 16, cg_weapons[i].weaponIcon );
+
+			if(cg.snap->ps.ammo[i] == 0){
+				CG_DrawPic( x+2, y+4, 16, 16, cgs.media.noammoShader );
+			}	
 		
 			/** Draw Weapon Ammo **/
 			if(cg.snap->ps.ammo[ i ]!=-1){
@@ -2161,295 +1715,15 @@ void CG_DrawWeaponBar4(int count, int bi
 			}
 
 			y -= 24;
-                        //Sago: Undo mad change of weapons
-                if(i==10)
-                        i=0;
-	}
-}
-
-/*
-===============
-CG_DrawWeaponBar5
-===============
-*/
-
-void CG_DrawWeaponBar5(int count, int bits, float *color){
-
-	int y = 380;
-	int x = 320 - count * 15;
-	int i;
-	int w;
-	char *s;
-	float red[4];
-	float yellow[4];
-	float blue[4];
-	
-	red[0] = 1.0f;
-	red[1] = 0;
-	red[2] = 0;
-	red[3] = 0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	blue[0] = 0;
-	blue[1] = 0;
-	blue[2] = 1.0f;
-	blue[3] = 0.4f;
-	
-	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
-                //Sago: Do mad change of grapple placement:
-                if(i==10)
-                    continue;
-                if(i==0)
-                    i=10;
-		if ( !( bits & ( 1 << i ) ) ) {
-                    if(i==10)
-                        i=0;
-			continue;
-		}
-			
-		if(cg.snap->ps.ammo[i]){
-			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y , 30 , 38, blue );
-				CG_DrawRect( x, y, 30 ,38 ,2, yellow); 
-			}
-			else{   
-				CG_FillRect( x, y,30, 38, blue );
-			}
-		}
-		else{ 
-			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y , 30 , 38, red );
-				CG_DrawRect( x , y, 30,38,2, yellow); 
-			}
-			else{
-				CG_FillRect( x, y,30, 38, red );
-			}
-		}
-				
-		CG_DrawPic( x+7, y+2, 16, 16, cg_weapons[i].weaponIcon );
-			
-		if(cg.snap->ps.ammo[ i ]!=-1){
-			s = va("%i", cg.snap->ps.ammo[ i ] );
-			w = CG_DrawStrlen( s ) * SMALLCHAR_WIDTH;
-			CG_DrawSmallStringColor(x - w/2 + 15, y+20, s, color);
 		}
-			
-		x += 30;
-                //Sago: Undo mad change of weapons
-                if(i==10)
-                        i=0;
-	}
-}
-
-/*
-===============
-CG_DrawWeaponBar6
-===============
-*/
-
-void CG_DrawWeaponBar6(int count, int bits, float *color){
 
-	int y = 380;
-	int x = 320 - count * 15;
-	int i;
-	int ammo;
-	int max;
-	int br;
-	int w;
-	char *s;
-	float red[4];
-	float yellow[4];
-	float green[4];
-	float blue[4];
-	
-	red[0] = 1.0f;
-	red[1] = 0;
-	red[2] = 0;
-	red[3] = 0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	green[0] = 0;
-	green[1] = 1.0f;
-	green[2] = 0;
-	green[3] = 1.0f;
-	
-	blue[0] = 0;
-	blue[1] = 0;
-	blue[2] = 1.0f;
-	blue[3] = 0.4f;
-	
-	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
-                //Sago: Do mad change of grapple placement:
-                if(i==10)
-                    continue;
-                if(i==0)
-                    i=10;
-		if ( !( bits & ( 1 << i ) ) ) {
-                    if(i==10)
-                        i=0;
-			continue;
-		}
-		
-		ammo=cg.snap->ps.ammo[i];
-		
-		switch(i) {
-			case WP_MACHINEGUN: max = 100; break;
-			case WP_SHOTGUN: max = 10; break;
-			case WP_GRENADE_LAUNCHER: max = 10; break;
-			case WP_ROCKET_LAUNCHER: max = 10; break;
-			case WP_LIGHTNING: max = 100; break;
-			case WP_RAILGUN: max = 10; break;
-			case WP_PLASMAGUN: max = 50; break;
-			case WP_BFG: max = 10; break;
-			case WP_NAILGUN: max = 10; break;
-			case WP_PROX_LAUNCHER: max = 5; break;
-			case WP_CHAINGUN: max = 100; break;
-			default: max = 1; break;
-		}
-			
-		ammo = (ammo*100)/max;
-			
-		if(ammo >=100)
-			ammo=100;
-			
-		br=ammo*26/100;
-				
-		if(i!=1){
-			if(ammo <= 20)
-				CG_FillRect( x+2, y +40, br, 4, red);
-			if(ammo > 20 && ammo <= 50)
-				CG_FillRect( x+2, y+40, br, 4, yellow);
-			if(ammo > 50)
-				CG_FillRect( x+2, y+40, br, 4, green);
-		}
-			
-		if(cg.snap->ps.ammo[i]){
-			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y , 30 , 38, blue );
-				CG_DrawRect( x, y, 30 ,38 ,2, yellow); 
-			}
-			else{   
-					CG_FillRect( x, y,30, 38, blue );
-			}
-		}
-		else{ 
-			if ( i == cg.weaponSelect) {
-				CG_FillRect( x, y , 30 , 38, red );
-				CG_DrawRect( x , y, 30,38,2, yellow); 
-			}
-			else{
-					CG_FillRect( x, y,30, 38, red );
-			}
-		}	
-			
-		CG_DrawPic( x+7, y+2, 16, 16, cg_weapons[i].weaponIcon );
-			
-		if(cg.snap->ps.ammo[ i ]!=-1){
-			s = va("%i", cg.snap->ps.ammo[ i ] );
-			w = CG_DrawStrlen( s ) * SMALLCHAR_WIDTH;
-			CG_DrawSmallStringColor(x - w/2 + 15, y+20, s, color);
-		}
-			
-		x += 30;
                 //Sago: Undo mad change of weapons
                 if(i==10)
                         i=0;
 	}	
 }
 
-/*
-===============
-CG_DrawWeaponBar7
-===============
-*/
-
-void CG_DrawWeaponBar7(int count, int bits, float *color){
 
-	int y = 380;
-	int x = 320 - count * 15;
-	int i;
-	float ammo;
-	float max;
-	int w;
-	char *s;
-	float yellow[4];
-	float boxColor[4];
-	
-	boxColor[1]=0;
-	boxColor[3]=0.4f;
-	
-	yellow[0] = 1.0f;
-	yellow[1] = 1.0f;
-	yellow[2] = 0;
-	yellow[3] = 1.0f;
-	
-	for ( i = 0 ; i < MAX_WEAPONS ; i++ ) {
-                //Sago: Do mad change of grapple placement:
-                if(i==10)
-                    continue;
-                if(i==0)
-                    i=10;
-		if ( !( bits & ( 1 << i ) ) ) {
-                    if(i==10)
-                        i=0;
-			continue;
-		}
-		
-		ammo=cg.snap->ps.ammo[i];
-		
-		switch(i) {
-			case WP_MACHINEGUN: max = 100; break;
-			case WP_SHOTGUN: max = 10; break;
-			case WP_GRENADE_LAUNCHER: max = 10; break;
-			case WP_ROCKET_LAUNCHER: max = 10; break;
-			case WP_LIGHTNING: max = 100; break;
-			case WP_RAILGUN: max = 10; break;
-			case WP_PLASMAGUN: max = 50; break;
-			case WP_BFG: max = 10; break;
-			case WP_NAILGUN: max = 10; break;
-			case WP_PROX_LAUNCHER: max = 5; break;
-			case WP_CHAINGUN: max = 100; break;
-			default: max = 1; break;
-		}
-			
-		ammo = (ammo*100)/max;
-			
-		if((ammo >=100) || (ammo < 0))
-			ammo=100;
-			
-		boxColor[2]=(ammo/100.0f)*1.0f;
-		boxColor[0]=1.0f-(ammo/100.0f)*1.0f;
-				
-		if ( i == cg.weaponSelect) {
-			CG_FillRect( x, y , 30 , 38, boxColor );
-			CG_DrawRect( x, y, 30 ,38 ,2, yellow); 
-		}
-		else{   
-				CG_FillRect( x, y,30, 38, boxColor );
-		}
-			
-		CG_DrawPic( x+7, y+2, 16, 16, cg_weapons[i].weaponIcon );
-			
-		if(cg.snap->ps.ammo[ i ]!=-1){
-			s = va("%i", cg.snap->ps.ammo[ i ] );
-			w = CG_DrawStrlen( s ) * SMALLCHAR_WIDTH;
-			CG_DrawSmallStringColor(x - w/2 + 15, y+20, s, color);
-		}
-		
-		x += 30;
-                //Sago: Undo mad change of weapons
-                if(i==10)
-                        i=0;
-	}
-}
 
 
 /*
@@ -2697,83 +1971,6 @@ void CG_FireWeapon( centity_t *cent ) {
 
 
 /*
-==========================
-CG_Explosionia LEILEI
-==========================
-
-static void CG_Explosionia ( centity_t *cent ) {
-	localEntity_t	*le;
-	ec3_t			velocity, xvelocity;
-	vec3_t			offset, xoffset;
-	float			waterScale = 1.0f;
-	vec3_t			v[3];
-
-	if ( cg_brassTime.integer <= 0 ) {
-		return;
-	}
-
-	le = CG_AllocLocalEntity();
-	
-
-	velocity[0] = -50 + 100 * crandom();
-	velocity[1] = -50 + 100 * crandom();
-	velocity[2] = -50 + 100 * crandom();
-
-	le->leType = LE_FALL_SCALE_FADE;
-	le->startTime = cg.time;
-	le->endTime = le->startTime + cg_brassTime.integer + ( cg_brassTime.integer / 4 ) * random();
-
-	//le->pos.trType = TR_GRAVITY;
-	le->pos.trTime = cg.time - (rand()&15);
-
-	AnglesToAxis( cent->lerpAngles, v );
-
-	offset[0] = 8;
-	offset[1] = -4;
-	offset[2] = 24;
-
-	xoffset[0] = offset[0] * v[0][0] + offset[1] * v[1][0] + offset[2] * v[2][0];
-	xoffset[1] = offset[0] * v[0][1] + offset[1] * v[1][1] + offset[2] * v[2][1];
-	xoffset[2] = offset[0] * v[0][2] + offset[1] * v[1][2] + offset[2] * v[2][2];
-	VectorAdd( cent->lerpOrigin, xoffset, re->origin );
-
-	VectorCopy( re->origin, le->pos.trBase );
-
-	if ( CG_PointContents( re->origin, -1 ) & CONTENTS_WATER ) {
-		waterScale = 0.10f;
-	}
-
-	xvelocity[0] = velocity[0] * v[0][0] + velocity[1] * v[1][0] + velocity[2] * v[2][0];
-	xvelocity[1] = velocity[0] * v[0][1] + velocity[1] * v[1][1] + velocity[2] * v[2][1];
-	xvelocity[2] = velocity[0] * v[0][2] + velocity[1] * v[1][2] + velocity[2] * v[2][2];
-	VectorScale( xvelocity, waterScale, le->pos.trDelta );
-
-	le->bounceFactor = 0.4 * waterScale;
-
-	le->angles.trType = TR_LINEAR;
-	le->angles.trTime = cg.time;
-	le->angles.trBase[0] = rand()&31;
-	le->angles.trBase[1] = rand()&31;
-	le->angles.trBase[2] = rand()&31;
-	le->angles.trDelta[0] = 2;
-	le->angles.trDelta[1] = 1;
-	le->angles.trDelta[2] = 0;
-	le = CG_SmokePuff( le->origin, le->velocity, 
-					  30,		// radius
-					  1, 1, 1, 1,	// color
-					  2000,		// trailTime
-					  cg.time,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbumShader1 );
-	le->leFlags = LEF_TUMBLE;
-	le->leBounceSoundType = LEBS_NONE;
-	le->leMarkType = LEMT_NONE;
-}
-
-*/
-
-/*
 =================
 CG_MissileHitWall
 
@@ -2877,27 +2074,6 @@ void CG_MissileHitWall( int weapon, int
 
 			CG_ParticleExplosion( "explode1", sprOrg, sprVel, 1400, 20, 30 );
 		}
-			// LEILEI START enhancement
-		if (cg_leiEnhancement.integer) {
-			// some more fireball, fireball, fireball, fire fire!
-			VectorMA( origin, 2, dir, sprOrg );
-			VectorScale( dir, 0, sprVel );
-			lightColor[0] = 0.7;	// subtler explosion colors
-			lightColor[1] = 0.6;
-			lightColor[2] = 0.4;
-			//CG_Explosionia(self);
-		/*
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 177);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 13);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 111);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 74);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 15);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 19);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 11);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 13);
-		*/
-		}
-			// LEILEI END enhancement
 		break;
 	case WP_RAILGUN:
 		mod = cgs.media.ringFlashModel;
@@ -3013,15 +2189,6 @@ CG_MissileHitPlayer
 =================
 */
 void CG_MissileHitPlayer( int weapon, vec3_t origin, vec3_t dir, int entityNum ) {
-// LEILEI ENHANCEMENT
-	if (cg_leiEnhancement.integer) {
-		CG_SmokePuff( origin, dir, 22, 1, 1, 1, 1.0f, 900, cg.time, 0, 0,  cgs.media.lbldShader1 );
-		CG_SpurtBlood( origin, dir, 1);
-		CG_SpurtBlood( origin, dir, 4);
-		CG_SpurtBlood( origin, dir, -12);
-		}
-
-	else
 	CG_Bleed( origin, entityNum );
 
 	// some weapons will make an explosion with the blood, while
@@ -3060,14 +2227,6 @@ static void CG_ShotgunPellet( vec3_t sta
 	trace_t		tr;
 	int sourceContentType, destContentType;
 
-// LEILEI ENHACNEMENT
-	localEntity_t	*smoke;
-	vec3_t	kapew;	
-	vec3_t  kapow;
-	int	therando;
-
-
-
 	CG_Trace( &tr, start, NULL, NULL, end, skipNum, MASK_SHOT );
 
 	sourceContentType = trap_CM_PointContents( start, 0 );
@@ -3083,39 +2242,11 @@ static void CG_ShotgunPellet( vec3_t sta
 
 		trap_CM_BoxTrace( &trace, end, start, NULL, NULL, 0, CONTENTS_WATER );
 		CG_BubbleTrail( start, trace.endpos, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				}
-// END LEIHANCMENET
 	} else if ( destContentType & CONTENTS_WATER ) {
 		trace_t trace;
 
 		trap_CM_BoxTrace( &trace, start, end, NULL, NULL, 0, CONTENTS_WATER );
 		CG_BubbleTrail( tr.endpos, trace.endpos, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				}
-// END LEIHANCMENET
 	}
 
 	if (  tr.surfaceFlags & SURF_NOIMPACT ) {
@@ -3131,36 +2262,8 @@ static void CG_ShotgunPellet( vec3_t sta
 		}
 		if ( tr.surfaceFlags & SURF_METALSTEPS ) {
 			CG_MissileHitWall( WP_SHOTGUN, 0, tr.endpos, tr.plane.normal, IMPACTSOUND_METAL );
-// LEILEI ENHANCEMENT
-			if (cg_leiEnhancement.integer) {
-					VectorCopy( tr.plane.normal, kapow );
-
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 7);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 3);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 1);
-				
-				}
-// END LEIHANCMENET
 		} else {
 			CG_MissileHitWall( WP_SHOTGUN, 0, tr.endpos, tr.plane.normal, IMPACTSOUND_DEFAULT );
-	
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-					VectorCopy( tr.plane.normal, kapow );
-
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 7);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 2);
-					
-					smoke = CG_SmokePuff( tr.endpos, kapow, 21, 1, 1, 1, 0.9f, 1200, cg.time, 0, 0,  cgs.media.lsmkShader2 );
-					//smoke = CG_SmokePuff( tr.endpos, kapow, 21, 1, 1, 1, 0.9f, 1200, cg.time, 0, 0,  cgs.media.lbumShader1 );
-				}
-// END LEIHANCMENET
 		}
 	}
 }
@@ -3219,25 +2322,7 @@ void CG_ShotgunFire( entityState_t *es )
 		contents = trap_CM_PointContents( es->pos.trBase, 0 );
 		if ( !( contents & CONTENTS_WATER ) ) {
 			VectorSet( up, 0, 0, 8 );
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Shotgun puffy
-					VectorSet( up, 4, 4, 4 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader1 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader2 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader3 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader4 );
-				}
-		else
-			
-// END LEIHANCMENET
-			
-CG_SmokePuff( v, up, 32, 1, 1, 1, 0.33f, 900, cg.time, 0, LEF_PUFF_DONT_SCALE, cgs.media.shotgunSmokePuffShader );
-
+			CG_SmokePuff( v, up, 32, 1, 1, 1, 0.33f, 900, cg.time, 0, LEF_PUFF_DONT_SCALE, cgs.media.shotgunSmokePuffShader );
 		}
 	}
 	CG_ShotgunPattern( es->pos.trBase, es->origin2, es->eventParm, es->otherEntityNum );
@@ -3382,15 +2467,6 @@ void CG_Bullet( vec3_t end, int sourceEn
 	trace_t trace;
 	int sourceContentType, destContentType;
 	vec3_t		start;
-// LEILEI ENHACNEMENT
-	localEntity_t	*smoke;
-	localEntity_t	*spark;
-	vec3_t	kapew;	
-	vec3_t  kapow;
-	int	therando;
-
-
-
 
 	// if the shooter is currently valid, calc a source point and possibly
 	// do trail effects
@@ -3407,44 +2483,11 @@ void CG_Bullet( vec3_t end, int sourceEn
 			else if ( ( sourceContentType & CONTENTS_WATER ) ) {
 				trap_CM_BoxTrace( &trace, end, start, NULL, NULL, 0, CONTENTS_WATER );
 				CG_BubbleTrail( start, trace.endpos, 32 );
-
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				//	CG_LeiSplash2(trace.endpos, kapow, 900, 0, 0, 444);
-						
-				}
-// END LEIHANCMENET
-
-
 			}
 			// bubble trail from air into water
 			else if ( ( destContentType & CONTENTS_WATER ) ) {
 				trap_CM_BoxTrace( &trace, start, end, NULL, NULL, 0, CONTENTS_WATER );
 				CG_BubbleTrail( trace.endpos, end, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-			//CG_LeiSplash2(trace.endpos, kapow, 500, 0, 0, 1);
-				}
-// END LEIHANCMENET
 			}
 
 			// draw a tracer
@@ -3456,58 +2499,9 @@ void CG_Bullet( vec3_t end, int sourceEn
 
 	// impact splash and mark
 	if ( flesh ) {
-// LEILEI ENHANCEMENT
-	if (cg_leiEnhancement.integer) {
-
-		
-						// Blood Hack
-				VectorCopy( normal, kapow );
-					
-				kapow[0] = kapow[0] * (crandom() * 65 + 37);
-				kapow[1] = kapow[1] * (crandom() * 65 + 37);
-				kapow[2] = kapow[2] * (crandom() * 65 + 37);
-				VectorCopy( kapow, kapew );
-
-				kapew[0] = kapew[0] * (crandom() * 2 + 37);
-				kapew[1] = kapew[1] * (crandom() * 2 + 37);
-				kapew[2] = kapew[2] * (crandom() * 2 + 37);
-
-		CG_SmokePuff( end, kapow, 6, 1, 1, 1, 1.0f, 600, cg.time, 0, 0,  cgs.media.lbldShader1 );
-		CG_SpurtBlood( end, kapow, 2);
-		CG_SpurtBlood( end, kapew, 1);
-if (cg_leiSuperGoreyAwesome.integer) {
-		CG_SpurtBlood( end, kapow, -2);
-			}
-		}
-
-	else
 		CG_Bleed( end, fleshEntityNum );
 	} else {
 		CG_MissileHitWall( WP_MACHINEGUN, 0, end, normal, IMPACTSOUND_DEFAULT );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-
-				// Smoke puff
-					VectorCopy( normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					VectorCopy( kapow, kapew );
-
-					kapew[0] = kapew[0] * (crandom() * 65 + 37);
-					kapew[1] = kapew[1] * (crandom() * 65 + 37);
-					kapew[2] = kapew[2] * (crandom() * 65 + 37);
-
-
-					smoke = CG_SmokePuff( end, kapow, 14, 1, 1, 1, 1.0f, 600, cg.time, 0, 0,  cgs.media.lsmkShader1 );
-			//		CG_LeiSparks(end, normal, 600, 0, 0, 177);
-			//		CG_LeiSparks(end, normal, 600, 0, 0, 155);
-					CG_LeiSparks(end, normal, 600, 0, 0, 444);
-
-				}
-// END LEIHANCMENET
 	}
 
 }
diff -rupN code-svn//cgame/.svn/all-wcprops code//cgame/.svn/all-wcprops
--- code-svn//cgame/.svn/all-wcprops	2010-05-06 12:48:17.000000000 +0200
+++ code//cgame/.svn/all-wcprops	2009-11-14 15:55:49.000000000 +0100
@@ -1,7 +1,7 @@
 K 25
 svn:wc:ra_dav:version-url
 V 34
-/svn/!svn/ver/202/trunk/code/cgame
+/svn/!svn/ver/181/trunk/code/cgame
 END
 cg_unlagged.c
 K 25
@@ -12,14 +12,14 @@ END
 cg_particles.c
 K 25
 svn:wc:ra_dav:version-url
-V 49
-/svn/!svn/ver/189/trunk/code/cgame/cg_particles.c
+V 47
+/svn/!svn/ver/3/trunk/code/cgame/cg_particles.c
 END
 cg_predict.c
 K 25
 svn:wc:ra_dav:version-url
 V 47
-/svn/!svn/ver/186/trunk/code/cgame/cg_predict.c
+/svn/!svn/ver/102/trunk/code/cgame/cg_predict.c
 END
 cg_syscalls.asm
 K 25
@@ -43,7 +43,7 @@ cg_draw.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/202/trunk/code/cgame/cg_draw.c
+/svn/!svn/ver/181/trunk/code/cgame/cg_draw.c
 END
 cg_syscalls.c
 K 25
@@ -61,7 +61,7 @@ cg_local.h
 K 25
 svn:wc:ra_dav:version-url
 V 45
-/svn/!svn/ver/191/trunk/code/cgame/cg_local.h
+/svn/!svn/ver/153/trunk/code/cgame/cg_local.h
 END
 cg_challenges.c
 K 25
@@ -84,32 +84,32 @@ END
 cg_consolecmds.c
 K 25
 svn:wc:ra_dav:version-url
-V 51
-/svn/!svn/ver/192/trunk/code/cgame/cg_consolecmds.c
+V 49
+/svn/!svn/ver/3/trunk/code/cgame/cg_consolecmds.c
 END
 cg_view.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/191/trunk/code/cgame/cg_view.c
+/svn/!svn/ver/136/trunk/code/cgame/cg_view.c
 END
 cg_weapons.c
 K 25
 svn:wc:ra_dav:version-url
 V 47
-/svn/!svn/ver/189/trunk/code/cgame/cg_weapons.c
+/svn/!svn/ver/176/trunk/code/cgame/cg_weapons.c
 END
 cg_marks.c
 K 25
 svn:wc:ra_dav:version-url
-V 45
-/svn/!svn/ver/189/trunk/code/cgame/cg_marks.c
+V 43
+/svn/!svn/ver/3/trunk/code/cgame/cg_marks.c
 END
 cg_servercmds.c
 K 25
 svn:wc:ra_dav:version-url
 V 50
-/svn/!svn/ver/191/trunk/code/cgame/cg_servercmds.c
+/svn/!svn/ver/136/trunk/code/cgame/cg_servercmds.c
 END
 cg_drawtools.c
 K 25
@@ -126,8 +126,8 @@ END
 cg_effects.c
 K 25
 svn:wc:ra_dav:version-url
-V 47
-/svn/!svn/ver/189/trunk/code/cgame/cg_effects.c
+V 46
+/svn/!svn/ver/94/trunk/code/cgame/cg_effects.c
 END
 cg_event.c
 K 25
@@ -151,11 +151,11 @@ cg_main.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/191/trunk/code/cgame/cg_main.c
+/svn/!svn/ver/153/trunk/code/cgame/cg_main.c
 END
 cg_localents.c
 K 25
 svn:wc:ra_dav:version-url
-V 49
-/svn/!svn/ver/189/trunk/code/cgame/cg_localents.c
+V 47
+/svn/!svn/ver/3/trunk/code/cgame/cg_localents.c
 END
diff -rupN code-svn//cgame/.svn/entries code//cgame/.svn/entries
--- code-svn//cgame/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//cgame/.svn/entries	2009-11-14 15:55:49.000000000 +0100
@@ -1,14 +1,14 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/cgame
 http://oax.googlecode.com/svn
 
 
 
-2010-04-28T18:39:14.812741Z
-202
+2009-11-10T23:02:44.285211Z
+181
 sago007
 
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 1071259afb8960cfc05448be2cce2967
 2009-11-09T22:15:20.373786Z
 176
@@ -66,10 +66,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-fc769d2ff42e6fc1a0273fdbcbfe669a
-2009-11-21T18:41:30.937452Z
-189
+2009-11-14T14:55:49.000000Z
+f7346ec8aea8582bfced367b298f44ae
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -92,7 +92,7 @@ sago007
 
 
 
-40788
+40786
 
 cg_predict.c
 file
@@ -100,10 +100,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-59c0091c5339893f7aea829bfcb20232
-2009-11-17T23:26:36.548125Z
-186
+2009-11-14T14:55:49.000000Z
+dd98830e2c4782a83530950ee5f597cb
+2009-06-11T19:07:29.916794Z
+102
 sago007
 
 
@@ -126,7 +126,7 @@ sago007
 
 
 
-27152
+26972
 
 cg_syscalls.asm
 file
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 667b53ae03139e3a5bafa176d234f859
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 2a3455ac25e084190fa7cd33efa6bedf
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 73c8bf25d0353fbc356f709ae53ea5aa
 2009-06-05T02:06:36.273506Z
 78
@@ -236,10 +236,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-c842560f233051acd63b9346ed9bf703
-2010-04-28T18:39:14.812741Z
-202
+2009-11-14T14:55:49.000000Z
+4e0bb179d3855c5fda0f9203ae2363fa
+2009-11-10T23:02:44.285211Z
+181
 sago007
 
 
@@ -262,7 +262,7 @@ sago007
 
 
 
-77182
+76917
 
 cg_syscalls.c
 file
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 03bc33ba7bfb8809a98d35a45e97fd86
 2009-05-15T14:51:36.914432Z
 3
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 0038fdfe519c9480f263a93dbc79ee89
 2009-05-15T14:51:36.914432Z
 3
@@ -338,10 +338,10 @@ file
 
 
 
-2010-02-01T17:12:08.000000Z
-e7ea05ef449c9fc23ac9351cf7918bd4
-2010-01-03T11:04:30.406977Z
-191
+2009-11-14T14:55:49.000000Z
+541877599182a0e666f558ce8427c5b5
+2009-09-28T22:54:59.127273Z
+153
 sago007
 
 
@@ -364,7 +364,7 @@ sago007
 
 
 
-54586
+53707
 
 cg_challenges.c
 file
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 59924c20a14f1df27f285f9203ed24f4
 2009-05-15T14:51:36.914432Z
 3
@@ -406,7 +406,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 7fc5a545be473e8e27fdfd5a570ba81f
 2009-06-22T17:35:03.506265Z
 141
@@ -440,7 +440,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 0f94ea5e9d25d9aa47523be0820e825b
 2009-06-19T00:25:39.042992Z
 133
@@ -474,10 +474,10 @@ file
 
 
 
-2010-02-01T17:12:08.000000Z
-828c74fb5f3cba685535f4e6f6d7a1d9
-2010-01-03T11:31:37.858737Z
-192
+2009-11-14T14:55:49.000000Z
+d8f07025db6858d868f782e1ae875fa3
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -500,7 +500,7 @@ sago007
 
 
 
-15077
+14643
 
 cg_view.c
 file
@@ -508,10 +508,10 @@ file
 
 
 
-2010-02-01T17:12:08.000000Z
-b12e8fafcb590edac787e511c727af3c
-2010-01-03T11:04:30.406977Z
-191
+2009-11-14T14:55:49.000000Z
+3fd532b1fe6048426154b34e91231bfc
+2009-06-21T03:48:16.475993Z
+136
 sago007
 
 
@@ -534,7 +534,7 @@ sago007
 
 
 
-23431
+23429
 
 cg_weapons.c
 file
@@ -542,10 +542,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-fa9d150ee501419560f810f37c8b2385
-2009-11-21T18:41:30.937452Z
-189
+2009-11-14T14:55:49.000000Z
+359acc8b09f0d1f96c68ed23697f069d
+2009-11-09T22:15:20.373786Z
+176
 sago007
 
 
@@ -568,7 +568,7 @@ sago007
 
 
 
-91829
+78571
 
 cg_marks.c
 file
@@ -576,10 +576,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-d28924531e02c49586e6c10fa0d24c18
-2009-11-21T18:41:30.937452Z
-189
+2009-11-14T14:55:49.000000Z
+0afd51685210031f4da2cca35edadae5
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -602,7 +602,7 @@ sago007
 
 
 
-50762
+47471
 
 cg_servercmds.c
 file
@@ -610,10 +610,10 @@ file
 
 
 
-2010-02-01T17:12:08.000000Z
-321583d0fe16888f554c1d6345b01bae
-2010-01-03T11:04:30.406977Z
-191
+2009-11-14T14:55:49.000000Z
+b4a7f4a08469bb47226093f913d45293
+2009-06-21T03:48:16.475993Z
+136
 sago007
 
 
@@ -636,7 +636,7 @@ sago007
 
 
 
-36212
+36210
 
 cg_drawtools.c
 file
@@ -644,7 +644,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 7a92a645ea742018977ea9202af42b58
 2009-11-10T17:47:53.975879Z
 179
@@ -678,7 +678,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 5c96b27ab2d3afef42c3bee38e7aecb6
 2009-06-19T00:25:39.042992Z
 133
@@ -712,10 +712,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-abe483916164931f0641c066008b385c
-2009-11-21T18:41:30.937452Z
-189
+2009-11-14T14:55:49.000000Z
+1d87388389600f4690ac9e77e0e84b74
+2009-06-09T22:53:25.894358Z
+94
 sago007
 
 
@@ -738,7 +738,7 @@ sago007
 
 
 
-18410
+17140
 
 cg_event.c
 file
@@ -746,7 +746,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 c5cea81d9fd2799cc4f1324d13ceeb0e
 2009-11-10T23:02:44.285211Z
 181
@@ -780,7 +780,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 7c13bc7b027ffad0efe8f0114fa21aa4
 2009-05-15T14:51:36.914432Z
 3
@@ -814,7 +814,7 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
+2009-11-14T14:55:49.000000Z
 96919c38b3274d93c97d35a60d16e736
 2009-06-10T01:14:21.388183Z
 96
@@ -848,10 +848,10 @@ file
 
 
 
-2010-02-01T17:12:08.000000Z
-228aabf466b5a4cc3267bc1c788e77d7
-2010-01-03T11:04:30.406977Z
-191
+2009-11-14T14:55:49.000000Z
+9f99e8ec253309eeb542c2d562e4dd53
+2009-09-28T22:54:59.127273Z
+153
 sago007
 
 
@@ -874,7 +874,7 @@ sago007
 
 
 
-81180
+79145
 
 cg_localents.c
 file
@@ -882,10 +882,10 @@ file
 
 
 
-2009-12-03T12:43:07.000000Z
-ef8d6cf481bb95782ecf3455d346beed
-2009-11-21T18:41:30.937452Z
-189
+2009-11-14T14:55:49.000000Z
+f5e3bd954d51a1447917ea81d680ae24
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -908,5 +908,5 @@ sago007
 
 
 
-27220
+22162
 
diff -rupN code-svn//cgame/.svn/text-base/cg_consolecmds.c.svn-base code//cgame/.svn/text-base/cg_consolecmds.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_consolecmds.c.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_consolecmds.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -29,22 +29,7 @@ Foundation, Inc., 51 Franklin St, Fifth
 extern menuDef_t *menuScoreboard;
 #endif
 
-void CG_PrintClientNumbers( void ) {
-    int i;
 
-    CG_Printf( "slot score ping name\n" );
-    CG_Printf( "---- ----- ---- ----\n" );
-
-    for(i=0;i<cg.numScores;i++) {
-        CG_Printf("%-4d",cg.scores[i].client);
-
-        CG_Printf(" %-5d",cg.scores[i].score);
-
-        CG_Printf(" %-4d",cg.scores[i].ping);
-
-        CG_Printf(" %s\n",cgs.clientinfo[cg.scores[i].client].name);
-    }
-}
 
 void CG_TargetCommand_f( void ) {
 	int		targetNum;
@@ -515,8 +500,7 @@ static consoleCommand_t	commands[] = {
 #endif
 	{ "startOrbit", CG_StartOrbit_f },
 	//{ "camera", CG_Camera_f },
-	{ "loaddeferred", CG_LoadDeferredPlayers },
-        { "clients", CG_PrintClientNumbers }
+	{ "loaddeferred", CG_LoadDeferredPlayers }	
 };
 
 
diff -rupN code-svn//cgame/.svn/text-base/cg_draw.c.svn-base code//cgame/.svn/text-base/cg_draw.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_draw.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//cgame/.svn/text-base/cg_draw.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -1076,15 +1076,9 @@ static float CG_DrawEliminationTimer( fl
 	float scale;
 	int cw;
 	int rst;
-
-        
-
+	
 	rst = cgs.roundStartTime;
 
-        if(cg.time>rst && !cgs.roundtime) {
-            return y;
-        }
-
 	//default color is white
 	memcpy(color,g_color_table[ColorIndex(COLOR_WHITE)],sizeof(color));
 
@@ -1151,9 +1145,8 @@ Lots of stuff
 			//w = CG_Text_Width(s, scale, 0);
 			//CG_Text_Paint(320 - w / 2, 125, scale, colorWhite, st, 0, 0, ITEM_TEXTSTYLE_SHADOWEDMORE);
 	#else
-                
-                    w = CG_DrawStrlen( st );
-                    CG_DrawStringExt( 320 - w * cw/2, 70, st, colorWhite,
+		w = CG_DrawStrlen( st );
+		CG_DrawStringExt( 320 - w * cw/2, 70, st, colorWhite, 
 				qfalse, qtrue, cw, (int)(cw * 1.5), 0 );
 	#endif
 	}
@@ -2416,9 +2409,6 @@ static void CG_DrawCenterDDString( void
             case 3:
                 trap_S_StartLocalSound( cgs.media.count3Sound, CHAN_ANNOUNCER );
                 break;
-            case 10:
-                trap_S_StartLocalSound( cgs.media.doublerSound , CHAN_ANNOUNCER );
-                break;
             default:
                 break;
         }
diff -rupN code-svn//cgame/.svn/text-base/cg_effects.c.svn-base code//cgame/.svn/text-base/cg_effects.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_effects.c.svn-base	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_effects.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -514,85 +514,39 @@ void CG_Bleed( vec3_t origin, int entity
 		ex->refEntity.renderfx |= RF_THIRD_PERSON;
 	}
 }
-
+
 
 
 /*
 ==================
-CG_SpurtBlood (LEILEI)
+CG_LaunchGib
 ==================
 */
-void CG_SpurtBlood( vec3_t origin, vec3_t velocity, int hard ) {
-	localEntity_t	*le;
-	refEntity_t		*re;
-	localEntity_t	*blood;
-//		if ( !cg_blood.integer ) {	return;	}
-
-	
-	velocity[0] = velocity[0] * hard * crandom()*460;
-	velocity[1] = velocity[1] * hard * crandom()*460;
-	velocity[2] = velocity[2] * hard * crandom()*566 + 65;
-		blood = CG_SmokePuff( origin, velocity, 
-					21,		// radius
-					  1, 1, 1, 1,	// color
-					 2450,		// trailTime
-					 cg.time,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbldShader1 );
-		// use the optimized version
-		blood->leType = LE_FALL_SCALE_FADE;
-		blood->leType = LE_GORE;
-		blood->pos.trType = TR_GRAVITY;
-		VectorCopy( velocity, blood->pos.trDelta );
-		blood->pos.trDelta[2] = 55;
-		if (crandom() < 0.5){
-		blood->leMarkType = LEMT_BURN;
-		blood->leBounceSoundType = LEBS_BLOOD;
-		}
-	//	VectorCopy( velocity, blood->pos.trDelta );
-
-}
-/*
-==================
-CG_LaunchGib
-==================
-*/
-void CG_LaunchGib( vec3_t origin, vec3_t velocity, qhandle_t hModel ) {
-	localEntity_t	*le;
-	refEntity_t		*re;
-
-	le = CG_AllocLocalEntity();
-	re = &le->refEntity;
-
-	le->leType = LE_FRAGMENT;
-	le->startTime = cg.time;
-	le->endTime = le->startTime + 5000 + random() * 3000;
-
-	VectorCopy( origin, re->origin );
-	AxisCopy( axisDefault, re->axis );
-	re->hModel = hModel;
-
-	le->pos.trType = TR_GRAVITY;
-	VectorCopy( origin, le->pos.trBase );
-	VectorCopy( velocity, le->pos.trDelta );
-	le->pos.trTime = cg.time;
-
-	le->bounceFactor = 0.6f;
-
-	le->leBounceSoundType = LEBS_BLOOD;
-	le->leMarkType = LEMT_BLOOD;
-		if ( cg_leiSuperGoreyAwesome.integer ) {
-			CG_SpurtBlood( origin, velocity, 7); // LEILEI toss some extra juice
-			CG_SpurtBlood( origin, velocity, 22); 
-			CG_SpurtBlood( origin, velocity, 11); 
-			}
-	
-}
-
-
-
-
+void CG_LaunchGib( vec3_t origin, vec3_t velocity, qhandle_t hModel ) {
+	localEntity_t	*le;
+	refEntity_t		*re;
+
+	le = CG_AllocLocalEntity();
+	re = &le->refEntity;
+
+	le->leType = LE_FRAGMENT;
+	le->startTime = cg.time;
+	le->endTime = le->startTime + 5000 + random() * 3000;
+
+	VectorCopy( origin, re->origin );
+	AxisCopy( axisDefault, re->axis );
+	re->hModel = hModel;
+
+	le->pos.trType = TR_GRAVITY;
+	VectorCopy( origin, le->pos.trBase );
+	VectorCopy( velocity, le->pos.trDelta );
+	le->pos.trTime = cg.time;
+
+	le->bounceFactor = 0.6f;
+
+	le->leBounceSoundType = LEBS_BLOOD;
+	le->leMarkType = LEMT_BLOOD;
+}
 
 /*
 ===================
@@ -720,7 +674,7 @@ CG_GibPlayer
 Generated a bunch of gibs launching out from the bodies location
 ===================
 */
-void CG_BigExplosion( vec3_t playerOrigin ) {
+void CG_BigExplode( vec3_t playerOrigin ) {
 	vec3_t	origin, velocity;
 
 	if ( !cg_blood.integer ) {
@@ -758,7 +712,3 @@ void CG_BigExplosion( vec3_t playerOrigi
 	CG_LaunchExplode( origin, velocity, cgs.media.smoke2 );
 }
 
-
-
-
-
diff -rupN code-svn//cgame/.svn/text-base/cg_localents.c.svn-base code//cgame/.svn/text-base/cg_localents.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_localents.c.svn-base	2009-12-03 13:43:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_localents.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -26,7 +26,7 @@ Foundation, Inc., 51 Franklin St, Fifth
 
 #include "cg_local.h"
 
-#define	MAX_LOCAL_ENTITIES	512 
+#define	MAX_LOCAL_ENTITIES	512
 localEntity_t	cg_localEntities[MAX_LOCAL_ENTITIES];
 localEntity_t	cg_activeLocalEntities;		// double linked list
 localEntity_t	*cg_freeLocalEntities;		// single linked list
@@ -143,46 +143,11 @@ void CG_BloodTrail( localEntity_t *le )
 		// use the optimized version
 		blood->leType = LE_FALL_SCALE_FADE;
 		// drop a total of 40 units over its lifetime
-		blood->pos.trDelta[2] = 40;
-		if ( cg_leiSuperGoreyAwesome.integer ) {
-//			blood = CG_SpurtBlood( newOrigin, vec3_origin, 3); // LEILEI more gore plz
-			}
-	}
-}
-
-
-// LEILEI
-void CG_SmallBloodTrail( localEntity_t *le ) {
-	int		t;
-	int		t2;
-	int		step;
-	vec3_t	newOrigin;
-	localEntity_t	*blood;
-
-	step = 61;
-	t = step * ( (cg.time - cg.frametime + step ) / step );
-	t2 = step * ( cg.time / step );
-
-	for ( ; t <= t2; t += step ) {
-		BG_EvaluateTrajectory( &le->pos, t, newOrigin );
-
-		blood = CG_SmokePuff( newOrigin, vec3_origin, 
-					  3,		// radius
-					  1, 1, 1, 1,	// color
-					  770,		// trailTime
-					  t,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbldShader1 );
-		// use the optimized version
-		blood->leType = LE_FALL_SCALE_FADE;
-		// drop a total of 40 units over its lifetime
-		blood->pos.trDelta[2] = 120;
+		blood->pos.trDelta[2] = 40;
 	}
 }
 
 
-
 /*
 ================
 CG_FragmentBounceMark
@@ -231,43 +196,7 @@ void CG_FragmentBounceSound( localEntity
 			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
 		}
 	} else if ( le->leBounceSoundType == LEBS_BRASS ) {
-		if ( cg_leiBrassNoise.integer ) {
-		// half the casings will make  casing sounds
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lbul1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lbul2Sound;
-			} else {
-				s = cgs.media.lbul3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-			}
-		}
-
-	} else if ( le->leBounceSoundType == LEBS_SHELL ) {
-		
-		if ( cg_leiBrassNoise.integer ) {
-			
-		// half the casings will make  casing sounds
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lshl1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lshl2Sound;
-			} else {
-				s = cgs.media.lshl3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-		}
-		}
-
+
 	}
 
 	// don't allow a fragment to make multiple bounce sounds,
@@ -276,56 +205,6 @@ void CG_FragmentBounceSound( localEntity
 }
 
 
-// LEILEI 
-void CG_GoreMark( localEntity_t *le, trace_t *trace ) {
-	int			radius;
-
-	if ( le->leMarkType == LEMT_BURN ) {
-
-		radius = 6 + (rand()&16);
-		CG_ImpactMark( cgs.media.lbldShader2, trace->endpos, trace->plane.normal, random()*360,
-			1,1,1,1, qtrue, radius, qfalse );
-	
-	}
-
-	le->leMarkType = LEMT_NONE;
-}
-
-
-/*
-================
-CG_SplatSound LEILEI
-================
-*/
-void CG_SplatSound( localEntity_t *le, trace_t *trace ) {
-	if ( le->leBounceSoundType == LEBS_BLOOD ) {
-		// half the splats will make splat sounds
-	if ( cg_leiGoreNoise.integer ) {
-		if ( rand() & 1 ) {
-			int r = rand()&3;
-			sfxHandle_t	s;
-
-			if ( r == 0 ) {
-				s = cgs.media.lspl1Sound;
-			} else if ( r == 1 ) {
-				s = cgs.media.lspl2Sound;
-			} else {
-				s = cgs.media.lspl3Sound;
-			}
-			trap_S_StartSound( trace->endpos, ENTITYNUM_WORLD, CHAN_AUTO, s );
-		}
-		}
-	} else if ( le->leBounceSoundType == LEBS_BRASS ) {
-		// no GERMAN EURO CENSOR ROBOTS mode yet.
-	}
-
-	// don't allow a fragment to make multiple bounce sounds,
-	// or it gets too noisy as they settle
-	le->leBounceSoundType = LEBS_NONE;
-}
-
-
-
 /*
 ================
 CG_ReflectVelocity
@@ -436,91 +315,6 @@ void CG_AddFragment( localEntity_t *le )
 	trap_R_AddRefEntityToScene( &le->refEntity );
 }
 
-// LEILEI
-
-void CG_JustSplat( localEntity_t *le, trace_t *trace ) {
-	vec3_t	velocity;
-	float	dot;
-	int		hitTime;
-
-	// reflect the velocity on the trace plane
-	hitTime = cg.time - cg.frametime + cg.frametime * trace->fraction;
-	BG_EvaluateTrajectoryDelta( &le->pos, hitTime, velocity );
-	dot = DotProduct( velocity, trace->plane.normal );
-	VectorMA( velocity, -2*dot, trace->plane.normal, le->pos.trDelta );
-
-	VectorScale( le->pos.trDelta, le->bounceFactor, le->pos.trDelta );
-
-	VectorCopy( trace->endpos, le->pos.trBase );
-	le->pos.trTime = cg.time;
-
-
-	// check for stop, making sure that even on low FPS systems it doesn't bobble
-	if ( trace->allsolid || 
-		( trace->plane.normal[2] > 0 && 
-		( le->pos.trDelta[2] < 40 || le->pos.trDelta[2] < -cg.frametime * le->pos.trDelta[2] ) ) ) {
-		le->pos.trType = TR_STATIONARY;
-	} else {
-
-	}
-}
-
-void CG_AddGore( localEntity_t *le ) {
-	vec3_t	newOrigin;
-	trace_t	trace;
-
-	if ( le->pos.trType == TR_STATIONARY ) {
-		// sink into the ground if near the removal time
-		int		t;
-		float	oldZ;
-		
-		CG_FreeLocalEntity( le ); // kill it
-
-		return;
-	}
-
-	// calculate new position
-	BG_EvaluateTrajectory( &le->pos, cg.time, newOrigin );
-
-	// trace a line from previous position to new position
-	CG_Trace( &trace, le->refEntity.origin, NULL, NULL, newOrigin, -1, CONTENTS_SOLID );
-	if ( trace.fraction == 1.0 ) {
-		// still in free fall
-		VectorCopy( newOrigin, le->refEntity.origin );
-
-		if ( le->leFlags & LEF_TUMBLE ) {
-			vec3_t angles;
-
-			BG_EvaluateTrajectory( &le->angles, cg.time, angles );
-			AnglesToAxis( angles, le->refEntity.axis );
-		}
-
-		trap_R_AddRefEntityToScene( &le->refEntity );
-
-		CG_SmallBloodTrail( le );
-	
-		return;
-	}
-
-	// if it is in a nodrop zone, remove it
-	// this keeps gibs from waiting at the bottom of pits of death
-	// and floating levels
-	if ( trap_CM_PointContents( trace.endpos, 0 ) & CONTENTS_NODROP ) {
-		CG_FreeLocalEntity( le );
-		return;
-	}
-
-	// leave a mark
-	CG_GoreMark( le, &trace );
-
-	// do a juicy sound
-	CG_SplatSound( le, &trace );
-
-	CG_JustSplat( le, &trace );
-
-	trap_R_AddRefEntityToScene( &le->refEntity );
-}
-
 /*
 =====================================================================
 
@@ -622,13 +416,11 @@ static void CG_AddScaleFade( localEntity
 	// so it doesn't add too much overdraw
 	VectorSubtract( re->origin, cg.refdef.vieworg, delta );
 	len = VectorLength( delta );
-	// LEILEI
-	if (!cg_leiEnhancement.integer) {
 	if ( len < le->radius ) {
 		CG_FreeLocalEntity( le );
 		return;
 	}
-		}
+
 	trap_R_AddRefEntityToScene( re );
 }
 
@@ -664,14 +456,11 @@ static void CG_AddFallScaleFade( localEn
 	// so it doesn't add too much overdraw
 	VectorSubtract( re->origin, cg.refdef.vieworg, delta );
 	len = VectorLength( delta );
-	
-	// LEILEI
-if (!cg_leiEnhancement.integer) {
 	if ( len < le->radius ) {
 		CG_FreeLocalEntity( le );
 		return;
 	}
-	}
+
 	trap_R_AddRefEntityToScene( re );
 }
 
@@ -1088,10 +877,6 @@ void CG_AddLocalEntities( void ) {
 			CG_AddRefEntity( le );
 			break;
 //#endif
-
-		case LE_GORE:			// blood
-			CG_AddGore( le );
-			break;
 		}
 	}
 }
diff -rupN code-svn//cgame/.svn/text-base/cg_local.h.svn-base code//cgame/.svn/text-base/cg_local.h.svn-base
--- code-svn//cgame/.svn/text-base/cg_local.h.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_local.h.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -231,8 +231,7 @@ typedef enum {
 	LE_KAMIKAZE,
 	LE_INVULIMPACT,
 	LE_INVULJUICED,
-	LE_SHOWREFENTITY,
-	LE_GORE
+	LE_SHOWREFENTITY
 } leType_t;
 
 typedef enum {
@@ -251,8 +250,7 @@ typedef enum {
 typedef enum {
 	LEBS_NONE,
 	LEBS_BLOOD,
-	LEBS_BRASS,
-	LEBS_SHELL
+	LEBS_BRASS
 } leBounceSoundType_t;	// fragment local entities can make sounds on impacts
 
 typedef struct localEntity_s {
@@ -761,24 +759,6 @@ typedef struct {
 	qhandle_t	plasmaBallShader;
 	qhandle_t	waterBubbleShader;
 	qhandle_t	bloodTrailShader;
-
-
-
-	// LEILEI shaders
-
-	qhandle_t	lsmkShader1;
-	qhandle_t	lsmkShader2;
-	qhandle_t	lsmkShader3;
-	qhandle_t	lsmkShader4;
-	qhandle_t	lbumShader1;
-	qhandle_t	lfblShader1;
-	qhandle_t	lsplShader;
-	qhandle_t	lspkShader1;
-	qhandle_t	lspkShader2;
-	qhandle_t	lbldShader1;
-	qhandle_t	lbldShader2;
-
-
 //#ifdef MISSIONPACK
 	qhandle_t	nailPuffShader;
 	qhandle_t	blueProxMine;
@@ -912,21 +892,6 @@ typedef struct {
 	sfxHandle_t fallSound;
 	sfxHandle_t jumpPadSound;
 
-// LEILEI
-	sfxHandle_t	lspl1Sound;
-	sfxHandle_t	lspl2Sound; // Blood Splat Noises
-	sfxHandle_t	lspl3Sound;
-
-	sfxHandle_t	lbul1Sound;
-	sfxHandle_t	lbul2Sound;	// Bullet Drop Noises
-	sfxHandle_t	lbul3Sound;
-
-	sfxHandle_t	lshl1Sound;
-	sfxHandle_t	lshl2Sound; // Shell Drop Noises
-	sfxHandle_t	lshl3Sound;
-
-// LEILEI END
-
 	sfxHandle_t oneMinuteSound;
 	sfxHandle_t fiveMinuteSound;
 	sfxHandle_t suddenDeathSound;
@@ -1055,7 +1020,7 @@ typedef struct {
 	// parsed from serverinfo
 	gametype_t		gametype;
 	int				dmflags;
-        int                             videoflags;
+        int                             fairflags;
         int				elimflags;
 	int				teamflags;
 	int				fraglimit;
@@ -1260,11 +1225,6 @@ extern	vmCvar_t		cg_noTaunt;
 extern	vmCvar_t		cg_noProjectileTrail;
 extern	vmCvar_t		cg_oldRail;
 extern	vmCvar_t		cg_oldRocket;
-
-extern	vmCvar_t		cg_leiEnhancement;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiGoreNoise;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiBrassNoise;			// LEILEI'S LINE!
-extern	vmCvar_t		cg_leiSuperGoreyAwesome;	// LEILEI'S LINE!
 extern	vmCvar_t		cg_oldPlasma;
 extern	vmCvar_t		cg_trueLightning;
 extern	vmCvar_t		cg_music;
@@ -1858,5 +1818,3 @@ extern qboolean		initparticles;
 int CG_NewParticleArea ( int num );
 
 
-// LEILEI ENHANCEMENT
-
diff -rupN code-svn//cgame/.svn/text-base/cg_main.c.svn-base code//cgame/.svn/text-base/cg_main.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_main.c.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_main.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -185,10 +185,6 @@ vmCvar_t	cg_noTaunt;
 vmCvar_t	cg_noProjectileTrail;
 vmCvar_t	cg_oldRail;
 vmCvar_t	cg_oldRocket;
-vmCvar_t	cg_leiEnhancement;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiBrassNoise;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiGoreNoise;		// ANOTHER LEILEI LINE!!!
-vmCvar_t	cg_leiSuperGoreyAwesome;		// ANOTHER LEILEI LINE!!!
 vmCvar_t	cg_oldPlasma;
 vmCvar_t	cg_trueLightning;
 vmCvar_t        cg_music;
@@ -390,18 +386,14 @@ static cvarTable_t cvarTable[] = { // bk
 	{ &cg_cameraMode, "com_cameraMode", "0", CVAR_CHEAT},
 
 	{ &pmove_fixed, "pmove_fixed", "0", CVAR_SYSTEMINFO},
-	{ &pmove_msec, "pmove_msec", "11", CVAR_SYSTEMINFO},
-        { &pmove_float, "pmove_float", "1", CVAR_SYSTEMINFO},
+	{ &pmove_msec, "pmove_msec", "8", CVAR_SYSTEMINFO},
+        { &pmove_float, "pmove_float", "0", CVAR_SYSTEMINFO},
 	{ &cg_noTaunt, "cg_noTaunt", "0", CVAR_ARCHIVE},
 	{ &cg_noProjectileTrail, "cg_noProjectileTrail", "0", CVAR_ARCHIVE},
 	{ &cg_smallFont, "ui_smallFont", "0.25", CVAR_ARCHIVE},
 	{ &cg_bigFont, "ui_bigFont", "0.4", CVAR_ARCHIVE},
 	{ &cg_oldRail, "cg_oldRail", "0", CVAR_ARCHIVE},
 	{ &cg_oldRocket, "cg_oldRocket", "1", CVAR_ARCHIVE},
-	{ &cg_leiEnhancement, "cg_leiEnhancement", "0", CVAR_ARCHIVE},				// LEILEI default off (in case of whiner)
-	{ &cg_leiGoreNoise, "cg_leiGoreNoise", "0", CVAR_ARCHIVE},					// LEILEI 
-	{ &cg_leiBrassNoise, "cg_leiBrassNoise", "0", CVAR_ARCHIVE},				// LEILEI 
-	{ &cg_leiSuperGoreyAwesome, "cg_leiSuperGoreyAwesome", "0", CVAR_ARCHIVE},	// LEILEI 
 	{ &cg_oldPlasma, "cg_oldPlasma", "1", CVAR_ARCHIVE},
 //unlagged - client options
 	{ &cg_delag, "cg_delag", "0", CVAR_ARCHIVE | CVAR_USERINFO },
@@ -784,21 +776,6 @@ static void CG_RegisterSounds( void ) {
 	cgs.media.gibBounce2Sound = trap_S_RegisterSound( "sound/player/gibimp2.wav", qfalse );
 	cgs.media.gibBounce3Sound = trap_S_RegisterSound( "sound/player/gibimp3.wav", qfalse );
 
-
-	// LEILEI
-
-	cgs.media.lspl1Sound = trap_S_RegisterSound( "sound/le/splat1.wav", qfalse );
-	cgs.media.lspl2Sound = trap_S_RegisterSound( "sound/le/splat2.wav", qfalse );
-	cgs.media.lspl3Sound = trap_S_RegisterSound( "sound/le/splat3.wav", qfalse );
-
-	cgs.media.lbul1Sound = trap_S_RegisterSound( "sound/le/bullet1.wav", qfalse );
-	cgs.media.lbul2Sound = trap_S_RegisterSound( "sound/le/bullet2.wav", qfalse );
-	cgs.media.lbul3Sound = trap_S_RegisterSound( "sound/le/bullet3.wav", qfalse );
-
-	cgs.media.lshl1Sound = trap_S_RegisterSound( "sound/le/shell1.wav", qfalse );
-	cgs.media.lshl2Sound = trap_S_RegisterSound( "sound/le/shell2.wav", qfalse );
-	cgs.media.lshl3Sound = trap_S_RegisterSound( "sound/le/shell3.wav", qfalse );
-
 	cgs.media.useInvulnerabilitySound = trap_S_RegisterSound( "sound/items/invul_activate.wav", qfalse );
 	cgs.media.invulnerabilityImpactSound1 = trap_S_RegisterSound( "sound/items/invul_impact_01.wav", qfalse );
 	cgs.media.invulnerabilityImpactSound2 = trap_S_RegisterSound( "sound/items/invul_impact_02.wav", qfalse );
@@ -1194,21 +1171,6 @@ static void CG_RegisterGraphics( void )
 	cgs.media.medalAssist = trap_R_RegisterShaderNoMip( "medal_assist" );
 	cgs.media.medalCapture = trap_R_RegisterShaderNoMip( "medal_capture" );
 
-	// LEILEI SHADERS
-	cgs.media.lsmkShader1 = trap_R_RegisterShader("leismoke1" );
-	cgs.media.lsmkShader2 = trap_R_RegisterShader("leismoke2" );
-	cgs.media.lsmkShader3 = trap_R_RegisterShader("leismoke3" );
-	cgs.media.lsmkShader4 = trap_R_RegisterShader("leismoke4" );
-
-	cgs.media.lsplShader = trap_R_RegisterShader("leisplash" );
-	cgs.media.lspkShader1 = trap_R_RegisterShader("leispark" );
-	cgs.media.lspkShader2 = trap_R_RegisterShader("leispark2" );
-	cgs.media.lbumShader1 = trap_R_RegisterShader("leiboom1" );
-	cgs.media.lfblShader1 = trap_R_RegisterShader("leifball" );
-
-	cgs.media.lbldShader1 = trap_R_RegisterShader("leiblood1" );	
-	cgs.media.lbldShader2 = trap_R_RegisterShader("leiblood2" );	// this is a mark, by the way
-
 
 	memset( cg_items, 0, sizeof( cg_items ) );
 	memset( cg_weapons, 0, sizeof( cg_weapons ) );
@@ -2242,7 +2204,7 @@ void CG_FairCvars() {
         return; //Don't do anything in single player
     }
 
-    if(cgs.videoflags & VF_LOCK_CVARS_BASIC) {
+    if(cgs.fairflags & FF_LOCK_CVARS_BASIC) {
         //Lock basic cvars.
         trap_Cvar_VariableStringBuffer("r_subdivisions",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) > 80 ) {
@@ -2256,7 +2218,7 @@ void CG_FairCvars() {
         }
     }
 
-    if(cgs.videoflags & VF_LOCK_CVARS_EXTENDED) {
+    if(cgs.fairflags & FF_LOCK_CVARS_EXTENDED) {
         //Lock extended cvars.
         trap_Cvar_VariableStringBuffer("r_subdivisions",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) > 20 ) {
@@ -2301,7 +2263,7 @@ void CG_FairCvars() {
         }
     } 
 
-    if(cgs.videoflags & VF_LOCK_VERTEX) {
+    if(cgs.fairflags & FF_LOCK_VERTEX) {
         trap_Cvar_VariableStringBuffer("r_vertexlight",rendererinfos,sizeof(rendererinfos) );
         if(atoi( rendererinfos ) != 0 ) {
             trap_Cvar_Set("r_vertexlight","0");
diff -rupN code-svn//cgame/.svn/text-base/cg_marks.c.svn-base code//cgame/.svn/text-base/cg_marks.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_marks.c.svn-base	2009-12-03 13:43:06.000000000 +0100
+++ code//cgame/.svn/text-base/cg_marks.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -2272,168 +2272,3 @@ void CG_ParticleMisc (qhandle_t pshader,
 	p->rotate = qfalse;
 }
 
-
-
-
-
-// LEILEI ENHANCEMENT PARTICLE EFFECTS
-
-
-// sparks!
-// for small arms
-
-void CG_LeiSparks (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.8f;
-	p->alphavel = 0.8f;
-
-	p->height = 4;
-	p->width = 4;
-	p->endheight = 4;
-	p->endwidth = 4;
-
-	p->pshader = cgs.media.lspkShader1;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 35;
-	p->vel[1] = vel[1] * 35;
-	p->vel[2] = vel[2] * 85;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 44);
-	p->vel[1] += (crandom() * 44);
-	p->vel[2] += (75 + (crandom() * 190)) * speed;	
-
-	//	p->vel[0] += (crandom() * 24);
-	//p->vel[1] += (crandom() * 24);
-	//p->vel[2] += (20 + (crandom() * 180)) * speed;	
-
-		p->accel[0] = crandom()*6;
-		p->accel[1] = crandom()*6;
-		p->accel[2] = -PARTICLE_GRAVITY*7.2;
-	
-}
-
-// for explosions
-
-void CG_LeiSparks2 (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.8f;
-	p->alphavel = 0;
-
-	p->height = 9;
-	p->width = 9;
-	p->endheight = 16;
-	p->endwidth = 16;
-
-	p->pshader = cgs.media.lspkShader1;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 35;
-	p->vel[1] = vel[1] * 35;
-	p->vel[2] = vel[2] * 85;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 524);
-	p->vel[1] += (crandom() * 524);
-	p->vel[2] += (120 + (crandom() * 780)) * speed;	
-
-		p->accel[0] = crandom()*76;
-		p->accel[1] = crandom()*76;
-		p->accel[2] = crandom()*76;
-	
-	
-}
-
-// not so friendly water splash
-void CG_LeiSplash2 (vec3_t org, vec3_t vel, int duration, float x, float y, float speed)
-{
-	cparticle_t	*p;
-
-	if (!free_particles)
-		return;
-	p = free_particles;
-	free_particles = p->next;
-	p->next = active_particles;
-	active_particles = p;
-	p->time = cg.time;
-	
-	p->endtime = cg.time + duration;
-	p->startfade = cg.time + duration/2;
-	
-	p->color = EMISIVEFADE;
-	p->alpha = 0.9f;
-	p->alphavel = 0;
-
-	p->height = 4;
-	p->width = 4;
-	p->endheight = 2;
-	p->endwidth = 2;
-
-	p->pshader = cgs.media.lsplShader;
-
-	p->type = P_SMOKE;
-	
-	VectorCopy(org, p->org);
-
-	p->org[0] += (crandom() * x);
-	p->org[1] += (crandom() * y);
-
-	p->vel[0] = vel[0] * 44;
-	p->vel[1] = vel[1] * 44;
-	p->vel[2] = vel[2] * 872;
-
-	p->accel[0] = p->accel[1] = p->accel[2] = 0;
-
-	p->vel[0] += (crandom() * 4);
-	p->vel[1] += (crandom() * 4);
-	p->vel[2] += (20 + (crandom() * 10)) * speed;	
-
-		p->accel[0] = crandom()*3;
-		p->accel[1] = crandom()*3;
-		p->accel[2] = -PARTICLE_GRAVITY*4.2;
-	
-}
-
diff -rupN code-svn//cgame/.svn/text-base/cg_particles.c.svn-base code//cgame/.svn/text-base/cg_particles.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_particles.c.svn-base	2009-12-03 13:43:06.000000000 +0100
+++ code//cgame/.svn/text-base/cg_particles.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -2016,4 +2016,3 @@ void CG_ParticleMisc (qhandle_t pshader,
 
 	p->rotate = qfalse;
 }
-
diff -rupN code-svn//cgame/.svn/text-base/cg_predict.c.svn-base code//cgame/.svn/text-base/cg_predict.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_predict.c.svn-base	2009-12-03 13:43:06.000000000 +0100
+++ code//cgame/.svn/text-base/cg_predict.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -327,14 +327,12 @@ static void CG_TouchItem( centity_t *cen
 		if(cgs.redflag == TEAM_NONE)
 			return; //Can never pick if just one flag is NONE (because then the other is too)
 		if(item->giTag == PW_REDFLAG){ //at point A
-			if(cgs.redflag != cg.predictedPlayerState.persistant[PERS_TEAM]) //not already taken
-                            trap_S_StartLocalSound( cgs.media.hitSound , CHAN_ANNOUNCER );
-			return;
+			//if(cgs.redflag == cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
+				return;
 		}	
 		if(item->giTag == PW_BLUEFLAG){ //at point B
-			if(cgs.blueflag != cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
-                            trap_S_StartLocalSound( cgs.media.hitSound , CHAN_ANNOUNCER );
-			return;
+			//if(cgs.blueflag == cg.predictedPlayerState.persistant[PERS_TEAM]) //already taken
+				return;
 		}	
 	}
 
diff -rupN code-svn//cgame/.svn/text-base/cg_servercmds.c.svn-base code//cgame/.svn/text-base/cg_servercmds.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_servercmds.c.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_servercmds.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -327,7 +327,7 @@ void CG_ParseServerinfo( void ) {
 		cgs.ffa_gt = 1;
 	trap_Cvar_Set("g_gametype", va("%i", cgs.gametype));
 	cgs.dmflags = atoi( Info_ValueForKey( info, "dmflags" ) );
-        cgs.videoflags = atoi( Info_ValueForKey( info, "videoflags" ) );
+        cgs.fairflags = atoi( Info_ValueForKey( info, "fairflags" ) );
         cgs.elimflags = atoi( Info_ValueForKey( info, "elimflags" ) );
 	cgs.teamflags = atoi( Info_ValueForKey( info, "teamflags" ) );
 	cgs.fraglimit = atoi( Info_ValueForKey( info, "fraglimit" ) );
diff -rupN code-svn//cgame/.svn/text-base/cg_view.c.svn-base code//cgame/.svn/text-base/cg_view.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_view.c.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//cgame/.svn/text-base/cg_view.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -495,7 +495,7 @@ static int CG_CalcFov( void ) {
 			} else if ( fov_x > 160 ) {
 				fov_x = 160;
 			}
-                        if( (cgs.videoflags & VF_LOCK_CVARS_BASIC) && fov_x>140 )
+                        if( (cgs.fairflags & FF_LOCK_CVARS_BASIC) && fov_x>140 )
                             fov_x = 140;
 
 		}
@@ -512,7 +512,7 @@ static int CG_CalcFov( void ) {
                                 zoomFov = 160;
                         }
 
-                        if( (cgs.videoflags & VF_LOCK_CVARS_BASIC) && zoomFov>140 )
+                        if( (cgs.fairflags & FF_LOCK_CVARS_BASIC) && zoomFov>140 )
                                 zoomFov = 140;
                 }
 
diff -rupN code-svn//cgame/.svn/text-base/cg_weapons.c.svn-base code//cgame/.svn/text-base/cg_weapons.c.svn-base
--- code-svn//cgame/.svn/text-base/cg_weapons.c.svn-base	2009-12-03 13:43:06.000000000 +0100
+++ code//cgame/.svn/text-base/cg_weapons.c.svn-base	2009-11-14 15:55:49.000000000 +0100
@@ -95,8 +95,6 @@ static void CG_MachineGunEjectBrass( cen
 	le->leMarkType = LEMT_NONE;
 }
 
-
-
 /*
 ==========================
 CG_ShotgunEjectBrass
@@ -169,7 +167,7 @@ static void CG_ShotgunEjectBrass( centit
 		le->angles.trDelta[2] = 0;
 
 		le->leFlags = LEF_TUMBLE;
-		le->leBounceSoundType = LEBS_SHELL; // LEILEI shell noises
+		le->leBounceSoundType = LEBS_BRASS;
 		le->leMarkType = LEMT_NONE;
 	}
 }
@@ -327,10 +325,10 @@ void CG_RailTrail (clientInfo_t *ci, vec
 
 /*
 ==========================
-CG_OldRocketTrail	(for the crappy old rocket trail.)
+CG_RocketTrail
 ==========================
 */
-static void CG_OldRocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
+static void CG_RocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
 	int		step;
 	vec3_t	origin, lastPos;
 	int		t;
@@ -392,132 +390,6 @@ static void CG_OldRocketTrail( centity_t
 
 }
 
-/*
-==========================
-CG_LeiSmokeTrail 
-==========================
-*/
-
-static void CG_LeiSmokeTrail( centity_t *ent, const weaponInfo_t *wi ) {
-	int		step;
-	vec3_t	origin, lastPos;
-	int		t;
-	int		startTime, contents;
-	int		lastContents;
-	entityState_t	*es;
-	vec3_t	up;
-	localEntity_t	*smoke;
-	int		therando;
-	int		theradio;
-
-	if ( cg_noProjectileTrail.integer ) {
-		return;
-	}
-
-	up[0] = 5 - 10 * crandom();
-	up[1] = 5 - 10 * crandom();
-	up[2] = 8 - 5 * crandom();
-
-	step = 18;
-
-	es = &ent->currentState;
-	startTime = ent->trailTime;
-	t = step * ( (startTime + step) / step );
-
-	BG_EvaluateTrajectory( &es->pos, cg.time, origin );
-	contents = CG_PointContents( origin, -1 );
-
-	// if object (e.g. grenade) is stationary, don't toss up smoke
-	if ( es->pos.trType == TR_STATIONARY ) {
-		ent->trailTime = cg.time;
-		return;
-	}
-
-	BG_EvaluateTrajectory( &es->pos, ent->trailTime, lastPos );
-	lastContents = CG_PointContents( lastPos, -1 );
-
-	ent->trailTime = cg.time;
-
-	if ( contents & ( CONTENTS_WATER | CONTENTS_SLIME | CONTENTS_LAVA ) ) {
-		if ( contents & lastContents & CONTENTS_WATER ) {
-			CG_BubbleTrail( lastPos, origin, 8 );
-		}
-		return;
-	}
-
-	for ( ; t <= ent->trailTime ; t += step ) {
-		BG_EvaluateTrajectory( &es->pos, t, lastPos );
-		therando = crandom() * 4;
-		
-		theradio =  wi->trailRadius * (rand() * 0.7); // what is this doing here
-	if (therando == 3)		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader1 );
-	else if (therando == 1)		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader2 );
-	else	if (therando == 2)	smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader3 );
-	else				smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader4 );
-		// use the optimized local entity add
-		smoke->leType = LE_MOVE_SCALE_FADE;
-		//smoke->trType = TR_GRAVITY;
-	}
-
-}
-
-
-static void CG_LeiPlasmaTrail( centity_t *ent, const weaponInfo_t *wi ) {
-	int		step;
-	vec3_t	origin, lastPos;
-	int		t;
-	int		startTime, contents;
-	int		lastContents;
-	entityState_t	*es;
-	vec3_t	up;
-	localEntity_t	*smoke;
-	int		therando;
-	int		theradio;
-
-	if ( cg_noProjectileTrail.integer ) {
-		return;
-	}
-
-	up[0] = 0;
-	up[1] = 0;
-	up[2] = 0;
-
-	step = 16;
-
-	es = &ent->currentState;
-	startTime = ent->trailTime;
-	t = step * ( (startTime + step) / step );
-
-	BG_EvaluateTrajectory( &es->pos, cg.time, origin );
-	contents = CG_PointContents( origin, -1 );
-
-	// if object (e.g. grenade) is stationary, don't toss up smoke
-	if ( es->pos.trType == TR_STATIONARY ) {
-		ent->trailTime = cg.time;
-		return;
-	}
-
-	BG_EvaluateTrajectory( &es->pos, ent->trailTime, lastPos );
-	lastContents = CG_PointContents( lastPos, -1 );
-
-	ent->trailTime = cg.time;
-
-	if ( contents & ( CONTENTS_WATER | CONTENTS_SLIME | CONTENTS_LAVA ) ) {
-		return;
-	}
-
-	for ( ; t <= ent->trailTime ; t += step ) {
-		BG_EvaluateTrajectory( &es->pos, t, lastPos );
-
-		smoke = CG_SmokePuff( lastPos, up, 27, 1, 1, 1, 0.9f, wi->wiTrailTime,  t, 0, 0,  cgs.media.lsmkShader1 );
-		// use the optimized local entity add
-		smoke->leType = LE_SCALE_FADE;
-		//smoke->trType = TR_GRAVITY;
-	}
-
-}
-
-
 //#ifdef MISSIONPACK
 /*
 ==========================
@@ -592,7 +464,7 @@ static void CG_NailTrail( centity_t *ent
 CG_NailTrail
 ==========================
 */
-static void CG_OldPlasmaTrail( centity_t *cent, const weaponInfo_t *wi ) {
+static void CG_PlasmaTrail( centity_t *cent, const weaponInfo_t *wi ) {
 	localEntity_t	*le;
 	refEntity_t		*re;
 	entityState_t	*es;
@@ -662,7 +534,6 @@ static void CG_OldPlasmaTrail( centity_t
 	re->customShader = cgs.media.railRingsShader;
 	le->bounceFactor = 0.3f;
 
-
     re->shaderRGBA[0] = wi->flashDlightColor[0] * 63;
     re->shaderRGBA[1] = wi->flashDlightColor[1] * 63;
     re->shaderRGBA[2] = wi->flashDlightColor[2] * 63;
@@ -726,38 +597,10 @@ void CG_GrappleTrail( centity_t *ent, co
 CG_GrenadeTrail
 ==========================
 */
-// LEILEI enhancment
-static void CG_RocketTrail( centity_t *ent, const weaponInfo_t *wi ) {
-
-		if (cg_leiEnhancement.integer) {
-			CG_LeiSmokeTrail( ent, wi );
-		}
-		else
-		{	
-			CG_OldRocketTrail( ent, wi );
-		}
-}
-
-static void CG_PlasmaTrail( centity_t *ent, const weaponInfo_t *wi ) {
-
-		if (cg_leiEnhancement.integer) {
-			CG_LeiPlasmaTrail( ent, wi );
-		}
-		else
-		{	
-			CG_OldPlasmaTrail( ent, wi );
-		}
-}
-
-
 static void CG_GrenadeTrail( centity_t *ent, const weaponInfo_t *wi ) {
 	CG_RocketTrail( ent, wi );
 }
 
-	
-
-
-
 
 /*
 =================
@@ -2697,83 +2540,6 @@ void CG_FireWeapon( centity_t *cent ) {
 
 
 /*
-==========================
-CG_Explosionia LEILEI
-==========================
-
-static void CG_Explosionia ( centity_t *cent ) {
-	localEntity_t	*le;
-	ec3_t			velocity, xvelocity;
-	vec3_t			offset, xoffset;
-	float			waterScale = 1.0f;
-	vec3_t			v[3];
-
-	if ( cg_brassTime.integer <= 0 ) {
-		return;
-	}
-
-	le = CG_AllocLocalEntity();
-	
-
-	velocity[0] = -50 + 100 * crandom();
-	velocity[1] = -50 + 100 * crandom();
-	velocity[2] = -50 + 100 * crandom();
-
-	le->leType = LE_FALL_SCALE_FADE;
-	le->startTime = cg.time;
-	le->endTime = le->startTime + cg_brassTime.integer + ( cg_brassTime.integer / 4 ) * random();
-
-	//le->pos.trType = TR_GRAVITY;
-	le->pos.trTime = cg.time - (rand()&15);
-
-	AnglesToAxis( cent->lerpAngles, v );
-
-	offset[0] = 8;
-	offset[1] = -4;
-	offset[2] = 24;
-
-	xoffset[0] = offset[0] * v[0][0] + offset[1] * v[1][0] + offset[2] * v[2][0];
-	xoffset[1] = offset[0] * v[0][1] + offset[1] * v[1][1] + offset[2] * v[2][1];
-	xoffset[2] = offset[0] * v[0][2] + offset[1] * v[1][2] + offset[2] * v[2][2];
-	VectorAdd( cent->lerpOrigin, xoffset, re->origin );
-
-	VectorCopy( re->origin, le->pos.trBase );
-
-	if ( CG_PointContents( re->origin, -1 ) & CONTENTS_WATER ) {
-		waterScale = 0.10f;
-	}
-
-	xvelocity[0] = velocity[0] * v[0][0] + velocity[1] * v[1][0] + velocity[2] * v[2][0];
-	xvelocity[1] = velocity[0] * v[0][1] + velocity[1] * v[1][1] + velocity[2] * v[2][1];
-	xvelocity[2] = velocity[0] * v[0][2] + velocity[1] * v[1][2] + velocity[2] * v[2][2];
-	VectorScale( xvelocity, waterScale, le->pos.trDelta );
-
-	le->bounceFactor = 0.4 * waterScale;
-
-	le->angles.trType = TR_LINEAR;
-	le->angles.trTime = cg.time;
-	le->angles.trBase[0] = rand()&31;
-	le->angles.trBase[1] = rand()&31;
-	le->angles.trBase[2] = rand()&31;
-	le->angles.trDelta[0] = 2;
-	le->angles.trDelta[1] = 1;
-	le->angles.trDelta[2] = 0;
-	le = CG_SmokePuff( le->origin, le->velocity, 
-					  30,		// radius
-					  1, 1, 1, 1,	// color
-					  2000,		// trailTime
-					  cg.time,		// startTime
-					  0,		// fadeInTime
-					  0,		// flags
-					  cgs.media.lbumShader1 );
-	le->leFlags = LEF_TUMBLE;
-	le->leBounceSoundType = LEBS_NONE;
-	le->leMarkType = LEMT_NONE;
-}
-
-*/
-
-/*
 =================
 CG_MissileHitWall
 
@@ -2877,27 +2643,6 @@ void CG_MissileHitWall( int weapon, int
 
 			CG_ParticleExplosion( "explode1", sprOrg, sprVel, 1400, 20, 30 );
 		}
-			// LEILEI START enhancement
-		if (cg_leiEnhancement.integer) {
-			// some more fireball, fireball, fireball, fire fire!
-			VectorMA( origin, 2, dir, sprOrg );
-			VectorScale( dir, 0, sprVel );
-			lightColor[0] = 0.7;	// subtler explosion colors
-			lightColor[1] = 0.6;
-			lightColor[2] = 0.4;
-			//CG_Explosionia(self);
-		/*
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 177);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 13);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 111);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 74);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 15);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 19);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 11);
-			CG_LeiSparks(sprOrg, sprVel, 1400, 0, 0, 13);
-		*/
-		}
-			// LEILEI END enhancement
 		break;
 	case WP_RAILGUN:
 		mod = cgs.media.ringFlashModel;
@@ -3013,15 +2758,6 @@ CG_MissileHitPlayer
 =================
 */
 void CG_MissileHitPlayer( int weapon, vec3_t origin, vec3_t dir, int entityNum ) {
-// LEILEI ENHANCEMENT
-	if (cg_leiEnhancement.integer) {
-		CG_SmokePuff( origin, dir, 22, 1, 1, 1, 1.0f, 900, cg.time, 0, 0,  cgs.media.lbldShader1 );
-		CG_SpurtBlood( origin, dir, 1);
-		CG_SpurtBlood( origin, dir, 4);
-		CG_SpurtBlood( origin, dir, -12);
-		}
-
-	else
 	CG_Bleed( origin, entityNum );
 
 	// some weapons will make an explosion with the blood, while
@@ -3060,14 +2796,6 @@ static void CG_ShotgunPellet( vec3_t sta
 	trace_t		tr;
 	int sourceContentType, destContentType;
 
-// LEILEI ENHACNEMENT
-	localEntity_t	*smoke;
-	vec3_t	kapew;	
-	vec3_t  kapow;
-	int	therando;
-
-
-
 	CG_Trace( &tr, start, NULL, NULL, end, skipNum, MASK_SHOT );
 
 	sourceContentType = trap_CM_PointContents( start, 0 );
@@ -3083,39 +2811,11 @@ static void CG_ShotgunPellet( vec3_t sta
 
 		trap_CM_BoxTrace( &trace, end, start, NULL, NULL, 0, CONTENTS_WATER );
 		CG_BubbleTrail( start, trace.endpos, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				}
-// END LEIHANCMENET
 	} else if ( destContentType & CONTENTS_WATER ) {
 		trace_t trace;
 
 		trap_CM_BoxTrace( &trace, start, end, NULL, NULL, 0, CONTENTS_WATER );
 		CG_BubbleTrail( tr.endpos, trace.endpos, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				}
-// END LEIHANCMENET
 	}
 
 	if (  tr.surfaceFlags & SURF_NOIMPACT ) {
@@ -3131,36 +2831,8 @@ static void CG_ShotgunPellet( vec3_t sta
 		}
 		if ( tr.surfaceFlags & SURF_METALSTEPS ) {
 			CG_MissileHitWall( WP_SHOTGUN, 0, tr.endpos, tr.plane.normal, IMPACTSOUND_METAL );
-// LEILEI ENHANCEMENT
-			if (cg_leiEnhancement.integer) {
-					VectorCopy( tr.plane.normal, kapow );
-
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 7);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 3);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 1);
-				
-				}
-// END LEIHANCMENET
 		} else {
 			CG_MissileHitWall( WP_SHOTGUN, 0, tr.endpos, tr.plane.normal, IMPACTSOUND_DEFAULT );
-	
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-					VectorCopy( tr.plane.normal, kapow );
-
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 7);
-					CG_LeiSparks(tr.endpos, tr.plane.normal, 800, 0, 0, 2);
-					
-					smoke = CG_SmokePuff( tr.endpos, kapow, 21, 1, 1, 1, 0.9f, 1200, cg.time, 0, 0,  cgs.media.lsmkShader2 );
-					//smoke = CG_SmokePuff( tr.endpos, kapow, 21, 1, 1, 1, 0.9f, 1200, cg.time, 0, 0,  cgs.media.lbumShader1 );
-				}
-// END LEIHANCMENET
 		}
 	}
 }
@@ -3219,25 +2891,7 @@ void CG_ShotgunFire( entityState_t *es )
 		contents = trap_CM_PointContents( es->pos.trBase, 0 );
 		if ( !( contents & CONTENTS_WATER ) ) {
 			VectorSet( up, 0, 0, 8 );
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Shotgun puffy
-					VectorSet( up, 4, 4, 4 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader1 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader2 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader3 );
-					up[0] = up[0] * (crandom() * 22 + 44);	up[1] = up[1] * (crandom() * 22 + 44);	up[2] = up[2] * (crandom() * 22 + 44);
-					CG_SmokePuff( v, up, 14, 1, 1, 1, 0.4f, 900, cg.time, 0, 0,  cgs.media.lsmkShader4 );
-				}
-		else
-			
-// END LEIHANCMENET
-			
-CG_SmokePuff( v, up, 32, 1, 1, 1, 0.33f, 900, cg.time, 0, LEF_PUFF_DONT_SCALE, cgs.media.shotgunSmokePuffShader );
-
+			CG_SmokePuff( v, up, 32, 1, 1, 1, 0.33f, 900, cg.time, 0, LEF_PUFF_DONT_SCALE, cgs.media.shotgunSmokePuffShader );
 		}
 	}
 	CG_ShotgunPattern( es->pos.trBase, es->origin2, es->eventParm, es->otherEntityNum );
@@ -3382,15 +3036,6 @@ void CG_Bullet( vec3_t end, int sourceEn
 	trace_t trace;
 	int sourceContentType, destContentType;
 	vec3_t		start;
-// LEILEI ENHACNEMENT
-	localEntity_t	*smoke;
-	localEntity_t	*spark;
-	vec3_t	kapew;	
-	vec3_t  kapow;
-	int	therando;
-
-
-
 
 	// if the shooter is currently valid, calc a source point and possibly
 	// do trail effects
@@ -3407,44 +3052,11 @@ void CG_Bullet( vec3_t end, int sourceEn
 			else if ( ( sourceContentType & CONTENTS_WATER ) ) {
 				trap_CM_BoxTrace( &trace, end, start, NULL, NULL, 0, CONTENTS_WATER );
 				CG_BubbleTrail( start, trace.endpos, 32 );
-
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-				//	CG_LeiSplash2(trace.endpos, kapow, 900, 0, 0, 444);
-						
-				}
-// END LEIHANCMENET
-
-
 			}
 			// bubble trail from air into water
 			else if ( ( destContentType & CONTENTS_WATER ) ) {
 				trap_CM_BoxTrace( &trace, start, end, NULL, NULL, 0, CONTENTS_WATER );
 				CG_BubbleTrail( trace.endpos, end, 32 );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-				// Water Splash
-					VectorCopy( trace.plane.normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 22);
-					kapow[1] = kapow[1] * (crandom() * 22);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					smoke = CG_SmokePuff( trace.endpos, kapow, 14, 1, 1, 1, 1.0f, 400, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 6, 1, 1, 1, 1.0f, 200, cg.time, 0, 0,  cgs.media.lsplShader );
-					smoke = CG_SmokePuff( trace.endpos, kapow, 10, 1, 1, 1, 1.0f, 300, cg.time, 0, 0,  cgs.media.lsplShader );
-			//CG_LeiSplash2(trace.endpos, kapow, 500, 0, 0, 1);
-				}
-// END LEIHANCMENET
 			}
 
 			// draw a tracer
@@ -3456,58 +3068,9 @@ void CG_Bullet( vec3_t end, int sourceEn
 
 	// impact splash and mark
 	if ( flesh ) {
-// LEILEI ENHANCEMENT
-	if (cg_leiEnhancement.integer) {
-
-		
-						// Blood Hack
-				VectorCopy( normal, kapow );
-					
-				kapow[0] = kapow[0] * (crandom() * 65 + 37);
-				kapow[1] = kapow[1] * (crandom() * 65 + 37);
-				kapow[2] = kapow[2] * (crandom() * 65 + 37);
-				VectorCopy( kapow, kapew );
-
-				kapew[0] = kapew[0] * (crandom() * 2 + 37);
-				kapew[1] = kapew[1] * (crandom() * 2 + 37);
-				kapew[2] = kapew[2] * (crandom() * 2 + 37);
-
-		CG_SmokePuff( end, kapow, 6, 1, 1, 1, 1.0f, 600, cg.time, 0, 0,  cgs.media.lbldShader1 );
-		CG_SpurtBlood( end, kapow, 2);
-		CG_SpurtBlood( end, kapew, 1);
-if (cg_leiSuperGoreyAwesome.integer) {
-		CG_SpurtBlood( end, kapow, -2);
-			}
-		}
-
-	else
 		CG_Bleed( end, fleshEntityNum );
 	} else {
 		CG_MissileHitWall( WP_MACHINEGUN, 0, end, normal, IMPACTSOUND_DEFAULT );
-
-// LEILEI ENHANCEMENT
-				if (cg_leiEnhancement.integer) {
-
-				// Smoke puff
-					VectorCopy( normal, kapow );
-					
-					kapow[0] = kapow[0] * (crandom() * 65 + 37);
-					kapow[1] = kapow[1] * (crandom() * 65 + 37);
-					kapow[2] = kapow[2] * (crandom() * 65 + 37);
-					VectorCopy( kapow, kapew );
-
-					kapew[0] = kapew[0] * (crandom() * 65 + 37);
-					kapew[1] = kapew[1] * (crandom() * 65 + 37);
-					kapew[2] = kapew[2] * (crandom() * 65 + 37);
-
-
-					smoke = CG_SmokePuff( end, kapow, 14, 1, 1, 1, 1.0f, 600, cg.time, 0, 0,  cgs.media.lsmkShader1 );
-			//		CG_LeiSparks(end, normal, 600, 0, 0, 177);
-			//		CG_LeiSparks(end, normal, 600, 0, 0, 155);
-					CG_LeiSparks(end, normal, 600, 0, 0, 444);
-
-				}
-// END LEIHANCMENET
 	}
 
 }
diff -rupN code-svn//client/.svn/entries code//client/.svn/entries
--- code-svn//client/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//client/.svn/entries	2009-11-14 15:55:50.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/client
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 40a18cce237c9fead1fd482fc5087d5b
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//game/bg_public.h code//game/bg_public.h
--- code-svn//game/bg_public.h	2010-02-01 18:12:07.000000000 +0100
+++ code//game/bg_public.h	2009-11-14 15:55:47.000000000 +0100
@@ -696,10 +696,10 @@ qboolean	BG_CanItemBeGrabbed( int gamety
 #define DF_FIXED_FOV			16
 #define	DF_NO_FOOTSTEPS			32
 
-//g_videoflags->integer
-#define VF_LOCK_CVARS_BASIC             1
-#define VF_LOCK_CVARS_EXTENDED          2
-#define VF_LOCK_VERTEX                  4
+//g_fairflags->integer
+#define FF_LOCK_CVARS_BASIC             1
+#define FF_LOCK_CVARS_EXTENDED          2
+#define FF_LOCK_VERTEX                  4
 
 // g_elimflags->integer
 //This is used to signal the client that it cannot go to free spectator:
diff -rupN code-svn//game/g_client.c code//game/g_client.c
--- code-svn//game/g_client.c	2010-05-06 12:48:17.000000000 +0200
+++ code//game/g_client.c	2009-11-14 15:55:47.000000000 +0100
@@ -407,11 +407,6 @@ void CopyToBodyQue( gentity_t *ent ) {
 	body = level.bodyQue[ level.bodyQueIndex ];
 	level.bodyQueIndex = (level.bodyQueIndex + 1) % BODY_QUEUE_SIZE;
 
-        //Check if the next body has the kamikaze, in that case skip it.
-        for(i=0;(level.bodyQue[ level.bodyQueIndex ]->s.eFlags & EF_KAMIKAZE) && (i<10);i++) {
-            level.bodyQueIndex = (level.bodyQueIndex + 1) % BODY_QUEUE_SIZE;
-        }
-
 	trap_UnlinkEntity (body);
 
 	body->s = ent->s;
@@ -1523,7 +1518,7 @@ void motd (gentity_t *ent)
 	int fileLen;
 
 	strcpy (motd, "cp \"");
-	fileLen = trap_FS_FOpenFile(g_motdfile.string, &motdFile, FS_READ);
+	fileLen = trap_FS_FOpenFile("motd.cfg", &motdFile, FS_READ);
 	if(motdFile)
 	{
 		char * p;
diff -rupN code-svn//game/g_cmds.c code//game/g_cmds.c
--- code-svn//game/g_cmds.c	2009-12-03 13:43:04.000000000 +0100
+++ code//game/g_cmds.c	2009-11-14 15:55:47.000000000 +0100
@@ -744,7 +744,6 @@ void SetTeam( gentity_t *ent, char *s )
         if ( team == TEAM_FREE && level.FFALocked ) {
             trap_SendServerCommand( ent->client->ps.clientNum,
             "cp \"This Deathmatch has been locked by the Admin! \n\"" );
-            return;
         }
     }
 	//
diff -rupN code-svn//game/g_combat.c code//game/g_combat.c
--- code-svn//game/g_combat.c	2010-05-06 12:48:17.000000000 +0200
+++ code//game/g_combat.c	2009-11-14 15:55:47.000000000 +0100
@@ -526,7 +526,7 @@ void player_die( gentity_t *self, gentit
 	ent->s.otherEntityNum = self->s.number;
 	ent->s.otherEntityNum2 = killer;
         //Sago: Hmmm... generic? Can I transmit anything I like? Like if it is a team kill? Let's try
-        ent->s.generic1 = OnSameTeam (self, attacker);
+        ent->s.generic1 = OnSameTeam (self, self->enemy);
         if( !((g_gametype.integer==GT_ELIMINATION || g_gametype.integer==GT_CTF_ELIMINATION) && level.time < level.roundStartTime) )
             ent->r.svFlags = SVF_BROADCAST;	// send to everyone (if not an elimination gametype during active warmup)
         else
diff -rupN code-svn//game/g_local.h code//game/g_local.h
--- code-svn//game/g_local.h	2010-05-06 12:48:17.000000000 +0200
+++ code//game/g_local.h	2009-11-14 15:55:47.000000000 +0100
@@ -978,7 +978,7 @@ extern	vmCvar_t	g_maxGameClients;		// al
 extern	vmCvar_t	g_restarted;
 
 extern	vmCvar_t	g_dmflags;
-extern	vmCvar_t	g_videoflags;
+extern	vmCvar_t	g_fairflags;
 extern	vmCvar_t	g_elimflags;
 extern	vmCvar_t	g_voteflags;
 extern	vmCvar_t	g_fraglimit;
@@ -1000,7 +1000,6 @@ extern	vmCvar_t	g_weaponRespawn;
 extern	vmCvar_t	g_weaponTeamRespawn;
 extern	vmCvar_t	g_synchronousClients;
 extern	vmCvar_t	g_motd;
-extern	vmCvar_t	g_motdfile;
 extern	vmCvar_t	g_warmup;
 extern	vmCvar_t	g_doWarmup;
 extern	vmCvar_t	g_blood;
@@ -1076,9 +1075,6 @@ extern vmCvar_t         g_persistantpowe
 
 extern vmCvar_t        g_catchup; //Favors the week players
 
-extern vmCvar_t         g_autonextmap; //Autochange map
-extern vmCvar_t         g_mappools; //mappools to be used for autochange
-
 extern vmCvar_t        g_voteNames;
 extern vmCvar_t        g_voteGametypes;
 extern vmCvar_t        g_voteMinTimelimit;
diff -rupN code-svn//game/g_main.c code//game/g_main.c
--- code-svn//game/g_main.c	2010-05-06 12:48:17.000000000 +0200
+++ code//game/g_main.c	2009-11-14 15:55:47.000000000 +0100
@@ -40,7 +40,7 @@ gclient_t		g_clients[MAX_CLIENTS];
 
 vmCvar_t	g_gametype;
 vmCvar_t	g_dmflags;
-vmCvar_t        g_videoflags;
+vmCvar_t        g_fairflags;
 vmCvar_t	g_elimflags;
 vmCvar_t	g_voteflags;
 vmCvar_t	g_fraglimit;
@@ -65,7 +65,6 @@ vmCvar_t	g_debugAlloc;
 vmCvar_t	g_weaponRespawn;
 vmCvar_t	g_weaponTeamRespawn;
 vmCvar_t	g_motd;
-vmCvar_t        g_motdfile;
 vmCvar_t	g_synchronousClients;
 vmCvar_t	g_warmup;
 vmCvar_t	g_doWarmup;
@@ -140,9 +139,6 @@ vmCvar_t        g_persistantpowerups; //
 
 vmCvar_t        g_catchup; //Favors the week players
 
-vmCvar_t         g_autonextmap; //Autochange map
-vmCvar_t         g_mappools; //mappools to be used for autochange
-
 vmCvar_t        g_voteNames;
 vmCvar_t        g_voteGametypes;
 vmCvar_t        g_voteMinTimelimit;
@@ -206,7 +202,7 @@ static cvarTable_t		gameCvarTable[] = {
 
 	// change anytime vars
 	{ &g_dmflags, "dmflags", "0", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
-        { &g_videoflags, "videoflags", "7", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
+        { &g_fairflags, "fairflags", "7", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
         { &g_elimflags, "elimflags", "0", CVAR_SERVERINFO, 0, qfalse  },
         { &g_voteflags, "voteflags", "0", CVAR_SERVERINFO, 0, qfalse  },
 	{ &g_fraglimit, "fraglimit", "20", CVAR_SERVERINFO | CVAR_ARCHIVE | CVAR_NORESTART, 0, qtrue },
@@ -246,7 +242,6 @@ static cvarTable_t		gameCvarTable[] = {
 	{ &g_debugDamage, "g_debugDamage", "0", 0, 0, qfalse },
 	{ &g_debugAlloc, "g_debugAlloc", "0", 0, 0, qfalse },
 	{ &g_motd, "g_motd", "", 0, 0, qfalse },
-        { &g_motdfile, "g_motdfile", "motd.cfg", 0, 0, qfalse },
 	{ &g_blood, "com_blood", "1", 0, 0, qfalse },
 
 	{ &g_podiumDist, "g_podiumDist", "80", 0, 0, qfalse },
@@ -282,10 +277,10 @@ static cvarTable_t		gameCvarTable[] = {
 	{ &g_proxMineTimeout, "g_proxMineTimeout", "20000", 0, 0, qfalse },
 
 	{ &g_smoothClients, "g_smoothClients", "1", 0, 0, qfalse},
-	{ &pmove_fixed, "pmove_fixed", "0", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
+	{ &pmove_fixed, "pmove_fixed", "1", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
 	{ &pmove_msec, "pmove_msec", "11", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
 
-        { &pmove_float, "pmove_float", "1", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qtrue},
+        { &pmove_float, "pmove_float", "0", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qtrue},
 
 //unlagged - server options
 	{ &g_delagHitscan, "g_delagHitscan", "0", CVAR_ARCHIVE | CVAR_SERVERINFO, 0, qtrue },
@@ -346,9 +341,6 @@ static cvarTable_t		gameCvarTable[] = {
 
         { &g_catchup, "g_catchup", "0", CVAR_ARCHIVE | CVAR_NORESTART, 0, qtrue},
 
-        { &g_autonextmap, "g_autonextmap", "0", CVAR_ARCHIVE | CVAR_NORESTART, 0, qfalse},
-        { &g_mappools, "g_mappools", "0\\maps_dm.cfg\\1\\maps_tourney.cfg\\3\\maps_tdm.cfg\\4\\maps_ctf.cfg\\5\\maps_oneflag.cfg\\6\\maps_obelisk.cfg\
-\\7\\maps_harvester.cfg\\8\\maps_elimination.cfg\\9\\maps_ctf.cfg\\10\\maps_lms.cfg\\11\\maps_dd.cfg\\12\\maps_dom.cfg\\", CVAR_ARCHIVE | CVAR_NORESTART, 0, qfalse},
         { &g_humanplayers, "g_humanplayers", "0", CVAR_ROM | CVAR_NORESTART, 0, qfalse },
 //used for voIP
         { &g_redTeamClientNumbers, "g_redTeamClientNumbers", "0",CVAR_ROM, 0, qfalse },
@@ -1444,7 +1436,6 @@ void ExitLevel (void) {
 	gclient_t *cl;
 	char nextmap[MAX_STRING_CHARS];
 	char d1[MAX_STRING_CHARS];
-        char	serverinfo[MAX_INFO_STRING];
 
 	//bot interbreeding
 	BotInterbreedEndMatch();
@@ -1464,55 +1455,6 @@ void ExitLevel (void) {
 
 	trap_Cvar_VariableStringBuffer( "nextmap", nextmap, sizeof(nextmap) );
 	trap_Cvar_VariableStringBuffer( "d1", d1, sizeof(d1) );
-        
-        trap_GetServerinfo( serverinfo, sizeof( serverinfo ) );
-
-        //Here the game finds the nextmap if g_autonextmap is set
-        if(g_autonextmap.integer ) {
-            char filename[MAX_FILEPATH];
-            fileHandle_t file,mapfile;
-            //Look in g_mappools.string for the file to look for maps in
-            Q_strncpyz(filename,Info_ValueForKey(g_mappools.string, va("%i",g_gametype.integer)),MAX_FILEPATH);
-            //If we found a filename:
-            if(filename[0]) {
-                //Read the file:
-                int len = trap_FS_FOpenFile(filename, &file, FS_READ);
-                if(file) {
-                    char  buffer[4*1024]; // buffer to read file into
-                    char mapnames[1024][20]; // Array of mapnames in the map pool
-                    char *pointer;
-                    int choice, count=0; //The random choice from mapnames and count of mapnames
-                    int i;
-                    memset(&buffer,0,sizeof(buffer));
-                    trap_FS_Read(&buffer,sizeof(buffer),file);
-                    pointer = buffer;
-                    while ( qtrue ) {
-                        Q_strncpyz(mapnames[count],COM_Parse( &pointer ),20);
-                        if ( !mapnames[count][0] ) {
-                            break;
-                        }
-                        G_Printf("Mapname in mappool: %s\n",mapnames[count]);
-                        count++;
-                    }
-                    trap_FS_FCloseFile(file);
-                    //It is possible that the maps in the file read are flawed, so we try up to ten times:
-                    for(i=0;i<10;i++) {
-                        choice = rand()%count;
-                        if(!Q_stricmp(mapnames[choice],Info_ValueForKey(serverinfo,"mapname")))
-                            continue;
-                        //Now check that the map exists:
-                        trap_FS_FOpenFile(va("maps/%s.bsp",mapnames[choice]),&mapfile,FS_READ);
-                        if(mapfile) {
-                            G_Printf("Picked map number %i - %s\n",choice,mapnames[choice]);
-                            Q_strncpyz(nextmap,va("map %s",mapnames[choice]),sizeof(nextmap));
-                            trap_Cvar_Set("nextmap",nextmap);
-                            trap_FS_FCloseFile(mapfile);
-                            break;
-                        }
-                    }
-                }
-            }
-        }
 
 	if( !Q_stricmp( nextmap, "map_restart 0" ) && Q_stricmp( d1, "" ) ) {
 		trap_Cvar_Set( "nextmap", "vstr d2" );
@@ -2205,9 +2147,9 @@ void CheckElimination(void) {
 		}
 
 		//Time up
-		if((level.roundNumber==level.roundNumberStarted)&&(g_elimination_roundtime.integer)&&(level.time>=level.roundStartTime+1000*g_elimination_roundtime.integer))
+		if((level.roundNumber==level.roundNumberStarted)&&(level.time>=level.roundStartTime+1000*g_elimination_roundtime.integer))
 		{
-			trap_SendServerCommand( -1, "print \"No teams eliminated.\n\"");
+			trap_SendServerCommand( -1, "print \"No teams eliminated!\n\"");
 
 			if(level.roundBluePlayers != 0 && level.roundRedPlayers != 0) {//We don't want to divide by zero. (should not be possible)
 				if(g_gametype.integer == GT_CTF_ELIMINATION && g_elimination_ctf_oneway.integer) {
diff -rupN code-svn//game/.svn/all-wcprops code//game/.svn/all-wcprops
--- code-svn//game/.svn/all-wcprops	2010-05-06 12:48:17.000000000 +0200
+++ code//game/.svn/all-wcprops	2009-11-14 15:55:47.000000000 +0100
@@ -1,7 +1,7 @@
 K 25
 svn:wc:ra_dav:version-url
 V 33
-/svn/!svn/ver/206/trunk/code/game
+/svn/!svn/ver/180/trunk/code/game
 END
 g_syscalls.asm
 K 25
@@ -13,7 +13,7 @@ bg_alloc.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/184/trunk/code/game/bg_alloc.c
+/svn/!svn/ver/163/trunk/code/game/bg_alloc.c
 END
 g_syscalls.c
 K 25
@@ -31,7 +31,7 @@ g_local.h
 K 25
 svn:wc:ra_dav:version-url
 V 43
-/svn/!svn/ver/205/trunk/code/game/g_local.h
+/svn/!svn/ver/156/trunk/code/game/g_local.h
 END
 ai_cmd.c
 K 25
@@ -91,7 +91,7 @@ g_main.c
 K 25
 svn:wc:ra_dav:version-url
 V 42
-/svn/!svn/ver/206/trunk/code/game/g_main.c
+/svn/!svn/ver/175/trunk/code/game/g_main.c
 END
 g_bot.c
 K 25
@@ -163,7 +163,7 @@ g_cmds.c
 K 25
 svn:wc:ra_dav:version-url
 V 42
-/svn/!svn/ver/188/trunk/code/game/g_cmds.c
+/svn/!svn/ver/151/trunk/code/game/g_cmds.c
 END
 ai_main.c
 K 25
@@ -223,7 +223,7 @@ g_combat.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/203/trunk/code/game/g_combat.c
+/svn/!svn/ver/156/trunk/code/game/g_combat.c
 END
 g_cmds_ext.c
 K 25
@@ -235,7 +235,7 @@ g_playerstore.c
 K 25
 svn:wc:ra_dav:version-url
 V 49
-/svn/!svn/ver/184/trunk/code/game/g_playerstore.c
+/svn/!svn/ver/159/trunk/code/game/g_playerstore.c
 END
 ai_dmnet.c
 K 25
@@ -367,7 +367,7 @@ g_client.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/204/trunk/code/game/g_client.c
+/svn/!svn/ver/169/trunk/code/game/g_client.c
 END
 ai_chat.c
 K 25
@@ -379,7 +379,7 @@ bg_public.h
 K 25
 svn:wc:ra_dav:version-url
 V 45
-/svn/!svn/ver/191/trunk/code/game/bg_public.h
+/svn/!svn/ver/163/trunk/code/game/bg_public.h
 END
 ai_chat.h
 K 25
diff -rupN code-svn//game/.svn/entries code//game/.svn/entries
--- code-svn//game/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//game/.svn/entries	2009-11-14 15:55:47.000000000 +0100
@@ -1,14 +1,14 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/game
 http://oax.googlecode.com/svn
 
 
 
-2010-05-04T21:22:44.674953Z
-206
+2009-11-10T17:56:58.521420Z
+180
 sago007
 
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 32fd86734449f57aa9cd1c53093c14bf
 2009-05-15T14:51:36.914432Z
 3
@@ -66,10 +66,10 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 21aff0bb70a9997f31cda3b4f260574f
-2009-11-17T22:38:58.074993Z
-184
+2009-10-15T16:54:31.082351Z
+163
 sago007
 
 
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 52f88b0422907ace7b54549d548c475d
 2009-10-22T16:50:27.483520Z
 165
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 462d1e04b6c95732ccdd4c4865c20902
 2009-06-19T00:25:39.042992Z
 133
@@ -168,10 +168,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-27b638edb7eb7c34e7f295c6ed0da463
-2010-05-01T22:33:32.236566Z
-205
+2009-11-14T14:55:47.000000Z
+1a9c1f5bb812264bfb99981147effc71
+2009-10-04T12:49:24.570374Z
+156
 sago007
 
 
@@ -194,7 +194,7 @@ sago007
 
 
 
-48872
+48713
 
 ai_cmd.c
 file
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 985a10da160da6cf0095dcc490edf449
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 cb4ea90a2e143a92dca5f437564184d6
 2009-05-15T14:51:36.914432Z
 3
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 8ebcbbc2736f6dc9211d9122b6b9f17f
 2009-07-20T14:29:59.576377Z
 144
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 a20328b41958ecb399d6c3d20db24146
 2009-05-15T14:51:36.914432Z
 3
@@ -338,7 +338,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 cda67c71145966345d72e4fc2314272d
 2009-11-08T13:21:24.336301Z
 175
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 bb6cf76cf693b497cf319fa665661b7e
 2009-05-15T14:51:36.914432Z
 3
@@ -406,7 +406,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 617d49ca78539617e526f3cb3612129a
 2009-06-11T21:12:19.495033Z
 103
@@ -440,7 +440,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 7bdb1bd72ac78c1fd94a312de965afbf
 2009-06-19T00:25:39.042992Z
 133
@@ -474,7 +474,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 20348834e0f4bbd6f03687193eaa5652
 2009-05-15T14:51:36.914432Z
 3
@@ -508,7 +508,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 d09a84bc1532bd3b7559757459dd688b
 2009-10-15T16:54:31.082351Z
 163
@@ -542,10 +542,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-20ce5e4491ad744c76c86c9ec0411c68
-2010-05-04T21:22:44.674953Z
-206
+2009-11-14T14:55:47.000000Z
+eed0ee381ec0778428aaaba60ca6cb3f
+2009-11-08T13:21:24.336301Z
+175
 sago007
 
 
@@ -568,7 +568,7 @@ sago007
 
 
 
-86787
+83623
 
 bg_pmove.c
 file
@@ -576,7 +576,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 fd366d11601d556fbe22c53a01363bac
 2009-06-19T00:25:39.042992Z
 133
@@ -610,7 +610,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 cd9e0b5f93dad1d4c67602e6e5135a37
 2009-06-19T00:25:39.042992Z
 133
@@ -644,7 +644,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 167da59c738005f6a4575eb2cb9fbbe3
 2009-06-19T00:25:39.042992Z
 133
@@ -678,7 +678,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 96ef21ee9f46af9e4b3bab5e9845cde1
 2009-05-15T14:51:36.914432Z
 3
@@ -712,7 +712,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 99c31634dca226967db30031aa735688
 2009-05-15T14:51:36.914432Z
 3
@@ -746,7 +746,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 0979fd9332a52f95dfc9898d8d2a63f0
 2009-06-21T15:07:55.908754Z
 137
@@ -780,7 +780,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 c46e7b093de1d0e2e894c96b19661ce4
 2009-06-19T00:25:39.042992Z
 133
@@ -814,7 +814,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 a41c75653682f9783a73521beb687d47
 2009-07-11T12:51:34.671321Z
 142
@@ -848,7 +848,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 c430bb48a2f2a4ae4b5d9250f6917d81
 2009-06-19T00:25:39.042992Z
 133
@@ -882,7 +882,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 f46de409a09469706027842df1c7eba6
 2009-11-10T17:27:38.136002Z
 178
@@ -916,11 +916,11 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
-c0a5b44c48feda6234af81d8151fd1b3
-2009-11-18T03:55:23.740811Z
-188
-karl.kuglin
+2009-11-14T14:55:47.000000Z
+74afd61886283bfd4b3942f9e2eb9a83
+2009-09-22T15:22:20.066329Z
+151
+sago007
 
 
 
@@ -942,7 +942,7 @@ karl.kuglin
 
 
 
-65676
+65656
 
 ai_main.c
 file
@@ -950,7 +950,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 f9498105900acd8ff755a1b7eb248e9b
 2009-11-06T01:05:28.940332Z
 172
@@ -984,7 +984,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 3aa520e79a1328e50da563f25e5161fb
 2009-06-11T21:12:19.495033Z
 103
@@ -1018,7 +1018,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 1ed7f4e492396d05be13d7232c2f96f4
 2009-05-15T14:51:36.914432Z
 3
@@ -1052,7 +1052,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 5e59db416e1b542af9d14c8e9d5a89a7
 2009-06-09T23:59:08.693072Z
 95
@@ -1086,7 +1086,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 af60be3478f3ca9e5a83d06aebf16abf
 2009-05-15T14:51:36.914432Z
 3
@@ -1120,7 +1120,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 8580b8820ecca7b26a75ce257bd4be4d
 2009-05-15T14:51:36.914432Z
 3
@@ -1154,7 +1154,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 99c320e3c69b7aff7847bf42dce84003
 2009-09-22T15:22:20.066329Z
 151
@@ -1188,7 +1188,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 f8cbbefe221d666c21972ef74f88bd89
 2009-06-11T23:02:57.595809Z
 105
@@ -1222,7 +1222,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 eeb9bae3337076069e3da0f995c5f004
 2009-05-15T14:51:36.914432Z
 3
@@ -1256,10 +1256,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-0de4e15cd030aef7fbdc85b4a7e32235
-2010-04-29T16:02:53.433357Z
-203
+2009-11-14T14:55:47.000000Z
+018c944ca64569dee92cf76e498d05b5
+2009-10-04T12:49:24.570374Z
+156
 sago007
 
 
@@ -1282,7 +1282,7 @@ sago007
 
 
 
-43404
+43407
 
 g_cmds_ext.c
 file
@@ -1290,7 +1290,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 70b82d31498bcc490729c261443ee133
 2009-06-12T10:57:27.068074Z
 107
@@ -1324,10 +1324,10 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 086ca2eb6b4b456f1f04f07d56687494
-2009-11-17T22:38:58.074993Z
-184
+2009-10-11T18:20:14.001633Z
+159
 sago007
 
 
@@ -1358,7 +1358,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 9b219047371ca4a4c5d2325fe60e0508
 2009-05-15T14:51:36.914432Z
 3
@@ -1392,7 +1392,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 b69ab350fda01f902726d5b169320a99
 2009-05-15T14:51:36.914432Z
 3
@@ -1426,7 +1426,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 10aa08846fdaa884684db8ff136b622f
 2009-05-24T22:17:08.648635Z
 28
@@ -1460,7 +1460,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 64dbaf43359df6626b7f725fa376928b
 2009-06-11T21:12:19.495033Z
 103
@@ -1494,7 +1494,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 64ee1ffec75cbcecc8330a103a1860fc
 2009-06-11T16:53:48.397191Z
 100
@@ -1528,7 +1528,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 1d5c1c2f21252095e7d10e7e11b36c45
 2009-06-11T21:12:19.495033Z
 103
@@ -1562,7 +1562,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 6b63304b6274d0260d629f09a9da301c
 2009-11-10T17:56:58.521420Z
 180
@@ -1596,7 +1596,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 d1b6aa8c556cda5bf92cc6842d8be204
 2009-06-14T03:45:02.540795Z
 123
@@ -1630,7 +1630,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 045398a8fb4a27c16c1a2bd0fe0b0f10
 2009-06-19T00:25:39.042992Z
 133
@@ -1664,7 +1664,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 bd5baffcd7e0ae758d8e37f4f901420a
 2009-05-15T14:51:36.914432Z
 3
@@ -1698,7 +1698,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 0f2ae7783f77e0f2cb05915b560f7abe
 2009-05-15T14:51:36.914432Z
 3
@@ -1732,7 +1732,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 9fe121760152926098308d15052a0f51
 2009-06-11T16:53:48.397191Z
 100
@@ -1766,7 +1766,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 7b2751f54bff19de40dac6dc39382847
 2009-06-14T03:45:02.540795Z
 123
@@ -1800,7 +1800,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 699fb87d848fc8ded3116f1d00ee9672
 2009-05-15T14:51:36.914432Z
 3
@@ -1834,7 +1834,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 200f46920a962451a895a34a20d02ef7
 2009-06-11T21:12:19.495033Z
 103
@@ -1868,7 +1868,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 f30abf18d9b9b94511894a3dea65bc88
 2009-05-15T14:51:36.914432Z
 3
@@ -1902,7 +1902,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 df47a9d88a3a1d40c3747795ed45d805
 2009-06-11T23:02:57.595809Z
 105
@@ -1936,7 +1936,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 8492701191f66967f36a72adce8a4aca
 2009-06-11T21:12:19.495033Z
 103
@@ -1970,7 +1970,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 d0cbae79ba9cc11fd3f905da8922eb60
 2009-06-11T16:53:48.397191Z
 100
@@ -2004,7 +2004,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 26a41b2a9ef5ed969a88ae679e3bfffa
 2009-10-22T16:50:27.483520Z
 165
@@ -2038,7 +2038,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 fb7156dfb27513df88dc014ca3bb2c1a
 2009-10-22T16:50:27.483520Z
 165
@@ -2072,10 +2072,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-262f78fe74941c902db6d04ea9ebd280
-2010-05-01T18:55:06.916419Z
-204
+2009-11-14T14:55:47.000000Z
+59df7de006fa62da36402b3e0b596de7
+2009-10-24T09:54:24.256532Z
+169
 sago007
 
 
@@ -2098,7 +2098,7 @@ sago007
 
 
 
-62073
+61810
 
 ai_chat.c
 file
@@ -2106,7 +2106,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 73041d0a1477d8a509fbff9211185e00
 2009-06-22T17:35:03.506265Z
 141
@@ -2140,10 +2140,10 @@ file
 
 
 
-2010-02-01T17:12:07.000000Z
-b6312e359b614bd349ba7156f8830f0d
-2010-01-03T11:04:30.406977Z
-191
+2009-11-14T14:55:47.000000Z
+df6b758bd34b0da7fd513df8e0bde523
+2009-10-15T16:54:31.082351Z
+163
 sago007
 
 
@@ -2166,7 +2166,7 @@ sago007
 
 
 
-21249
+21248
 
 ai_chat.h
 file
@@ -2174,7 +2174,7 @@ file
 
 
 
-2009-12-03T12:43:04.000000Z
+2009-11-14T14:55:47.000000Z
 4fd47f62bda009bf78a2a0e1428662ce
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//game/.svn/text-base/bg_public.h.svn-base code//game/.svn/text-base/bg_public.h.svn-base
--- code-svn//game/.svn/text-base/bg_public.h.svn-base	2010-02-01 18:12:07.000000000 +0100
+++ code//game/.svn/text-base/bg_public.h.svn-base	2009-11-14 15:55:47.000000000 +0100
@@ -696,10 +696,10 @@ qboolean	BG_CanItemBeGrabbed( int gamety
 #define DF_FIXED_FOV			16
 #define	DF_NO_FOOTSTEPS			32
 
-//g_videoflags->integer
-#define VF_LOCK_CVARS_BASIC             1
-#define VF_LOCK_CVARS_EXTENDED          2
-#define VF_LOCK_VERTEX                  4
+//g_fairflags->integer
+#define FF_LOCK_CVARS_BASIC             1
+#define FF_LOCK_CVARS_EXTENDED          2
+#define FF_LOCK_VERTEX                  4
 
 // g_elimflags->integer
 //This is used to signal the client that it cannot go to free spectator:
diff -rupN code-svn//game/.svn/text-base/g_client.c.svn-base code//game/.svn/text-base/g_client.c.svn-base
--- code-svn//game/.svn/text-base/g_client.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//game/.svn/text-base/g_client.c.svn-base	2009-11-14 15:55:47.000000000 +0100
@@ -407,11 +407,6 @@ void CopyToBodyQue( gentity_t *ent ) {
 	body = level.bodyQue[ level.bodyQueIndex ];
 	level.bodyQueIndex = (level.bodyQueIndex + 1) % BODY_QUEUE_SIZE;
 
-        //Check if the next body has the kamikaze, in that case skip it.
-        for(i=0;(level.bodyQue[ level.bodyQueIndex ]->s.eFlags & EF_KAMIKAZE) && (i<10);i++) {
-            level.bodyQueIndex = (level.bodyQueIndex + 1) % BODY_QUEUE_SIZE;
-        }
-
 	trap_UnlinkEntity (body);
 
 	body->s = ent->s;
@@ -1523,7 +1518,7 @@ void motd (gentity_t *ent)
 	int fileLen;
 
 	strcpy (motd, "cp \"");
-	fileLen = trap_FS_FOpenFile(g_motdfile.string, &motdFile, FS_READ);
+	fileLen = trap_FS_FOpenFile("motd.cfg", &motdFile, FS_READ);
 	if(motdFile)
 	{
 		char * p;
diff -rupN code-svn//game/.svn/text-base/g_cmds.c.svn-base code//game/.svn/text-base/g_cmds.c.svn-base
--- code-svn//game/.svn/text-base/g_cmds.c.svn-base	2009-12-03 13:43:03.000000000 +0100
+++ code//game/.svn/text-base/g_cmds.c.svn-base	2009-11-14 15:55:46.000000000 +0100
@@ -744,7 +744,6 @@ void SetTeam( gentity_t *ent, char *s )
         if ( team == TEAM_FREE && level.FFALocked ) {
             trap_SendServerCommand( ent->client->ps.clientNum,
             "cp \"This Deathmatch has been locked by the Admin! \n\"" );
-            return;
         }
     }
 	//
diff -rupN code-svn//game/.svn/text-base/g_combat.c.svn-base code//game/.svn/text-base/g_combat.c.svn-base
--- code-svn//game/.svn/text-base/g_combat.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//game/.svn/text-base/g_combat.c.svn-base	2009-11-14 15:55:46.000000000 +0100
@@ -526,7 +526,7 @@ void player_die( gentity_t *self, gentit
 	ent->s.otherEntityNum = self->s.number;
 	ent->s.otherEntityNum2 = killer;
         //Sago: Hmmm... generic? Can I transmit anything I like? Like if it is a team kill? Let's try
-        ent->s.generic1 = OnSameTeam (self, attacker);
+        ent->s.generic1 = OnSameTeam (self, self->enemy);
         if( !((g_gametype.integer==GT_ELIMINATION || g_gametype.integer==GT_CTF_ELIMINATION) && level.time < level.roundStartTime) )
             ent->r.svFlags = SVF_BROADCAST;	// send to everyone (if not an elimination gametype during active warmup)
         else
diff -rupN code-svn//game/.svn/text-base/g_local.h.svn-base code//game/.svn/text-base/g_local.h.svn-base
--- code-svn//game/.svn/text-base/g_local.h.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//game/.svn/text-base/g_local.h.svn-base	2009-11-14 15:55:45.000000000 +0100
@@ -978,7 +978,7 @@ extern	vmCvar_t	g_maxGameClients;		// al
 extern	vmCvar_t	g_restarted;
 
 extern	vmCvar_t	g_dmflags;
-extern	vmCvar_t	g_videoflags;
+extern	vmCvar_t	g_fairflags;
 extern	vmCvar_t	g_elimflags;
 extern	vmCvar_t	g_voteflags;
 extern	vmCvar_t	g_fraglimit;
@@ -1000,7 +1000,6 @@ extern	vmCvar_t	g_weaponRespawn;
 extern	vmCvar_t	g_weaponTeamRespawn;
 extern	vmCvar_t	g_synchronousClients;
 extern	vmCvar_t	g_motd;
-extern	vmCvar_t	g_motdfile;
 extern	vmCvar_t	g_warmup;
 extern	vmCvar_t	g_doWarmup;
 extern	vmCvar_t	g_blood;
@@ -1076,9 +1075,6 @@ extern vmCvar_t         g_persistantpowe
 
 extern vmCvar_t        g_catchup; //Favors the week players
 
-extern vmCvar_t         g_autonextmap; //Autochange map
-extern vmCvar_t         g_mappools; //mappools to be used for autochange
-
 extern vmCvar_t        g_voteNames;
 extern vmCvar_t        g_voteGametypes;
 extern vmCvar_t        g_voteMinTimelimit;
diff -rupN code-svn//game/.svn/text-base/g_main.c.svn-base code//game/.svn/text-base/g_main.c.svn-base
--- code-svn//game/.svn/text-base/g_main.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//game/.svn/text-base/g_main.c.svn-base	2009-11-14 15:55:45.000000000 +0100
@@ -40,7 +40,7 @@ gclient_t		g_clients[MAX_CLIENTS];
 
 vmCvar_t	g_gametype;
 vmCvar_t	g_dmflags;
-vmCvar_t        g_videoflags;
+vmCvar_t        g_fairflags;
 vmCvar_t	g_elimflags;
 vmCvar_t	g_voteflags;
 vmCvar_t	g_fraglimit;
@@ -65,7 +65,6 @@ vmCvar_t	g_debugAlloc;
 vmCvar_t	g_weaponRespawn;
 vmCvar_t	g_weaponTeamRespawn;
 vmCvar_t	g_motd;
-vmCvar_t        g_motdfile;
 vmCvar_t	g_synchronousClients;
 vmCvar_t	g_warmup;
 vmCvar_t	g_doWarmup;
@@ -140,9 +139,6 @@ vmCvar_t        g_persistantpowerups; //
 
 vmCvar_t        g_catchup; //Favors the week players
 
-vmCvar_t         g_autonextmap; //Autochange map
-vmCvar_t         g_mappools; //mappools to be used for autochange
-
 vmCvar_t        g_voteNames;
 vmCvar_t        g_voteGametypes;
 vmCvar_t        g_voteMinTimelimit;
@@ -206,7 +202,7 @@ static cvarTable_t		gameCvarTable[] = {
 
 	// change anytime vars
 	{ &g_dmflags, "dmflags", "0", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
-        { &g_videoflags, "videoflags", "7", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
+        { &g_fairflags, "fairflags", "7", CVAR_SERVERINFO | CVAR_ARCHIVE, 0, qtrue  },
         { &g_elimflags, "elimflags", "0", CVAR_SERVERINFO, 0, qfalse  },
         { &g_voteflags, "voteflags", "0", CVAR_SERVERINFO, 0, qfalse  },
 	{ &g_fraglimit, "fraglimit", "20", CVAR_SERVERINFO | CVAR_ARCHIVE | CVAR_NORESTART, 0, qtrue },
@@ -246,7 +242,6 @@ static cvarTable_t		gameCvarTable[] = {
 	{ &g_debugDamage, "g_debugDamage", "0", 0, 0, qfalse },
 	{ &g_debugAlloc, "g_debugAlloc", "0", 0, 0, qfalse },
 	{ &g_motd, "g_motd", "", 0, 0, qfalse },
-        { &g_motdfile, "g_motdfile", "motd.cfg", 0, 0, qfalse },
 	{ &g_blood, "com_blood", "1", 0, 0, qfalse },
 
 	{ &g_podiumDist, "g_podiumDist", "80", 0, 0, qfalse },
@@ -282,10 +277,10 @@ static cvarTable_t		gameCvarTable[] = {
 	{ &g_proxMineTimeout, "g_proxMineTimeout", "20000", 0, 0, qfalse },
 
 	{ &g_smoothClients, "g_smoothClients", "1", 0, 0, qfalse},
-	{ &pmove_fixed, "pmove_fixed", "0", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
+	{ &pmove_fixed, "pmove_fixed", "1", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
 	{ &pmove_msec, "pmove_msec", "11", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qfalse},
 
-        { &pmove_float, "pmove_float", "1", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qtrue},
+        { &pmove_float, "pmove_float", "0", CVAR_SYSTEMINFO | CVAR_ARCHIVE, 0, qtrue},
 
 //unlagged - server options
 	{ &g_delagHitscan, "g_delagHitscan", "0", CVAR_ARCHIVE | CVAR_SERVERINFO, 0, qtrue },
@@ -346,9 +341,6 @@ static cvarTable_t		gameCvarTable[] = {
 
         { &g_catchup, "g_catchup", "0", CVAR_ARCHIVE | CVAR_NORESTART, 0, qtrue},
 
-        { &g_autonextmap, "g_autonextmap", "0", CVAR_ARCHIVE | CVAR_NORESTART, 0, qfalse},
-        { &g_mappools, "g_mappools", "0\\maps_dm.cfg\\1\\maps_tourney.cfg\\3\\maps_tdm.cfg\\4\\maps_ctf.cfg\\5\\maps_oneflag.cfg\\6\\maps_obelisk.cfg\
-\\7\\maps_harvester.cfg\\8\\maps_elimination.cfg\\9\\maps_ctf.cfg\\10\\maps_lms.cfg\\11\\maps_dd.cfg\\12\\maps_dom.cfg\\", CVAR_ARCHIVE | CVAR_NORESTART, 0, qfalse},
         { &g_humanplayers, "g_humanplayers", "0", CVAR_ROM | CVAR_NORESTART, 0, qfalse },
 //used for voIP
         { &g_redTeamClientNumbers, "g_redTeamClientNumbers", "0",CVAR_ROM, 0, qfalse },
@@ -1444,7 +1436,6 @@ void ExitLevel (void) {
 	gclient_t *cl;
 	char nextmap[MAX_STRING_CHARS];
 	char d1[MAX_STRING_CHARS];
-        char	serverinfo[MAX_INFO_STRING];
 
 	//bot interbreeding
 	BotInterbreedEndMatch();
@@ -1464,55 +1455,6 @@ void ExitLevel (void) {
 
 	trap_Cvar_VariableStringBuffer( "nextmap", nextmap, sizeof(nextmap) );
 	trap_Cvar_VariableStringBuffer( "d1", d1, sizeof(d1) );
-        
-        trap_GetServerinfo( serverinfo, sizeof( serverinfo ) );
-
-        //Here the game finds the nextmap if g_autonextmap is set
-        if(g_autonextmap.integer ) {
-            char filename[MAX_FILEPATH];
-            fileHandle_t file,mapfile;
-            //Look in g_mappools.string for the file to look for maps in
-            Q_strncpyz(filename,Info_ValueForKey(g_mappools.string, va("%i",g_gametype.integer)),MAX_FILEPATH);
-            //If we found a filename:
-            if(filename[0]) {
-                //Read the file:
-                int len = trap_FS_FOpenFile(filename, &file, FS_READ);
-                if(file) {
-                    char  buffer[4*1024]; // buffer to read file into
-                    char mapnames[1024][20]; // Array of mapnames in the map pool
-                    char *pointer;
-                    int choice, count=0; //The random choice from mapnames and count of mapnames
-                    int i;
-                    memset(&buffer,0,sizeof(buffer));
-                    trap_FS_Read(&buffer,sizeof(buffer),file);
-                    pointer = buffer;
-                    while ( qtrue ) {
-                        Q_strncpyz(mapnames[count],COM_Parse( &pointer ),20);
-                        if ( !mapnames[count][0] ) {
-                            break;
-                        }
-                        G_Printf("Mapname in mappool: %s\n",mapnames[count]);
-                        count++;
-                    }
-                    trap_FS_FCloseFile(file);
-                    //It is possible that the maps in the file read are flawed, so we try up to ten times:
-                    for(i=0;i<10;i++) {
-                        choice = rand()%count;
-                        if(!Q_stricmp(mapnames[choice],Info_ValueForKey(serverinfo,"mapname")))
-                            continue;
-                        //Now check that the map exists:
-                        trap_FS_FOpenFile(va("maps/%s.bsp",mapnames[choice]),&mapfile,FS_READ);
-                        if(mapfile) {
-                            G_Printf("Picked map number %i - %s\n",choice,mapnames[choice]);
-                            Q_strncpyz(nextmap,va("map %s",mapnames[choice]),sizeof(nextmap));
-                            trap_Cvar_Set("nextmap",nextmap);
-                            trap_FS_FCloseFile(mapfile);
-                            break;
-                        }
-                    }
-                }
-            }
-        }
 
 	if( !Q_stricmp( nextmap, "map_restart 0" ) && Q_stricmp( d1, "" ) ) {
 		trap_Cvar_Set( "nextmap", "vstr d2" );
@@ -2205,9 +2147,9 @@ void CheckElimination(void) {
 		}
 
 		//Time up
-		if((level.roundNumber==level.roundNumberStarted)&&(g_elimination_roundtime.integer)&&(level.time>=level.roundStartTime+1000*g_elimination_roundtime.integer))
+		if((level.roundNumber==level.roundNumberStarted)&&(level.time>=level.roundStartTime+1000*g_elimination_roundtime.integer))
 		{
-			trap_SendServerCommand( -1, "print \"No teams eliminated.\n\"");
+			trap_SendServerCommand( -1, "print \"No teams eliminated!\n\"");
 
 			if(level.roundBluePlayers != 0 && level.roundRedPlayers != 0) {//We don't want to divide by zero. (should not be possible)
 				if(g_gametype.integer == GT_CTF_ELIMINATION && g_elimination_ctf_oneway.integer) {
diff -rupN code-svn//q3_ui/.svn/all-wcprops code//q3_ui/.svn/all-wcprops
--- code-svn//q3_ui/.svn/all-wcprops	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/.svn/all-wcprops	2009-11-14 15:55:43.000000000 +0100
@@ -1,7 +1,7 @@
 K 25
 svn:wc:ra_dav:version-url
 V 34
-/svn/!svn/ver/201/trunk/code/q3_ui
+/svn/!svn/ver/171/trunk/code/q3_ui
 END
 ui_firstconnect.c
 K 25
@@ -37,7 +37,7 @@ ui_menu.c
 K 25
 svn:wc:ra_dav:version-url
 V 44
-/svn/!svn/ver/201/trunk/code/q3_ui/ui_menu.c
+/svn/!svn/ver/148/trunk/code/q3_ui/ui_menu.c
 END
 ui_display.c
 K 25
@@ -61,7 +61,7 @@ ui_servers2.c
 K 25
 svn:wc:ra_dav:version-url
 V 48
-/svn/!svn/ver/196/trunk/code/q3_ui/ui_servers2.c
+/svn/!svn/ver/162/trunk/code/q3_ui/ui_servers2.c
 END
 ui_rankings.c
 K 25
@@ -183,18 +183,18 @@ svn:wc:ra_dav:version-url
 V 44
 /svn/!svn/ver/67/trunk/code/q3_ui/ui_local.h
 END
-ui_mfield.c
-K 25
-svn:wc:ra_dav:version-url
-V 44
-/svn/!svn/ver/3/trunk/code/q3_ui/ui_mfield.c
-END
 ui_votemenu_fraglimit.c
 K 25
 svn:wc:ra_dav:version-url
 V 58
 /svn/!svn/ver/148/trunk/code/q3_ui/ui_votemenu_fraglimit.c
 END
+ui_mfield.c
+K 25
+svn:wc:ra_dav:version-url
+V 44
+/svn/!svn/ver/3/trunk/code/q3_ui/ui_mfield.c
+END
 ui_password.c
 K 25
 svn:wc:ra_dav:version-url
@@ -324,8 +324,8 @@ END
 ui_credits.c
 K 25
 svn:wc:ra_dav:version-url
-V 47
-/svn/!svn/ver/201/trunk/code/q3_ui/ui_credits.c
+V 45
+/svn/!svn/ver/3/trunk/code/q3_ui/ui_credits.c
 END
 ui_cdkey.c
 K 25
diff -rupN code-svn//q3_ui/.svn/entries code//q3_ui/.svn/entries
--- code-svn//q3_ui/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//q3_ui/.svn/entries	2009-11-14 15:55:43.000000000 +0100
@@ -1,14 +1,14 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/q3_ui
 http://oax.googlecode.com/svn
 
 
 
-2010-04-25T11:01:53.485090Z
-201
+2009-11-01T20:48:14.907070Z
+171
 sago007
 
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 b71ebf6a6ec9710cf622d83baea56861
 2009-09-21T20:36:23.597455Z
 148
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 0ed0a58c4f6176a5da345cf0aad4c5a5
 2009-10-24T10:18:41.602373Z
 170
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 74d27bd3f6e14c0f3c35d03ec91251fc
 2009-09-21T20:36:23.597455Z
 148
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 b36349bd8956c1d5b63afb881b505504
 2009-09-28T16:00:35.579262Z
 152
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 450052cb3839533e0a28e0c56f4762de
 2009-09-21T20:36:23.597455Z
 148
@@ -202,10 +202,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-176ca724ab55653673d635ef0cc28684
-2010-04-25T11:01:53.485090Z
-201
+2009-11-14T14:55:43.000000Z
+56b789f6dae761afdb76bb35a1ee68b0
+2009-09-21T20:36:23.597455Z
+148
 sago007
 
 
@@ -228,7 +228,7 @@ sago007
 
 
 
-12103
+12068
 
 ui_display.c
 file
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 028d1f97869e8a35af574fbb0f9c6ff7
 2009-09-21T20:36:23.597455Z
 148
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 ba100806585a21c920384f6d466a805f
 2009-09-21T20:36:23.597455Z
 148
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 01981a0e1b05facafcfdafebdbdd0212
 2009-05-15T14:51:36.914432Z
 3
@@ -338,10 +338,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-7c60fe118e31df2603fad53493a7e5c4
-2010-02-14T11:58:59.531572Z
-196
+2009-11-14T14:55:43.000000Z
+6a4596113f10a959848d890695caac0e
+2009-10-11T21:26:31.640368Z
+162
 sago007
 
 
@@ -364,7 +364,7 @@ sago007
 
 
 
-51099
+50602
 
 ui_rankings.c
 file
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 4b73653436fc30bf93e0943f16133d50
 2009-09-21T20:36:23.597455Z
 148
@@ -406,7 +406,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 9a1dd41aa2565ff2dcafa6a07356e8d0
 2009-09-21T20:36:23.597455Z
 148
@@ -440,7 +440,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 69cdbe6909f7d0b5737b7d773395b77b
 2009-09-28T16:00:35.579262Z
 152
@@ -474,7 +474,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 2dcae9d414bd58a4eb3ea8bbb25f7685
 2009-09-21T20:36:23.597455Z
 148
@@ -508,7 +508,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 f1875eb9b5b46b765f809c229ba4f87d
 2009-09-21T20:36:23.597455Z
 148
@@ -542,7 +542,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 7f7a0d3884fcdd3d9964e7ffb1cb0c1c
 2009-05-15T14:51:36.914432Z
 3
@@ -570,16 +570,16 @@ sago007
 
 26336
 
-ui_main.c
+ui_startserver.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-1084144795954a89172a45b9571e3838
-2009-05-15T14:51:36.914432Z
-3
+2009-11-14T14:55:43.000000Z
+ab52f713e14cbd2dbf30adc196c01558
+2009-11-01T20:48:14.907070Z
+171
 sago007
 
 
@@ -602,18 +602,18 @@ sago007
 
 
 
-9580
+75390
 
-ui_startserver.c
+ui_main.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-ab52f713e14cbd2dbf30adc196c01558
-2009-11-01T20:48:14.907070Z
-171
+2009-11-14T14:55:43.000000Z
+1084144795954a89172a45b9571e3838
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -636,18 +636,18 @@ sago007
 
 
 
-75390
+9580
 
-ui_spreset.c
+ui_qmenu.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-0890fe55c2cec20480bb8fefc89e1d3b
-2009-05-15T14:51:36.914432Z
-3
+2009-11-14T14:55:43.000000Z
+6f72d513412f4b2e6d217030957f04c2
+2009-09-28T16:00:35.579262Z
+152
 sago007
 
 
@@ -670,18 +670,18 @@ sago007
 
 
 
-4946
+36735
 
-ui_gameinfo.c
+ui_specifyleague.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-58653c90dfabd0de36b694434b2e73f8
-2009-05-15T14:51:36.914432Z
-3
+2009-11-14T14:55:43.000000Z
+1faac7efd8f55f7143de89726dc482c3
+2009-09-21T20:36:23.597455Z
+148
 sago007
 
 
@@ -704,16 +704,16 @@ sago007
 
 
 
-16697
+10631
 
-ui_controls2.c
+ui_removebots.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-dc745ca6091538e49ed49f3906bf2e47
+2009-11-14T14:55:43.000000Z
+765991dfd3d3ac234330ed8a758e4136
 2009-09-21T20:36:23.597455Z
 148
 sago007
@@ -738,16 +738,16 @@ sago007
 
 
 
-56882
+10437
 
-ui_removebots.c
+ui_controls2.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-765991dfd3d3ac234330ed8a758e4136
+2009-11-14T14:55:43.000000Z
+dc745ca6091538e49ed49f3906bf2e47
 2009-09-21T20:36:23.597455Z
 148
 sago007
@@ -772,18 +772,18 @@ sago007
 
 
 
-10437
+56882
 
-ui_specifyleague.c
+ui_gameinfo.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-1faac7efd8f55f7143de89726dc482c3
-2009-09-21T20:36:23.597455Z
-148
+2009-11-14T14:55:43.000000Z
+58653c90dfabd0de36b694434b2e73f8
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -806,18 +806,18 @@ sago007
 
 
 
-10631
+16697
 
-ui_qmenu.c
+ui_spreset.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-6f72d513412f4b2e6d217030957f04c2
-2009-09-28T16:00:35.579262Z
-152
+2009-11-14T14:55:43.000000Z
+0890fe55c2cec20480bb8fefc89e1d3b
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -840,7 +840,7 @@ sago007
 
 
 
-36735
+4946
 
 ui_sound.c
 file
@@ -848,7 +848,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 6367312072afaba9f9025a8640de4cc8
 2009-09-21T20:36:23.597455Z
 148
@@ -882,7 +882,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 6ccb94845259e42009329edd46f0dcf3
 2009-09-21T20:36:23.597455Z
 148
@@ -916,7 +916,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 142b8526e2a9917eec50dab9682501c4
 2009-09-21T20:36:23.597455Z
 148
@@ -950,7 +950,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 0de8c76ad20c783e3ef045345b96b344
 2009-09-21T20:36:23.597455Z
 148
@@ -978,16 +978,16 @@ sago007
 
 6794
 
-ui_local.h
+ui_votemenu_map.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-56007cafa7c0b027f570044a4956179e
-2009-05-30T01:25:51.375520Z
-67
+2009-11-14T14:55:43.000000Z
+da4ee758d5275cd46e2e7948cf90382e
+2009-09-21T20:36:23.597455Z
+148
 sago007
 
 
@@ -1010,18 +1010,18 @@ sago007
 
 
 
-23911
+10153
 
-ui_votemenu_map.c
+ui_local.h
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-da4ee758d5275cd46e2e7948cf90382e
-2009-09-21T20:36:23.597455Z
-148
+2009-11-14T14:55:43.000000Z
+56007cafa7c0b027f570044a4956179e
+2009-05-30T01:25:51.375520Z
+67
 sago007
 
 
@@ -1044,18 +1044,18 @@ sago007
 
 
 
-10153
+23911
 
-ui_votemenu_fraglimit.c
+ui_mfield.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-cdcd303c325114dedc7a247f90ae1049
-2009-09-21T20:36:23.597455Z
-148
+2009-11-14T14:55:43.000000Z
+5f001dfad01c886a007de34df03401d2
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -1078,18 +1078,18 @@ sago007
 
 
 
-10080
+8724
 
-ui_mfield.c
+ui_votemenu_fraglimit.c
 file
 
 
 
 
-2009-12-03T12:42:59.000000Z
-5f001dfad01c886a007de34df03401d2
-2009-05-15T14:51:36.914432Z
-3
+2009-11-14T14:55:43.000000Z
+cdcd303c325114dedc7a247f90ae1049
+2009-09-21T20:36:23.597455Z
+148
 sago007
 
 
@@ -1112,7 +1112,7 @@ sago007
 
 
 
-8724
+10080
 
 ui_password.c
 file
@@ -1120,7 +1120,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 5b5ad85ac25a86b2015a324e5949f216
 2009-09-21T20:36:23.597455Z
 148
@@ -1154,7 +1154,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 73bbd12ad3f3c97b336e09cc589b81c8
 2009-09-21T20:36:23.597455Z
 148
@@ -1188,7 +1188,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 aa9d437b337611015192833086ce551e
 2009-10-23T09:13:24.561024Z
 167
@@ -1222,7 +1222,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 96ccb35aa23debb2a9bbb5e5539051d2
 2009-09-21T20:36:23.597455Z
 148
@@ -1256,7 +1256,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 5af3dcef923be337ffc97f57259c1d5e
 2009-09-21T20:36:23.597455Z
 148
@@ -1290,7 +1290,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 e222af5dfb41d3c390ab8dfca48e173e
 2009-09-21T20:36:23.597455Z
 148
@@ -1324,7 +1324,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 2fbdb55a40b91c2ef762e12809c4f26d
 2009-10-11T19:21:39.938782Z
 161
@@ -1358,7 +1358,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 b2d35170aec147b4dc73b7bc60e58ba3
 2009-09-21T20:36:23.597455Z
 148
@@ -1392,7 +1392,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 1b5bedf0f095cfe966093459f29a6ee9
 2009-05-15T14:51:36.914432Z
 3
@@ -1426,7 +1426,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 9deef589e15177beb751796e37b9dfdc
 2009-09-21T20:36:23.597455Z
 148
@@ -1460,7 +1460,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 d65c97f57d97a0eed5ee3e7883ffc2ac
 2009-09-21T20:36:23.597455Z
 148
@@ -1494,7 +1494,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 0553db48e2bcde31f9dde9abcbf7f629
 2009-09-21T20:36:23.597455Z
 148
@@ -1528,7 +1528,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 7a958ffbd968fd58bab4a10bf8f0f8a5
 2009-09-21T20:36:23.597455Z
 148
@@ -1562,7 +1562,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 b1903cafd76b15c574829c77f57ce84b
 2009-09-21T20:36:23.597455Z
 148
@@ -1596,7 +1596,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 bfffbb7d8352bace2b404b4772d1c348
 2009-05-15T14:51:36.914432Z
 3
@@ -1630,7 +1630,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 6d3cc7427f6a1f25b8fee6eb386f7291
 2009-09-21T20:36:23.597455Z
 148
@@ -1664,7 +1664,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 b93e69ff39e75483d985c6454abd58ca
 2009-05-15T14:51:36.914432Z
 3
@@ -1698,7 +1698,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 15fd150500251c813844b25b963ca261
 2009-09-21T20:36:23.597455Z
 148
@@ -1732,7 +1732,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 965b4e64e49d70789f8b0bf1e9b43a32
 2009-05-15T14:51:36.914432Z
 3
@@ -1766,7 +1766,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 2909eb2b8bd5bb97ebdcbb5ac20a5e21
 2009-09-28T16:00:35.579262Z
 152
@@ -1800,7 +1800,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 ebe70550535bcd5b26e99c8e139732bb
 2009-09-21T20:36:23.597455Z
 148
@@ -1834,10 +1834,10 @@ file
 
 
 
-2010-05-06T10:48:17.000000Z
-f3418b83616be51f24c76d90025299ea
-2010-04-25T11:01:53.485090Z
-201
+2009-11-14T14:55:43.000000Z
+350e8aa45a978990c095322df0fab86e
+2009-05-15T14:51:36.914432Z
+3
 sago007
 
 
@@ -1860,7 +1860,7 @@ sago007
 
 
 
-2633
+2589
 
 ui_cdkey.c
 file
@@ -1868,7 +1868,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 f50b199d0cc1b2c18862110d28f54db0
 2009-05-15T14:51:36.914432Z
 3
@@ -1902,7 +1902,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 75c5a81d8ae5e302e91b4ab0521eb115
 2009-09-21T20:36:23.597455Z
 148
@@ -1936,7 +1936,7 @@ file
 
 
 
-2009-12-03T12:42:59.000000Z
+2009-11-14T14:55:43.000000Z
 21f670b669a4f7abd2ff3be6d3147d12
 2009-09-21T20:36:23.597455Z
 148
diff -rupN code-svn//q3_ui/.svn/text-base/ui_credits.c.svn-base code//q3_ui/.svn/text-base/ui_credits.c.svn-base
--- code-svn//q3_ui/.svn/text-base/ui_credits.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/.svn/text-base/ui_credits.c.svn-base	2009-11-14 15:55:42.000000000 +0100
@@ -72,8 +72,8 @@ static void UI_CreditMenu_Draw( void ) {
 	y += PROP_HEIGHT * PROP_SMALL_SIZE_SCALE;
 	UI_DrawProportionalString( 320, y, "Open Arena", UI_CENTER|UI_SMALLFONT, color_white );
 	
-	y += 228;
-	UI_DrawString( 320, y, "Terminating...", UI_CENTER|UI_SMALLFONT, color_red );
+	//y += 28;
+	//UI_DrawString( 320, y, "Click or press any key to quit", UI_CENTER|UI_SMALLFONT, color_red );
         
         y = 480 - PROP_HEIGHT * PROP_SMALL_SIZE_SCALE;
 	UI_DrawProportionalString( 320, y, "www.openarena.ws", UI_CENTER|UI_SMALLFONT, color_white );
@@ -92,5 +92,4 @@ void UI_CreditMenu( void ) {
 	s_credits.menu.key = UI_CreditMenu_Key;
 	s_credits.menu.fullscreen = qtrue;
 	UI_PushMenu ( &s_credits.menu );
-        trap_Cmd_ExecuteText( EXEC_APPEND, "wait 2; quit\n" );
 }
diff -rupN code-svn//q3_ui/.svn/text-base/ui_menu.c.svn-base code//q3_ui/.svn/text-base/ui_menu.c.svn-base
--- code-svn//q3_ui/.svn/text-base/ui_menu.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/.svn/text-base/ui_menu.c.svn-base	2009-11-14 15:55:42.000000000 +0100
@@ -136,8 +136,7 @@ void Main_MenuEvent (void* ptr, int even
 		break;
 
 	case ID_EXIT:
-		//UI_ConfirmMenu( "EXIT GAME?", 0, MainMenu_ExitAction );
-                UI_CreditMenu();
+		UI_ConfirmMenu( "EXIT GAME?", 0, MainMenu_ExitAction );
 		break;
 	}
 }
@@ -233,7 +232,7 @@ static void Main_MenuDraw( void ) {
 	}
 
 		UI_DrawProportionalString( 320, 372, "", UI_CENTER|UI_SMALLFONT, color );
-		UI_DrawString( 320, 400, "OpenArena(c) 2005-2010 OpenArena Team", UI_CENTER|UI_SMALLFONT, color );
+		UI_DrawString( 320, 400, "OpenArena(c) 2005-2009 OpenArena Team", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 414, "OpenArena comes with ABSOLUTELY NO WARRANTY; this is free software", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 428, "and you are welcome to redistribute it under certain conditions;", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 444, "read COPYING for details.", UI_CENTER|UI_SMALLFONT, color );
diff -rupN code-svn//q3_ui/.svn/text-base/ui_servers2.c.svn-base code//q3_ui/.svn/text-base/ui_servers2.c.svn-base
--- code-svn//q3_ui/.svn/text-base/ui_servers2.c.svn-base	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/.svn/text-base/ui_servers2.c.svn-base	2009-11-14 15:55:42.000000000 +0100
@@ -63,12 +63,12 @@ MULTIPLAYER MENU (SERVER BROWSER)
 #define ID_MASTER			10
 #define ID_GAMETYPE			11
 #define ID_SORTKEY			12
-#define ID_SHOW_FULL                    13
-#define ID_SHOW_EMPTY                   14
+#define ID_SHOW_FULL		13
+#define ID_SHOW_EMPTY		14
 
 #define ID_LIST				15
-#define ID_SCROLL_UP                    16
-#define ID_SCROLL_DOWN                  17
+#define ID_SCROLL_UP		16
+#define ID_SCROLL_DOWN		17
 #define ID_BACK				18
 #define ID_REFRESH			19
 #define ID_SPECIFY			20
@@ -77,8 +77,8 @@ MULTIPLAYER MENU (SERVER BROWSER)
 #define ID_REMOVE			23
 
 //Beta 23
-#define ID_ONLY_HUMANS                  24
-#define ID_HIDE_PRIVATE                 25
+#define ID_ONLY_HUMANS          24
+#define ID_HIDE_PRIVATE         25
 
 #define GR_LOGO				30
 #define GR_LETTERS			31
@@ -93,15 +93,14 @@ MULTIPLAYER MENU (SERVER BROWSER)
 
 #define SORT_HOST			0
 #define SORT_MAP			1
-#define SORT_CLIENTS                    2
+#define SORT_CLIENTS		2
 #define SORT_GAME			3
 #define SORT_PING			4
-#define SORT_HUMANS                     5
 
 #define GAMES_ALL			0
 #define GAMES_FFA			1
-#define GAMES_TEAMPLAY                  2
-#define GAMES_TOURNEY                   3
+#define GAMES_TEAMPLAY		2
+#define GAMES_TOURNEY		3
 #define GAMES_CTF			4
 #define GAMES_1FCTF                     5
 #define GAMES_OBELISK                   6
@@ -147,7 +146,6 @@ static const char *sortkey_items[] = {
 	"Open Player Spots",
 	"Game Type",
 	"Ping Time",
-        "Human Players",
 	NULL
 };
 
@@ -353,18 +351,6 @@ static int QDECL ArenaServers_Compare( c
 		}
 		return -1;
 
-        case SORT_HUMANS:
-                f1 = t1->humanclients;
-                f2 = t2->humanclients;
-
-                if( f1 < f2 ) {
-                    return 1;
-                }
-                if( f1 == f2 ) {
-                    return 0;
-                }
-                return -1;
-
 	case SORT_GAME:
 		if( t1->gametype < t2->gametype ) {
 			return -1;
@@ -722,9 +708,9 @@ static void ArenaServers_UpdateMenu( voi
 		*b++ = ' ';
 	
                 if(g_onlyhumans == 0)
-                    Com_sprintf( b, 8, "%2d/%2d ", servernodeptr->numclients, servernodeptr->maxclients );
+                    Com_sprintf( b, 7, "%2d/%2d ", servernodeptr->numclients, servernodeptr->maxclients );
                 else
-                    Com_sprintf( b, 8, "%2d/%2d ", servernodeptr->humanclients, servernodeptr->maxclients );
+                    Com_sprintf( b, 7, "%2d/%2d ", servernodeptr->humanclients, servernodeptr->maxclients );
 		b += 6;
 	
 		bufAddr = Q_strcpyColor( servernodeptr->gamename, b, 8 );
diff -rupN code-svn//q3_ui/ui_credits.c code//q3_ui/ui_credits.c
--- code-svn//q3_ui/ui_credits.c	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/ui_credits.c	2009-11-14 15:55:43.000000000 +0100
@@ -72,8 +72,8 @@ static void UI_CreditMenu_Draw( void ) {
 	y += PROP_HEIGHT * PROP_SMALL_SIZE_SCALE;
 	UI_DrawProportionalString( 320, y, "Open Arena", UI_CENTER|UI_SMALLFONT, color_white );
 	
-	y += 228;
-	UI_DrawString( 320, y, "Terminating...", UI_CENTER|UI_SMALLFONT, color_red );
+	//y += 28;
+	//UI_DrawString( 320, y, "Click or press any key to quit", UI_CENTER|UI_SMALLFONT, color_red );
         
         y = 480 - PROP_HEIGHT * PROP_SMALL_SIZE_SCALE;
 	UI_DrawProportionalString( 320, y, "www.openarena.ws", UI_CENTER|UI_SMALLFONT, color_white );
@@ -92,5 +92,4 @@ void UI_CreditMenu( void ) {
 	s_credits.menu.key = UI_CreditMenu_Key;
 	s_credits.menu.fullscreen = qtrue;
 	UI_PushMenu ( &s_credits.menu );
-        trap_Cmd_ExecuteText( EXEC_APPEND, "wait 2; quit\n" );
 }
diff -rupN code-svn//q3_ui/ui_menu.c code//q3_ui/ui_menu.c
--- code-svn//q3_ui/ui_menu.c	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/ui_menu.c	2009-11-14 15:55:43.000000000 +0100
@@ -136,8 +136,7 @@ void Main_MenuEvent (void* ptr, int even
 		break;
 
 	case ID_EXIT:
-		//UI_ConfirmMenu( "EXIT GAME?", 0, MainMenu_ExitAction );
-                UI_CreditMenu();
+		UI_ConfirmMenu( "EXIT GAME?", 0, MainMenu_ExitAction );
 		break;
 	}
 }
@@ -233,7 +232,7 @@ static void Main_MenuDraw( void ) {
 	}
 
 		UI_DrawProportionalString( 320, 372, "", UI_CENTER|UI_SMALLFONT, color );
-		UI_DrawString( 320, 400, "OpenArena(c) 2005-2010 OpenArena Team", UI_CENTER|UI_SMALLFONT, color );
+		UI_DrawString( 320, 400, "OpenArena(c) 2005-2009 OpenArena Team", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 414, "OpenArena comes with ABSOLUTELY NO WARRANTY; this is free software", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 428, "and you are welcome to redistribute it under certain conditions;", UI_CENTER|UI_SMALLFONT, color );
 		UI_DrawString( 320, 444, "read COPYING for details.", UI_CENTER|UI_SMALLFONT, color );
diff -rupN code-svn//q3_ui/ui_servers2.c code//q3_ui/ui_servers2.c
--- code-svn//q3_ui/ui_servers2.c	2010-05-06 12:48:17.000000000 +0200
+++ code//q3_ui/ui_servers2.c	2009-11-14 15:55:43.000000000 +0100
@@ -63,12 +63,12 @@ MULTIPLAYER MENU (SERVER BROWSER)
 #define ID_MASTER			10
 #define ID_GAMETYPE			11
 #define ID_SORTKEY			12
-#define ID_SHOW_FULL                    13
-#define ID_SHOW_EMPTY                   14
+#define ID_SHOW_FULL		13
+#define ID_SHOW_EMPTY		14
 
 #define ID_LIST				15
-#define ID_SCROLL_UP                    16
-#define ID_SCROLL_DOWN                  17
+#define ID_SCROLL_UP		16
+#define ID_SCROLL_DOWN		17
 #define ID_BACK				18
 #define ID_REFRESH			19
 #define ID_SPECIFY			20
@@ -77,8 +77,8 @@ MULTIPLAYER MENU (SERVER BROWSER)
 #define ID_REMOVE			23
 
 //Beta 23
-#define ID_ONLY_HUMANS                  24
-#define ID_HIDE_PRIVATE                 25
+#define ID_ONLY_HUMANS          24
+#define ID_HIDE_PRIVATE         25
 
 #define GR_LOGO				30
 #define GR_LETTERS			31
@@ -93,15 +93,14 @@ MULTIPLAYER MENU (SERVER BROWSER)
 
 #define SORT_HOST			0
 #define SORT_MAP			1
-#define SORT_CLIENTS                    2
+#define SORT_CLIENTS		2
 #define SORT_GAME			3
 #define SORT_PING			4
-#define SORT_HUMANS                     5
 
 #define GAMES_ALL			0
 #define GAMES_FFA			1
-#define GAMES_TEAMPLAY                  2
-#define GAMES_TOURNEY                   3
+#define GAMES_TEAMPLAY		2
+#define GAMES_TOURNEY		3
 #define GAMES_CTF			4
 #define GAMES_1FCTF                     5
 #define GAMES_OBELISK                   6
@@ -147,7 +146,6 @@ static const char *sortkey_items[] = {
 	"Open Player Spots",
 	"Game Type",
 	"Ping Time",
-        "Human Players",
 	NULL
 };
 
@@ -353,18 +351,6 @@ static int QDECL ArenaServers_Compare( c
 		}
 		return -1;
 
-        case SORT_HUMANS:
-                f1 = t1->humanclients;
-                f2 = t2->humanclients;
-
-                if( f1 < f2 ) {
-                    return 1;
-                }
-                if( f1 == f2 ) {
-                    return 0;
-                }
-                return -1;
-
 	case SORT_GAME:
 		if( t1->gametype < t2->gametype ) {
 			return -1;
@@ -722,9 +708,9 @@ static void ArenaServers_UpdateMenu( voi
 		*b++ = ' ';
 	
                 if(g_onlyhumans == 0)
-                    Com_sprintf( b, 8, "%2d/%2d ", servernodeptr->numclients, servernodeptr->maxclients );
+                    Com_sprintf( b, 7, "%2d/%2d ", servernodeptr->numclients, servernodeptr->maxclients );
                 else
-                    Com_sprintf( b, 8, "%2d/%2d ", servernodeptr->humanclients, servernodeptr->maxclients );
+                    Com_sprintf( b, 7, "%2d/%2d ", servernodeptr->humanclients, servernodeptr->maxclients );
 		b += 6;
 	
 		bufAddr = Q_strcpyColor( servernodeptr->gamename, b, 8 );
diff -rupN code-svn//qcommon/.svn/entries code//qcommon/.svn/entries
--- code-svn//qcommon/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//qcommon/.svn/entries	2009-11-14 15:55:47.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/qcommon
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 bfd1ea94fec5cc2c49876af6e2af40cd
 2009-10-22T16:50:27.483520Z
 165
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 e8a21aa84f2423cc786061af62cb85b6
 2009-05-22T22:08:29.464763Z
 14
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 c4b7d68370809c119e495d17cf513fc2
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 1eac9904d68238b73d570e0eec2ed351
 2009-05-22T21:47:37.537141Z
 13
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 b3dfdb820a47e4b6a96be50e4a5bf2ad
 2009-05-24T02:38:21.775786Z
 21
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 fe28455cdf55d40a38bdc9ef5c416230
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:05.000000Z
+2009-11-14T14:55:47.000000Z
 665a863ce3e41ba3a0f22b00ac1070ea
 2009-11-12T17:06:10.702239Z
 182
diff -rupN code-svn//renderer/.svn/entries code//renderer/.svn/entries
--- code-svn//renderer/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//renderer/.svn/entries	2009-11-14 15:55:45.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/renderer
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:02.000000Z
+2009-11-14T14:55:45.000000Z
 296305d1a20390c9266d358c217f5b86
 2009-05-15T14:44:23.081931Z
 2
diff -rupN code-svn//.svn/all-wcprops code//.svn/all-wcprops
--- code-svn//.svn/all-wcprops	2010-05-06 12:48:17.000000000 +0200
+++ code//.svn/all-wcprops	2009-11-14 15:55:50.000000000 +0100
@@ -1,5 +1,5 @@
 K 25
 svn:wc:ra_dav:version-url
 V 28
-/svn/!svn/ver/206/trunk/code
+/svn/!svn/ver/182/trunk/code
 END
diff -rupN code-svn//.svn/entries code//.svn/entries
--- code-svn//.svn/entries	2010-05-06 12:48:17.000000000 +0200
+++ code//.svn/entries	2009-11-14 15:55:50.000000000 +0100
@@ -1,14 +1,14 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code
 http://oax.googlecode.com/svn
 
 
 
-2010-05-04T21:22:44.674953Z
-206
+2009-11-12T17:06:10.702239Z
+182
 sago007
 
 
diff -rupN code-svn//tools/asm/.svn/entries code//tools/asm/.svn/entries
--- code-svn//tools/asm/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/asm/.svn/entries	2009-11-14 15:55:43.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/asm
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 0de74328f356ac0ff70474723515e63d
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 8a9e8019bec55eae8daa197cf022f5e0
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 0a3157925d09e3542a8ea17b04cc0090
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 092d38034e405bcd42dbffd680a574d9
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 3a23ef4592e32cc54fbe21b61e58296f
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 1deed2a5ef48fe2097f40656dde47f48
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 9743bf6f3477f86557468e7ecf6c0948
 2009-05-15T14:51:36.914432Z
 3
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 acb6bdd20534b849cdc98551e894c753
 2009-05-15T14:51:36.914432Z
 3
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 d8e189100cedde98c56526d9de4bc99f
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/cpp/.svn/entries code//tools/lcc/cpp/.svn/entries
--- code-svn//tools/lcc/cpp/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/cpp/.svn/entries	2009-11-14 15:55:43.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc/cpp
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 ee3619d57e7d0fd64d8d5d61ef1f9891
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 2dadfe31c7ee1ec8f7195ba260158d84
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 6afbc2234dcdd7475536297d832828f4
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 00bfb65b1b10e0a0469c09132a9568ca
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 71abe5dd6cf0a4fe87ef709b55baff0a
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 7d10202ea84a608b83eb1671d77e70b8
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 200b1390c482f0e805006a12cda5960b
 2009-05-15T14:51:36.914432Z
 3
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 07e0b81c70a8cdaa059cc5dd32962bbe
 2009-05-15T14:51:36.914432Z
 3
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 8c1ed247e6245567914f9063c3602fbd
 2009-05-15T14:51:36.914432Z
 3
@@ -338,7 +338,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 5363ea52b58ac14b62e192184c6067d5
 2009-05-15T14:51:36.914432Z
 3
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 92bb396e80c078a72ffd5bd0aec9059c
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/doc/.svn/entries code//tools/lcc/doc/.svn/entries
--- code-svn//tools/lcc/doc/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/doc/.svn/entries	2009-11-14 15:55:43.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc/doc
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 151ce8c304f5bfe0bdbc618845f4061c
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 18f147c77b0e2428fddb27fe93d0f2a9
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 b1e120b670a37084bb7bb7d71142c537
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 853efcab05914495c47849977166f291
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 5138cf5156f9406dc3c9962b8d722da8
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:00.000000Z
+2009-11-14T14:55:43.000000Z
 b301196c9cd74a523fb3c57b3ef7c458
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/etc/.svn/entries code//tools/lcc/etc/.svn/entries
--- code-svn//tools/lcc/etc/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/etc/.svn/entries	2009-11-14 15:55:44.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc/etc
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 7341202ff824dd311205b38e589ab261
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 876dd1999e4fd708e86e121f528b0cb5
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/lburg/.svn/entries code//tools/lcc/lburg/.svn/entries
--- code-svn//tools/lcc/lburg/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/lburg/.svn/entries	2009-11-14 15:55:44.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc/lburg
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b8f65e91f189978d886e8538744b8d9e
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b0423bac98628a07384de9fda5e475e6
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b76d655ddc6c01fa5a1eef6276232aac
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 081cf947f9f5401ffb25757cbd9839ef
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 225f60aa41e03803935464fdd8835ee0
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/src/.svn/entries code//tools/lcc/src/.svn/entries
--- code-svn//tools/lcc/src/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/src/.svn/entries	2009-11-14 15:55:44.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc/src
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 842cca1d848a452d8c6ddf6813645493
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 5406dc2ef1041be4c62f11fbca42f55c
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 d07f983a0d4f6c10007607de56095053
 2009-05-15T14:51:36.914432Z
 3
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 c45fd6e0c5fdae52c6b8aa0de72668dd
 2009-05-15T14:51:36.914432Z
 3
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b918124a995a775db8e0a3608c050364
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 3937bcd3dde35b3dfeb733d4f1f05029
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 9e442ac9638e1df176c5a8b0cd18f104
 2009-05-15T14:51:36.914432Z
 3
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 05f7499200b5deffc3c7bb2729c1a292
 2009-05-15T14:51:36.914432Z
 3
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 6e46442cc2509053d81b6501eba80159
 2009-05-15T14:51:36.914432Z
 3
@@ -338,7 +338,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 4a738829f6b1e738fe768c01ecb11cce
 2009-05-15T14:51:36.914432Z
 3
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 941a7f498ec3f25950a597ab4ce65141
 2009-05-15T14:51:36.914432Z
 3
@@ -406,7 +406,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 e0d2f275321190cf9053ec2ccfe13509
 2009-05-15T14:51:36.914432Z
 3
@@ -440,7 +440,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 4e21fd4ca3ea460fb8bb1be5b2b8c54e
 2009-05-15T14:51:36.914432Z
 3
@@ -474,7 +474,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b942354854937aa339b3b9a21c9b91bf
 2009-05-15T14:51:36.914432Z
 3
@@ -508,7 +508,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 0b3c3dee2dd52a7d05ca32ea6660efbe
 2009-05-15T14:51:36.914432Z
 3
@@ -542,7 +542,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 36b0fcea530ba235541b4b0d9229e70f
 2009-05-15T14:51:36.914432Z
 3
@@ -576,7 +576,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b609aa7d4485267e0f7bab3318579aa6
 2009-05-15T14:51:36.914432Z
 3
@@ -610,7 +610,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 884b3fa1c36e996edbc5a1bfe65f2aea
 2009-05-15T14:51:36.914432Z
 3
@@ -644,7 +644,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 89368a35ab8974c84882489dc7e371f4
 2009-05-15T14:51:36.914432Z
 3
@@ -678,7 +678,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 82334804ef99d88fa8099cb5fb7428e2
 2009-05-15T14:51:36.914432Z
 3
@@ -712,7 +712,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 19996a3a9822d1f53f47703d3ede1f12
 2009-05-15T14:51:36.914432Z
 3
@@ -746,7 +746,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 274f720fd99aabc6a7bb647ec86bea3b
 2009-05-15T14:51:36.914432Z
 3
@@ -780,7 +780,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 1ac48351e8d77acf64f803016e966d28
 2009-05-15T14:51:36.914432Z
 3
@@ -814,7 +814,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 1590a46c17f30c4323292ca28aebd57a
 2009-05-15T14:51:36.914432Z
 3
@@ -848,7 +848,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 807f7e5006621512350bc7ba20de85ff
 2009-05-15T14:51:36.914432Z
 3
@@ -882,7 +882,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 d83f35cb609fccfbbbfe8a202ca17b0f
 2009-05-15T14:51:36.914432Z
 3
@@ -916,7 +916,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 4b8f6b7837f0ff59f6a7ceaf52f7bc23
 2009-05-15T14:51:36.914432Z
 3
@@ -950,7 +950,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 c3d524eb8c1f0a57cfcefbeaa594ea3c
 2009-05-15T14:51:36.914432Z
 3
@@ -984,7 +984,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 60ebbbd012a2ebb60f2b98cdddb5dcc6
 2009-05-15T14:51:36.914432Z
 3
@@ -1018,7 +1018,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 41be02966b0c60a1fa8adc6b62fa4ab6
 2009-05-15T14:51:36.914432Z
 3
@@ -1052,7 +1052,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 dbdd7387dfdbe75a52200fe71053c6b2
 2009-05-15T14:51:36.914432Z
 3
@@ -1086,7 +1086,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 bdf423e6da061b044a77d28e1a04a89d
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/lcc/.svn/entries code//tools/lcc/.svn/entries
--- code-svn//tools/lcc/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/lcc/.svn/entries	2009-11-14 15:55:44.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools/lcc
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 28ecdebbfdd8dc2416ab9ab92574a83e
 2009-05-15T14:51:36.914432Z
 3
@@ -75,7 +75,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 bfa123789d1cb97038dc54695a842cff
 2009-05-15T14:51:36.914432Z
 3
@@ -109,7 +109,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 b68c468bde8703605e9fa4caf11da372
 2009-05-15T14:51:36.914432Z
 3
@@ -149,7 +149,7 @@ file
 
 
 
-2009-12-03T12:43:01.000000Z
+2009-11-14T14:55:44.000000Z
 63eb3aebee8506dabf0a4772241f3a2b
 2009-05-15T14:51:36.914432Z
 3
diff -rupN code-svn//tools/.svn/entries code//tools/.svn/entries
--- code-svn//tools/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//tools/.svn/entries	2009-11-14 15:55:44.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/tools
 http://oax.googlecode.com/svn
 
diff -rupN code-svn//ui/.svn/entries code//ui/.svn/entries
--- code-svn//ui/.svn/entries	2010-05-06 12:48:18.000000000 +0200
+++ code//ui/.svn/entries	2009-11-14 15:55:50.000000000 +0100
@@ -1,7 +1,7 @@
 10
 
 dir
-206
+182
 http://oax.googlecode.com/svn/trunk/code/ui
 http://oax.googlecode.com/svn
 
@@ -32,7 +32,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 d7c5e64b0b4812370af6a1ec4b46f34f
 2009-05-15T14:51:36.914432Z
 3
@@ -66,7 +66,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 67baebf4e07d76e12e1ad0bd0d08b544
 2009-05-15T14:51:36.914432Z
 3
@@ -100,7 +100,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 46830c0925439b973d13c421f0e2c8fc
 2009-06-18T15:27:41.901845Z
 131
@@ -134,7 +134,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 908688d74823622db7073b48617689c6
 2009-06-18T15:27:41.901845Z
 131
@@ -168,7 +168,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 5b5f51202778a1842cccada1f04a4611
 2009-05-15T14:51:36.914432Z
 3
@@ -202,7 +202,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 8d6f040f9e1d44ead97b2551f8aca63c
 2009-05-15T14:51:36.914432Z
 3
@@ -236,7 +236,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 7513aa808dfacfcbee39ef20b04358bb
 2009-05-15T14:51:36.914432Z
 3
@@ -270,7 +270,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 5fd7c0a2fcf427dc02aa308914d05954
 2009-05-15T14:51:36.914432Z
 3
@@ -304,7 +304,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 182fa8db72875c6a31a330b3e82eb06b
 2009-05-15T14:51:36.914432Z
 3
@@ -338,7 +338,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 c023aa37f23c6ce9a7db84eb719c978a
 2009-06-17T20:00:35.694592Z
 129
@@ -372,7 +372,7 @@ file
 
 
 
-2009-12-03T12:43:08.000000Z
+2009-11-14T14:55:50.000000Z
 1b11c31de05abf64bbe36c74d56c68bc
 2009-05-15T14:51:36.914432Z
 3
